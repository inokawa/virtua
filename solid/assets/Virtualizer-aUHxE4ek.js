import{m as v,c as C,h as s,o as V,j as m,k as L,d,F as N,D as y,l as D,n as g,p as U}from"./web-CXCq-PRR.js";import{c as w,U as F,a as H,b as M,L as P,d as G,i as k,g as B,e as j,A as J,f as q}from"./utils-C9bggKDN.js";const W=n=>{let l;const{itemSize:u,horizontal:c=!1,overscan:h,cache:_}=n;n=v({as:"div"},n);const e=w(n.data.length,u,h,void 0,_,!u),f=G(e,c),i=j(e,c),[a,E]=C(e.$getStateVersion()),I=e.$subscribe(F,()=>{E(e.$getStateVersion())}),T=e.$subscribe(H,()=>{var t;(t=n.onScroll)==null||t.call(n,e.$getScrollOffset())}),b=e.$subscribe(M,()=>{var t;(t=n.onScrollEnd)==null||t.call(n)}),S=s(t=>{a();const r=e.$getRange();return t&&k(t,r)?t:r}),z=s(()=>a()&&e.$isScrolling()),$=s(()=>a()&&e.$getTotalSize());V(()=>{n.ref&&n.ref({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return B(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:i.$scrollToIndex,scrollTo:i.$scrollTo,scrollBy:i.$scrollBy});const t=n.scrollRef||l.parentElement;f.$observeRoot(t),i.$observe(t),D(()=>{n.ref&&n.ref(),I(),T(),b(),f.$dispose(),i.$dispose()})}),m(g(()=>n.data.length,t=>{t!==e.$getItemsLength()&&e.$update(J,[t,n.shift])})),m(g(()=>n.startMargin||0,t=>{t!==e.$getStartSpacerSize()&&e.$update(q,t)})),L(g(a,()=>{i.$fixScrollJump()}));const x=s(()=>{const[t,r]=S();return r>=0?n.data.slice(t,r+1):[]});return d(y,{get component(){return n.as},ref(t){var r=l;typeof r=="function"?r(t):l=t},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:c?$()+"px":"100%",height:c?"100%":$()+"px","pointer-events":z()?"none":void 0}},get children(){return d(N,{get each(){return x()},children:(t,r)=>{const o=s(()=>S()[0]+r()),O=s(()=>(a(),e.$getItemOffset(o()))),A=s(()=>(a(),e.$isUnmeasuredItem(o()))),R=s(()=>U(()=>n.children(t,o)));return d(P,{get _as(){return n.item},get _index(){return o()},get _resizer(){return f.$observeItem},get _offset(){return O()},get _hide(){return A()},get _children(){return R()},_isHorizontal:c})}})}})};export{W as V};
