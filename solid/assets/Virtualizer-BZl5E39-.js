import{m as R,c as v,h as o,o as A,j as S,k as C,d as f,D as x,l as L,n as g}from"./web-DSIcfvkV.js";import{c as V,U as N,a as y,b as D,R as U,L as w,d as H,i as M,g as P,e as F,A as G,f as j}from"./utils-xsopWT0A.js";const k=n=>{let c;const{itemSize:u,horizontal:a=!1,overscan:$}=n;n=R({as:"div"},n);const e=V(n.data.length,u,$,void 0,void 0,!u),l=H(e,a),s=F(e,a),[i,m]=v(e.$getStateVersion()),_=e.$subscribe(N,()=>{m(e.$getStateVersion())}),E=e.$subscribe(y,()=>{var t;(t=n.onScroll)==null||t.call(n,e.$getScrollOffset())}),T=e.$subscribe(D,()=>{var t;(t=n.onScrollEnd)==null||t.call(n)}),I=o(t=>{i();const r=e.$getRange();return t&&M(t,r)?t:r}),b=o(()=>i()&&e.$isScrolling()),d=o(()=>i()&&e.$getTotalSize()),h=o(()=>i()&&e.$getJumpCount());return A(()=>{n.ref&&n.ref({get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return P(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:s.$scrollToIndex,scrollTo:s.$scrollTo,scrollBy:s.$scrollBy});const t=n.scrollRef||c.parentElement;l.$observeRoot(t),s.$observe(t),L(()=>{n.ref&&n.ref(),_(),E(),T(),l.$dispose(),s.$dispose()})}),S(g(()=>n.data.length,t=>{t!==e.$getItemsLength()&&e.$update(G,[t,n.shift])})),S(g(()=>n.startMargin||0,t=>{t!==e.$getStartSpacerSize()&&e.$update(j,t)})),C(g(h,()=>{s.$fixScrollJump()})),f(x,{get component(){return n.as},ref(t){var r=c;typeof r=="function"?r(t):c=t},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:a?d()+"px":"100%",height:a?"100%":d()+"px","pointer-events":b()?"none":void 0}},get children(){return f(U,{get _each(){return n.data},get _range(){return I()},_render:(t,r)=>{const z=o(()=>(i(),e.$getItemOffset(r))),O=o(()=>(i(),e.$isUnmeasuredItem(r)));return f(w,{get _as(){return n.item},_index:r,get _resizer(){return l.$observeItem},get _offset(){return z()},get _hide(){return O()},get _children(){return n.children(t(),r)},_isHorizontal:a})}})}})};export{k as V};
