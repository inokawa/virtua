import{m as A,c as x,h as a,o as D,j as E,k as b,d as u,D as V,l as N,n as f}from"./web-DL2OZRFB.js";import{c as y,U,a as w,b as H,S as M,R as P,L as F,d as G,i as R,g as j,e as B,f as J,A as k,h as q}from"./utils-CV8PkoAs.js";const W=t=>{let i;const{itemSize:d,horizontal:c=!1}=t;t=A({as:"div"},t);const n=y(t.data.length,d??40,void 0,void 0,!d),l=G(n,c),s=J(n,c),[o,I]=x(n._getStateVersion()),O=n._subscribe(U,()=>{I(n._getStateVersion())}),z=n._subscribe(w,()=>{var e;(e=t.onScroll)==null||e.call(t,n._getScrollOffset())}),C=n._subscribe(H,()=>{var e;(e=t.onScrollEnd)==null||e.call(t)}),S=a(e=>{o();const r=n._getRange();return e&&R(e,r)?e:r}),m=a(()=>o()&&n._getScrollDirection()),h=a(()=>o()&&n._getTotalSize()),L=a(()=>o()&&n._getJumpCount()),v=a(e=>{const r=t.overscan??4,[_,g]=S(),T=j(_,g,r,m(),t.data.length);return e&&R(e,T)?e:T});return D(()=>{t.ref&&t.ref({get scrollOffset(){return n._getScrollOffset()},get scrollSize(){return B(n)},get viewportSize(){return n._getViewportSize()},getItemOffset:n._getItemOffset,scrollToIndex:s._scrollToIndex,scrollTo:s._scrollTo,scrollBy:s._scrollBy});const e=t.scrollRef||i.parentElement;l._observeRoot(e),s._observe(e),N(()=>{t.ref&&t.ref(),O(),z(),C(),l._dispose(),s._dispose()})}),E(f(()=>t.data.length,e=>{e!==n._getItemsLength()&&n._update(k,[e,t.shift])})),E(f(()=>t.startMargin||0,e=>{e!==n._getStartSpacerSize()&&n._update(q,e)})),b(f(L,()=>{s._fixScrollJump()})),b(()=>{const e=S();t.onRangeChange&&t.onRangeChange(e[0],e[1])}),u(V,{get component(){return t.as},ref(e){var r=i;typeof r=="function"?r(e):i=e},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:c?h()+"px":"100%",height:c?"100%":h()+"px","pointer-events":m()!==M?"none":"auto"}},get children(){return u(P,{get _each(){return t.data},get _range(){return v()},_render:(e,r)=>{const _=a(()=>(o(),n._getItemOffset(r))),g=a(()=>(o(),n._isUnmeasuredItem(r)));return u(F,{get _as(){return t.item},_index:r,get _resizer(){return l._observeItem},get _offset(){return _()},get _hide(){return g()},get _children(){return t.children(e(),r)},_isHorizontal:c})}})}})};export{W as V};
