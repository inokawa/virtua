import{m as y,c as D,k as a,o as M,l as U,n as w,a as h,F as k,D as F,p as H,q as b,r as z}from"./iframe-B47CWXcC.js";import{c as P,U as G,a as B,b as q,L as J,d as j,i as K,g as Q,A as W,s as X,e as Y,f as Z}from"./utils-Do70SmI5.js";const te=e=>{let g;const{itemSize:$,horizontal:u=!1,overscan:O,cache:v}=e;e=y({as:"div"},e);const t=P(e.data.length,$,O,void 0,v,!$),S=j(t,u),o=Y(t,u),[i,A]=D(t.$getStateVersion()),R=t.$subscribe(G,()=>{A(t.$getStateVersion())}),C=t.$subscribe(B,()=>{var n;(n=e.onScroll)==null||n.call(e,t.$getScrollOffset())}),V=t.$subscribe(q,()=>{var n;(n=e.onScrollEnd)==null||n.call(e)}),x=a(n=>{i();const r=t.$getRange();return n&&K(n,r)?n:r}),L=a(()=>i()&&t.$isScrolling()),_=a(()=>i()&&t.$getTotalSize());M(()=>{e.ref&&e.ref({get cache(){return t.$getCacheSnapshot()},get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return Q(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:o.$scrollToIndex,scrollTo:o.$scrollTo,scrollBy:o.$scrollBy});const n=e.scrollRef||g.parentElement;S.$observeRoot(n),o.$observe(n),H(()=>{e.ref&&e.ref(),R(),C(),V(),S.$dispose(),o.$dispose()})}),U(b(()=>e.startMargin||0,n=>{n!==t.$getStartSpacerSize()&&t.$update(Z,n)})),w(b(i,()=>{o.$fixScrollJump()}));const I=a(()=>{const n=e.data.length;z(()=>{n!==t.$getItemsLength()&&t.$update(W,[n,e.shift])});const[r,c]=x(),l=c>=0?e.data.slice(r,c+1):[],f=l.map((m,d)=>r+d);if(e.keepMounted){const m=[],d=[],E=[],T=[];X(e.keepMounted).forEach(s=>{s<0||s>=e.data.length||(s<r&&(m.push(e.data[s]),d.push(s)),s>c&&(E.push(e.data[s]),T.push(s)))}),l.unshift(...m),f.unshift(...d),l.push(...E),f.push(...T)}return{_items:l,_indexes:f}}),N=(n,r)=>{const c=a(()=>(i(),t.$getItemOffset(r()))),l=a(()=>(i(),t.$isUnmeasuredItem(r()))),f=a(()=>z(()=>e.children(n,r)));return h(J,{get _as(){return e.item},get _index(){return r()},get _resizer(){return S.$observeItem},get _offset(){return c()},get _hide(){return l()},get _children(){return f()},_isHorizontal:u})};return h(F,{get component(){return e.as},ref(n){var r=g;typeof r=="function"?r(n):g=n},get style(){return{"overflow-anchor":"none",overflow:"clip",flex:"none",position:"relative",visibility:"hidden",width:u?_()+"px":"100%",height:u?"100%":_()+"px","pointer-events":L()?"none":void 0}},get children(){return h(k,{get each(){return I()._items},children:(n,r)=>{const c=a(()=>I()._indexes[r()]);return N(n,c)}})}})};export{te as V};
