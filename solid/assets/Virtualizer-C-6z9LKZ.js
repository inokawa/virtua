import{m as D,c as M,k as a,o as U,l as w,n as y,a as h,F as k,D as F,p as H,q as b,r as z}from"./iframe-CfeK7ZY_.js";import{c as P,U as G,a as B,b as q,L as J,d as j,i as K,g as Q,A as W,s as X,e as Y,f as Z}from"./utils-8tw_DTmz.js";const te=e=>{let d;const{itemSize:$,horizontal:u=!1,overscan:O,cache:A}=e;e=D({as:"div"},e);const t=P(e.data.length,$,O,void 0,A,!$),S=j(t,u),o=Y(t,u),[i,R]=M(t.$getStateVersion()),v=t.$subscribe(G,()=>{R(t.$getStateVersion())}),C=t.$subscribe(B,()=>{var n;(n=e.onScroll)==null||n.call(e,t.$getScrollOffset())}),V=t.$subscribe(q,()=>{var n;(n=e.onScrollEnd)==null||n.call(e)}),x=a(n=>{i();const r=t.$getRange();return n&&K(n,r)?n:r}),L=a(()=>i()&&t.$isScrolling()),_=a(()=>i()&&t.$getTotalSize());U(()=>{e.ref&&e.ref({get cache(){return t.$getCacheSnapshot()},get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return Q(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:o.$scrollToIndex,scrollTo:o.$scrollTo,scrollBy:o.$scrollBy});const n=e.scrollRef||d.parentElement;S.$observeRoot(n),o.$observe(n),H(()=>{e.ref&&e.ref(),v(),C(),V(),S.$dispose(),o.$dispose()})}),w(b(()=>e.startMargin||0,n=>{n!==t.$getStartSpacerSize()&&t.$update(Z,n)})),y(b(i,()=>{o.$fixScrollJump()}));const I=a(()=>{const n=e.data.length;z(()=>{n!==t.$getItemsLength()&&t.$update(W,[n,e.shift])});const[r,c]=x(),l=c>=0?e.data.slice(r,c+1):[],f=l.map((m,g)=>r+g);if(e.keepMounted){const m=[],g=[],E=[],T=[];X(e.keepMounted).forEach(s=>{s<0||s>=e.data.length||(s<r&&(m.push(e.data[s]),g.push(s)),s>c&&(E.push(e.data[s]),T.push(s)))}),l.unshift(...m),f.unshift(...g),l.push(...E),f.push(...T)}return{_items:l,_indexes:f}}),N=(n,r)=>{const c=a(()=>(i(),t.$getItemOffset(r()))),l=a(()=>(i(),t.$isUnmeasuredItem(r()))),f=a(()=>z(()=>e.children(n,r)));return h(J,{get _as(){return e.item},get _index(){return r()},get _resizer(){return S.$observeItem},get _offset(){return c()},get _hide(){return l()},get _children(){return f()},_isHorizontal:u})};return h(F,{get component(){return e.as},ref(n){var r=d;typeof r=="function"?r(n):d=n},get style(){return{contain:"strict","overflow-anchor":"none",overflow:"clip",flex:"none",position:"relative",width:u?_()+"px":"100%",height:u?"100%":_()+"px","pointer-events":L()?"none":void 0}},get children(){return h(k,{get each(){return I()._items},children:(n,r)=>{const c=a(()=>I()._indexes[r()]);return N(n,c)}})}})};export{te as V};
