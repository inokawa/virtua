import{m as A,c as x,h as a,o as D,j as E,k as b,d as f,D as V,l as N,n as u}from"./web-DSIcfvkV.js";import{c as y,U,a as w,b as H,S as M,R as P,L as F,d as G,i as I,g as j,e as B,f as J,A as k,h as q}from"./utils-UYdZ1HKi.js";const W=t=>{let i;const{itemSize:S,horizontal:c=!1}=t;t=A({as:"div"},t);const n=y(t.data.length,S,void 0,void 0,!S),l=G(n,c),s=J(n,c),[o,R]=x(n._getStateVersion()),z=n._subscribe(U,()=>{R(n._getStateVersion())}),O=n._subscribe(w,()=>{var e;(e=t.onScroll)==null||e.call(t,n._getScrollOffset())}),C=n._subscribe(H,()=>{var e;(e=t.onScrollEnd)==null||e.call(t)}),d=a(e=>{o();const r=n._getRange();return e&&I(e,r)?e:r}),m=a(()=>o()&&n._getScrollDirection()),h=a(()=>o()&&n._getTotalSize()),v=a(()=>o()&&n._getJumpCount()),L=a(e=>{const r=t.overscan??4,[_,g]=d(),T=j(_,g,r,m(),t.data.length);return e&&I(e,T)?e:T});return D(()=>{t.ref&&t.ref({get scrollOffset(){return n._getScrollOffset()},get scrollSize(){return B(n)},get viewportSize(){return n._getViewportSize()},getItemOffset:n._getItemOffset,getItemSize:n._getItemSize,scrollToIndex:s._scrollToIndex,scrollTo:s._scrollTo,scrollBy:s._scrollBy});const e=t.scrollRef||i.parentElement;l._observeRoot(e),s._observe(e),N(()=>{t.ref&&t.ref(),z(),O(),C(),l._dispose(),s._dispose()})}),E(u(()=>t.data.length,e=>{e!==n._getItemsLength()&&n._update(k,[e,t.shift])})),E(u(()=>t.startMargin||0,e=>{e!==n._getStartSpacerSize()&&n._update(q,e)})),b(u(v,()=>{s._fixScrollJump()})),b(()=>{const e=d();t.onRangeChange&&t.onRangeChange(e[0],e[1])}),f(V,{get component(){return t.as},ref(e){var r=i;typeof r=="function"?r(e):i=e},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:c?h()+"px":"100%",height:c?"100%":h()+"px","pointer-events":m()!==M?"none":void 0}},get children(){return f(P,{get _each(){return t.data},get _range(){return L()},_render:(e,r)=>{const _=a(()=>(o(),n._getItemOffset(r))),g=a(()=>(o(),n._isUnmeasuredItem(r)));return f(F,{get _as(){return t.item},_index:r,get _resizer(){return l._observeItem},get _offset(){return _()},get _hide(){return g()},get _children(){return t.children(e(),r)},_isHorizontal:c})}})}})};export{W as V};
