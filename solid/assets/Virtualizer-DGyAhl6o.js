import{m as L,c as N,l as o,o as w,n as y,p as D,a as m,q as I,r as E,F as M,D as U,v as F}from"./iframe-Bqc5YeRu.js";import{c as H,a as P,U as k,b as G,d as j,i as B,A as q,s as J,e as K,L as Q,g as W,f as X}from"./utils-pQW3VAbo.js";const p=t=>{let g;const{itemSize:$,horizontal:f=!1,overscan:T,cache:b}=t;t=L({as:"div"},t);const e=H(t.data.length,$,T,void 0,b,!$),S=K(e,f),c=P(e,f),[i,z]=N(e.$getStateVersion()),x=e.$subscribe(k,()=>{z(e.$getStateVersion())}),O=e.$subscribe(G,()=>{t.onScroll?.(e.$getScrollOffset())}),v=e.$subscribe(j,()=>{t.onScrollEnd?.()}),A=o(n=>{i();const r=e.$getRange();return n&&B(n,r)?n:r}),R=o(()=>i()&&e.$isScrolling()),h=o(()=>i()&&e.$getTotalSize());w(()=>{t.ref&&t.ref({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return W(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:c.$scrollToIndex,scrollTo:c.$scrollTo,scrollBy:c.$scrollBy});const n=t.scrollRef||g.parentElement;S.$observeRoot(n),c.$observe(n),F(()=>{t.ref&&t.ref(),x(),O(),v(),S.$dispose(),c.$dispose()})}),y(I(()=>t.startMargin||0,n=>{n!==e.$getStartSpacerSize()&&e.$update(X,n)})),D(I(i,()=>{c.$fixScrollJump()}));const _=o(()=>{const n=t.data.length;E(()=>{n!==e.$getItemsLength()&&e.$update(q,[n,t.shift])});const[r,l]=A(),u=[],d=[];if(t.keepMounted){const a=new Set(t.keepMounted);for(let s=r,V=l;s<=V;s++)a.add(s);J([...a]).forEach(s=>{u.push(t.data[s]),d.push(s)})}else for(let a=r,s=l;a<=s;a++)u.push(t.data[a]),d.push(a);return{_items:u,_indexes:d}}),C=(n,r)=>{const l=o(()=>(i(),e.$getItemOffset(r()))),u=o(()=>(i(),e.$isUnmeasuredItem(r()))),d=o(()=>E(()=>t.children(n,r)));return m(Q,{get _as(){return t.item},get _index(){return r()},get _resizer(){return S.$observeItem},get _offset(){return l()},get _hide(){return u()},get _children(){return d()},_isHorizontal:f})};return m(U,{get component(){return t.as},ref(n){var r=g;typeof r=="function"?r(n):g=n},get style(){return{contain:"size paint style","overflow-anchor":"none",overflow:"clip",flex:"none",position:"relative",width:f?h()+"px":"100%",height:f?"100%":h()+"px","pointer-events":R()?"none":void 0}},get children(){return m(M,{get each(){return _()._items},children:(n,r)=>{const l=o(()=>_()._indexes[r()]);return C(n,l)}})}})};export{p as V};
