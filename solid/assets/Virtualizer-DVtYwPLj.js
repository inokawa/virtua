import{m as v,c as A,h as o,o as C,j as d,k as x,d as _,D as L,l as V,n as f}from"./web-DSIcfvkV.js";import{c as N,U as y,a as D,b as U,R as w,L as H,d as M,i as P,g as F,e as G,A as j,f as B}from"./utils-CwEazH21.js";const q=n=>{let c;const{itemSize:g,horizontal:a=!1,overscan:S}=n;n=v({as:"div"},n);const e=N(n.data.length,g,S,void 0,void 0,!g),l=M(e,a),s=G(e,a),[i,m]=A(e._getStateVersion()),E=e._subscribe(y,()=>{m(e._getStateVersion())}),T=e._subscribe(D,()=>{var t;(t=n.onScroll)==null||t.call(n,e._getScrollOffset())}),I=e._subscribe(U,()=>{var t;(t=n.onScrollEnd)==null||t.call(n)}),b=o(t=>{i();const r=e._getRange();return t&&P(t,r)?t:r}),h=o(()=>i()&&e._isScrolling()),u=o(()=>i()&&e._getTotalSize()),z=o(()=>i()&&e._getJumpCount());return C(()=>{n.ref&&n.ref({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return F(e)},get viewportSize(){return e._getViewportSize()},findStartIndex:e._findStartIndex,findEndIndex:e._findEndIndex,getItemOffset:e._getItemOffset,getItemSize:e._getItemSize,scrollToIndex:s._scrollToIndex,scrollTo:s._scrollTo,scrollBy:s._scrollBy});const t=n.scrollRef||c.parentElement;l._observeRoot(t),s._observe(t),V(()=>{n.ref&&n.ref(),E(),T(),I(),l._dispose(),s._dispose()})}),d(f(()=>n.data.length,t=>{t!==e._getItemsLength()&&e._update(j,[t,n.shift])})),d(f(()=>n.startMargin||0,t=>{t!==e._getStartSpacerSize()&&e._update(B,t)})),x(f(z,()=>{s._fixScrollJump()})),_(L,{get component(){return n.as},ref(t){var r=c;typeof r=="function"?r(t):c=t},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:a?u()+"px":"100%",height:a?"100%":u()+"px","pointer-events":h()?"none":void 0}},get children(){return _(w,{get _each(){return n.data},get _range(){return b()},_render:(t,r)=>{const O=o(()=>(i(),e._getItemOffset(r))),R=o(()=>(i(),e._isUnmeasuredItem(r)));return _(H,{get _as(){return n.item},_index:r,get _resizer(){return l._observeItem},get _offset(){return O()},get _hide(){return R()},get _children(){return n.children(t(),r)},_isHorizontal:a})}})}})};export{q as V};
