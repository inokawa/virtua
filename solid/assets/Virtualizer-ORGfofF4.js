import{m as C,c as V,l as a,o as L,n as N,p as w,a as g,q as _,r as E,F as y,D,v as M}from"./iframe-wg7L6So_.js";import{c as U,a as F,U as H,b as P,d as k,i as G,A as j,s as B,e as q,L as J,g as K,f as Q}from"./utils-BUtCYh2b.js";const Y=t=>{let u;const{itemSize:S,horizontal:f=!1,overscan:I,cache:T}=t;t=C({as:"div"},t);const e=U(t.data.length,S,I,void 0,T,!S),d=q(e,f),c=F(e,f),[l,b]=V(e.$getStateVersion()),z=e.$subscribe(H,()=>{b(e.$getStateVersion())}),x=e.$subscribe(P,()=>{t.onScroll?.(e.$getScrollOffset())}),O=e.$subscribe(k,()=>{t.onScrollEnd?.()}),m=a(n=>{l();const r=e.$getRange();return n&&G(n,r)?n:r}),v=a(()=>l()&&e.$isScrolling()),$=a(()=>l()&&e.$getTotalSize());L(()=>{t.ref&&t.ref({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return K(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:c.$scrollToIndex,scrollTo:c.$scrollTo,scrollBy:c.$scrollBy});const n=t.scrollRef||u.parentElement;d.$observeRoot(n),c.$observe(n),M(()=>{t.ref&&t.ref(),z(),x(),O(),d.$dispose(),c.$dispose()})}),N(_(()=>t.startMargin||0,n=>{n!==e.$getStartSpacerSize()&&e.$update(Q,n)})),w(_(l,()=>{c.$fixScrollJump()}));const h=a(()=>{const n=t.data.length;E(()=>{n!==e.$getItemsLength()&&e.$update(j,[n,t.shift])});const r=[],i=[];if(t.keepMounted){const o=new Set(t.keepMounted);for(let[s,R]=m();s<=R;s++)o.add(s);B([...o]).forEach(s=>{r.push(t.data[s]),i.push(s)})}else for(let[o,s]=m();o<=s;o++)r.push(t.data[o]),i.push(o);return{_items:r,_indexes:i}}),A=(n,r)=>{const i=a(()=>(l(),e.$getItemOffset(r()))),o=a(()=>(l(),e.$isUnmeasuredItem(r()))),s=a(()=>E(()=>t.children(n,r)));return g(J,{get _as(){return t.item},get _index(){return r()},get _resizer(){return d.$observeItem},get _offset(){return i()},get _hide(){return o()},get _children(){return s()},_isHorizontal:f})};return g(D,{get component(){return t.as},ref(n){var r=u;typeof r=="function"?r(n):u=n},get style(){return{contain:"size paint style","overflow-anchor":"none",overflow:"clip",flex:"none",position:"relative",width:f?$()+"px":"100%",height:f?"100%":$()+"px","pointer-events":v()?"none":void 0}},get children(){return g(y,{get each(){return h()._items},children:(n,r)=>{const i=a(()=>h()._indexes[r()]);return A(n,i)}})}})};export{Y as V};
