import{m as D,c as M,l as o,o as U,n as w,p as y,a as h,q as b,r as z,F,D as H,v as P}from"./iframe-CouGoxWk.js";import{c as k,a as G,U as B,b as q,d as J,i as j,A as K,s as Q,e as W,L as X,g as Y,f as Z}from"./utils-B1hQoGD-.js";const te=t=>{let d;const{itemSize:$,horizontal:u=!1,overscan:O,cache:v}=t;t=D({as:"div"},t);const e=k(t.data.length,$,O,void 0,v,!$),S=W(e,u),c=G(e,u),[i,A]=M(e.$getStateVersion()),R=e.$subscribe(B,()=>{A(e.$getStateVersion())}),C=e.$subscribe(q,()=>{t.onScroll?.(e.$getScrollOffset())}),V=e.$subscribe(J,()=>{t.onScrollEnd?.()}),x=o(n=>{i();const r=e.$getRange();return n&&j(n,r)?n:r}),L=o(()=>i()&&e.$isScrolling()),_=o(()=>i()&&e.$getTotalSize());U(()=>{t.ref&&t.ref({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return Y(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:c.$scrollToIndex,scrollTo:c.$scrollTo,scrollBy:c.$scrollBy});const n=t.scrollRef||d.parentElement;S.$observeRoot(n),c.$observe(n),P(()=>{t.ref&&t.ref(),R(),C(),V(),S.$dispose(),c.$dispose()})}),w(b(()=>t.startMargin||0,n=>{n!==e.$getStartSpacerSize()&&e.$update(Z,n)})),y(b(i,()=>{c.$fixScrollJump()}));const I=o(()=>{const n=t.data.length;z(()=>{n!==e.$getItemsLength()&&e.$update(K,[n,t.shift])});const[r,a]=x(),l=a>=0?t.data.slice(r,a+1):[],f=l.map((m,g)=>r+g);if(t.keepMounted){const m=[],g=[],E=[],T=[];Q(t.keepMounted).forEach(s=>{s<0||s>=t.data.length||(s<r&&(m.push(t.data[s]),g.push(s)),s>a&&(E.push(t.data[s]),T.push(s)))}),l.unshift(...m),f.unshift(...g),l.push(...E),f.push(...T)}return{_items:l,_indexes:f}}),N=(n,r)=>{const a=o(()=>(i(),e.$getItemOffset(r()))),l=o(()=>(i(),e.$isUnmeasuredItem(r()))),f=o(()=>z(()=>t.children(n,r)));return h(X,{get _as(){return t.item},get _index(){return r()},get _resizer(){return S.$observeItem},get _offset(){return a()},get _hide(){return l()},get _children(){return f()},_isHorizontal:u})};return h(H,{get component(){return t.as},ref(n){var r=d;typeof r=="function"?r(n):d=n},get style(){return{contain:"strict","overflow-anchor":"none",overflow:"clip",flex:"none",position:"relative",width:u?_()+"px":"100%",height:u?"100%":_()+"px","pointer-events":L()?"none":void 0}},get children(){return h(F,{get each(){return I()._items},children:(n,r)=>{const a=o(()=>I()._indexes[r()]);return N(n,a)}})}})};export{te as V};
