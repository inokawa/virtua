import{m as D,c as M,l as a,o as U,n as w,p as y,a as h,q as b,r as z,F,D as H,v as P}from"./iframe-Cgf65jvk.js";import{c as k,a as G,U as B,b as q,d as J,i as j,A as K,s as Q,e as W,L as X,g as Y,f as Z}from"./utils-B2--14-f.js";const te=e=>{let d;const{itemSize:$,horizontal:u=!1,overscan:O,cache:v}=e;e=D({as:"div"},e);const t=k(e.data.length,$,O,void 0,v,!$),S=W(t,u),o=G(t,u),[i,A]=M(t.$getStateVersion()),R=t.$subscribe(B,()=>{A(t.$getStateVersion())}),C=t.$subscribe(q,()=>{var n;(n=e.onScroll)==null||n.call(e,t.$getScrollOffset())}),V=t.$subscribe(J,()=>{var n;(n=e.onScrollEnd)==null||n.call(e)}),x=a(n=>{i();const r=t.$getRange();return n&&j(n,r)?n:r}),L=a(()=>i()&&t.$isScrolling()),_=a(()=>i()&&t.$getTotalSize());U(()=>{e.ref&&e.ref({get cache(){return t.$getCacheSnapshot()},get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return Y(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:o.$scrollToIndex,scrollTo:o.$scrollTo,scrollBy:o.$scrollBy});const n=e.scrollRef||d.parentElement;S.$observeRoot(n),o.$observe(n),P(()=>{e.ref&&e.ref(),R(),C(),V(),S.$dispose(),o.$dispose()})}),w(b(()=>e.startMargin||0,n=>{n!==t.$getStartSpacerSize()&&t.$update(Z,n)})),y(b(i,()=>{o.$fixScrollJump()}));const I=a(()=>{const n=e.data.length;z(()=>{n!==t.$getItemsLength()&&t.$update(K,[n,e.shift])});const[r,c]=x(),l=c>=0?e.data.slice(r,c+1):[],f=l.map((m,g)=>r+g);if(e.keepMounted){const m=[],g=[],E=[],T=[];Q(e.keepMounted).forEach(s=>{s<0||s>=e.data.length||(s<r&&(m.push(e.data[s]),g.push(s)),s>c&&(E.push(e.data[s]),T.push(s)))}),l.unshift(...m),f.unshift(...g),l.push(...E),f.push(...T)}return{_items:l,_indexes:f}}),N=(n,r)=>{const c=a(()=>(i(),t.$getItemOffset(r()))),l=a(()=>(i(),t.$isUnmeasuredItem(r()))),f=a(()=>z(()=>e.children(n,r)));return h(X,{get _as(){return e.item},get _index(){return r()},get _resizer(){return S.$observeItem},get _offset(){return c()},get _hide(){return l()},get _children(){return f()},_isHorizontal:u})};return h(H,{get component(){return e.as},ref(n){var r=d;typeof r=="function"?r(n):d=n},get style(){return{contain:"strict","overflow-anchor":"none",overflow:"clip",flex:"none",position:"relative",width:u?_()+"px":"100%",height:u?"100%":_()+"px","pointer-events":L()?"none":void 0}},get children(){return h(F,{get each(){return I()._items},children:(n,r)=>{const c=a(()=>I()._indexes[r()]);return N(n,c)}})}})};export{te as V};
