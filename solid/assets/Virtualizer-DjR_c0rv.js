import{m as O,c as R,h as o,o as v,j as u,k as A,d as f,D as x,l as V,n as g}from"./web-DSIcfvkV.js";import{c as C,U as L,a as N,b as y,R as D,L as U,d as w,i as H,g as M,e as P,A as F,f as G}from"./utils-EGZ2cTVs.js";const k=r=>{let l;const{itemSize:d,horizontal:a=!1,overscan:$}=r;r=O({as:"div"},r);const e=C(r.data.length,d,$,void 0,void 0,!d),c=w(e,a),s=P(e,a),[i,m]=R(e.$getStateVersion()),_=e.$subscribe(L,()=>{m(e.$getStateVersion())}),E=e.$subscribe(N,()=>{var t;(t=r.onScroll)==null||t.call(r,e.$getScrollOffset())}),T=e.$subscribe(y,()=>{var t;(t=r.onScrollEnd)==null||t.call(r)}),I=o(t=>{i();const n=e.$getRange();return t&&H(t,n)?t:n}),b=o(()=>i()&&e.$isScrolling()),S=o(()=>i()&&e.$getTotalSize());return v(()=>{r.ref&&r.ref({get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return M(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:s.$scrollToIndex,scrollTo:s.$scrollTo,scrollBy:s.$scrollBy});const t=r.scrollRef||l.parentElement;c.$observeRoot(t),s.$observe(t),V(()=>{r.ref&&r.ref(),_(),E(),T(),c.$dispose(),s.$dispose()})}),u(g(()=>r.data.length,t=>{t!==e.$getItemsLength()&&e.$update(F,[t,r.shift])})),u(g(()=>r.startMargin||0,t=>{t!==e.$getStartSpacerSize()&&e.$update(G,t)})),A(g(i,()=>{s.$fixScrollJump()})),f(x,{get component(){return r.as},ref(t){var n=l;typeof n=="function"?n(t):l=t},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:a?S()+"px":"100%",height:a?"100%":S()+"px","pointer-events":b()?"none":void 0}},get children(){return f(D,{get _each(){return r.data},get _range(){return I()},_render:(t,n)=>{const h=o(()=>(i(),e.$getItemOffset(n))),z=o(()=>(i(),e.$isUnmeasuredItem(n)));return f(U,{get _as(){return r.item},_index:n,get _resizer(){return c.$observeItem},get _offset(){return h()},get _hide(){return z()},get _children(){return r.children(t(),n)},_isHorizontal:a})}})}})};export{k as V};
