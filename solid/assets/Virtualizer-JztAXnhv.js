import{m as N,c as y,n as c,o as D,p as b,q as M,d as m,F as U,D as w,v as F,w as h,x as H}from"./web-DhmGWsUx.js";import{c as P,U as k,a as G,b as B,L as q,d as J,i as j,g as K,s as Q,e as W,A as X,f as Y}from"./utils-LTnZqBb3.js";const ee=t=>{let g;const{itemSize:$,horizontal:l=!1,overscan:z,cache:O}=t;t=N({as:"div"},t);const n=P(t.data.length,$,z,void 0,O,!$),S=J(n,l),i=W(n,l),[o,v]=y(n.$getStateVersion()),A=n.$subscribe(k,()=>{v(n.$getStateVersion())}),R=n.$subscribe(G,()=>{var e;(e=t.onScroll)==null||e.call(t,n.$getScrollOffset())}),x=n.$subscribe(B,()=>{var e;(e=t.onScrollEnd)==null||e.call(t)}),C=c(e=>{o();const r=n.$getRange();return e&&j(e,r)?e:r}),V=c(()=>o()&&n.$isScrolling()),_=c(()=>o()&&n.$getTotalSize());D(()=>{t.ref&&t.ref({get cache(){return n.$getCacheSnapshot()},get scrollOffset(){return n.$getScrollOffset()},get scrollSize(){return K(n)},get viewportSize(){return n.$getViewportSize()},findStartIndex:n.$findStartIndex,findEndIndex:n.$findEndIndex,getItemOffset:n.$getItemOffset,getItemSize:n.$getItemSize,scrollToIndex:i.$scrollToIndex,scrollTo:i.$scrollTo,scrollBy:i.$scrollBy});const e=t.scrollRef||g.parentElement;S.$observeRoot(e),i.$observe(e),F(()=>{t.ref&&t.ref(),A(),R(),x(),S.$dispose(),i.$dispose()})}),b(h(()=>t.data.length,e=>{e!==n.$getItemsLength()&&n.$update(X,[e,t.shift])})),b(h(()=>t.startMargin||0,e=>{e!==n.$getStartSpacerSize()&&n.$update(Y,e)})),M(h(o,()=>{i.$fixScrollJump()}));const I=c(()=>{const[e,r]=C(),s=r>=0?t.data.slice(e,r+1):[],f=s.map((u,d)=>e+d);if(t.keepMounted){const u=[],d=[],E=[],T=[];Q(t.keepMounted).forEach(a=>{a<0||a>=t.data.length||(a<e&&(u.push(t.data[a]),d.push(a)),a>r&&(E.push(t.data[a]),T.push(a)))}),s.unshift(...u),f.unshift(...d),s.push(...E),f.push(...T)}return{_items:s,_indexes:f}}),L=(e,r)=>{const s=c(()=>(o(),n.$getItemOffset(r()))),f=c(()=>(o(),n.$isUnmeasuredItem(r()))),u=c(()=>H(()=>t.children(e,r)));return m(q,{get _as(){return t.item},get _index(){return r()},get _resizer(){return S.$observeItem},get _offset(){return s()},get _hide(){return f()},get _children(){return u()},_isHorizontal:l})};return m(w,{get component(){return t.as},ref(e){var r=g;typeof r=="function"?r(e):g=e},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:l?_()+"px":"100%",height:l?"100%":_()+"px","pointer-events":V()?"none":void 0}},get children(){return m(U,{get each(){return I()._items},children:(e,r)=>{const s=c(()=>I()._indexes[r()]);return L(e,s)}})}})};export{ee as V};
