import{j as O}from"./jsx-runtime-D_zvdyIk.js";import{r as L}from"./iframe-DyuHUQ_l.js";import{r as ge}from"./index-DakkSod0.js";const J=null,{min:D,max:j,abs:oe,floor:xe}=Math,ie=(e,t,r)=>D(r,j(t,e)),ue=e=>[...e].sort(((t,r)=>t-r)),ce=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},Q=()=>{let e;return[new Promise((t=>{e=t})),e]},te=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},F=-1,U=(e,t,r)=>{const n=r?"unshift":"push";for(let l=0;l<t;l++)e[n](F);return e},G=(e,t)=>{const r=e.t[t];return r===F?e.o:r},we=(e,t,r)=>{const n=e.t[t]===F;return e.t[t]=r,e.i=D(t,e.i),n},Z=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let r=e.i,n=e.u[r];for(;r<t;)n+=G(e,r),e.u[++r]=n;return e.i=t,n},q=(e,t,r=0,n=e.l-1)=>{for(;r<=n;){const l=xe((r+n)/2),u=Z(e,l);if(u<=t){if(u+G(e,l)>t)return l;r=l+1}else n=l-1}return ie(r,0,e.l-1)},se=(e,t,r)=>{const n=t-e.l;return e.i=r?-1:D(t-1,e.i),e.l=t,n>0?(U(e.u,n),U(e.t,n,r),e.o*n):(e.u.splice(n),(r?e.t.splice(0,-n):e.t.splice(n)).reduce(((l,u)=>l-(u===F?e.o:u)),0))},ae=typeof window<"u",fe=()=>document.documentElement,be=e=>e.ownerDocument,ke=e=>e.defaultView,de=te((()=>!!ae&&getComputedStyle(fe()).direction==="rtl")),he=te((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),Ee=te((()=>"scrollBehavior"in fe().style)),Re=e=>j(e.h(),e.p()),Se=e=>!!e.p(),Te=(e,t=40,r=4,n=0,l,u=!1)=>{let f=!!n,y=1,c=0,o=0,h=0,k=0,m=0,v=0,x=0,R=0,S=f?[0,j(n-1,0)]:J,w=[0,0],T=0;const b=((s,a,E)=>({o:E?E[1]:a,t:E&&E[0]?U(E[0].slice(0,D(s,E[0].length)),j(0,s-E[0].length)):U([],s),l:s,i:-1,u:U([],s)}))(e,t,l),H=new Set,P=()=>h-o,p=()=>P()+m+k,V=s=>((a,E,z,g)=>{if(g=D(g,a.l-1),Z(a,g)<=E){const I=q(a,E+z,g);return[q(a,E,g,I),I]}{const I=q(a,E,void 0,g);return[I,q(a,E+z,I)]}})(b,s,c,w[0]),C=()=>(s=>s.l?Z(s,s.l-1)+G(s,s.l-1):0)(b),W=s=>Z(b,s)-m,X=s=>G(b,s),Y=s=>{s&&(he()&&x!==0||S&&R===1?m+=s:k+=s)};return{v:()=>y,m:()=>(s=>[s.t.slice(),s.o])(b),_:()=>{let s,a;return v?[s,a]=w:([s,a]=w=V(j(0,p())),S&&(s=D(s,S[0]),a=j(a,S[1]))),x!==1&&(s-=j(0,r)),x!==2&&(a+=j(0,r)),[j(s,0),D(a,b.l-1)]},S:()=>q(b,p()),$:()=>q(b,p()+c),I:s=>b.t[s]===F,k:W,R:X,T:()=>b.l,C:()=>h,M:()=>x!==0,p:()=>c,H:()=>o,h:C,W:()=>(v=k,k=0,[v,R===2]),O:(s,a)=>{const E=[s,a];return H.add(E),()=>{H.delete(E)}},B:(s,a)=>{let E,z,g=0;switch(s){case 1:{const I=v;v=0;const i=a-h,d=oe(i);I&&d<oe(I)+1||R!==0||(x=i<0?2:1),f&&(S=J,f=!1),h=a,g=4;const B=P();B>=-c&&B<=C()&&(g+=1,z=d>c);break}case 2:g=8,x!==0&&(E=!0,g+=1),x=0,R=0,S=J;break;case 3:{const I=a.filter((([i,d])=>b.t[i]!==d));if(!I.length)break;Y(I.reduce(((i,[d,B])=>((R===2||(S&&R===1?d<S[0]:W(d)+(x===0&&R===0?X(d):0)<P()))&&(i+=B-X(d)),i)),0));for(const[i,d]of I){const B=X(i),_=we(b,i,d);u&&(T+=_?d:d-B)}u&&c&&T>c&&(Y(((i,d)=>{let B=0;const _=[];i.t.forEach(((ne,ye)=>{ne!==F&&(_.push(ne),ye<d&&B++)})),i.i=-1;const A=ue(_),re=A.length,N=re/2|0,me=re%2==0?(A[N-1]+A[N])/2:A[N],ve=i.o;return((i.o=me)-ve)*j(d-B,0)})(b,q(b,p()))),u=!1),g=3,z=!0;break}case 4:c!==a&&(c=a,g=3);break;case 5:a[1]?(Y(se(b,a[0],!0)),R=2,g=1):(se(b,a[0]),g=1);break;case 6:o=a;break;case 7:R=1;break;case 8:S=V(a),g=1}g&&(y=1+(2147483647&y),E&&m&&(k+=m,m=0),H.forEach((([I,i])=>{g&I&&i(z)})))}}},ee=setTimeout,$=(e,t)=>t&&de()?-e:e,Ie=(e,t,r,n,l,u)=>{const f=Date.now;let y=0,c=!1,o=!1,h=!1,k=!1;const m=(()=>{let w;const T=()=>{w!=J&&clearTimeout(w)},b=()=>{T(),w=ee((()=>{w=J,(()=>{if(c||o)return c=!1,void m();h=!1,e.B(2)})()}),150)};return b.J=T,b})(),v=()=>{y=f(),h&&(k=!0),e.B(1,n()),m()},x=w=>{if(c||!e.M()||w.ctrlKey)return;const T=f()-y;150>T&&50<T&&(r?w.deltaX:w.deltaY)&&(c=!0)},R=()=>{o=!0,h=k=!1},S=()=>{o=!1,he()&&(h=!0)};return t.addEventListener("scroll",v),t.addEventListener("wheel",x,{passive:!0}),t.addEventListener("touchstart",R,{passive:!0}),t.addEventListener("touchend",S,{passive:!0}),{A:()=>{t.removeEventListener("scroll",v),t.removeEventListener("wheel",x),t.removeEventListener("touchstart",R),t.removeEventListener("touchend",S),m.J()},L:()=>{const[w,T]=e.W();w&&(l($(w,r),T,k),k=!1,T&&e.p()>e.h()&&e.B(1,n()))}}},Le=(e,t)=>{let r,n,l,u=Q();const f=t?"scrollLeft":"scrollTop",y=t?"overflowX":"overflowY",c=async(o,h)=>{if(!await u[0])return;l&&l();const k=()=>{const[m,v]=Q();return l=()=>{v(!1)},Se(e)&&ee(l,150),[m,e.O(2,(()=>{v(!0)}))]};if(h&&Ee())e.B(8,o()),ce((async()=>{for(;;){let m=!1;for(let[R,S]=e._();R<=S;R++)if(e.I(R)){m=!0;break}if(!m)break;const[v,x]=k();try{if(!await v)return}finally{x()}}e.B(7),r.scrollTo({[t?"left":"top"]:$(o(),t),behavior:"smooth"})}));else for(;;){const[m,v]=k();try{if(e.B(7),r[f]=$(o(),t),!await m)return}finally{v()}}};return{D(o){r=o,n=Ie(e,o,t,(()=>$(o[f],t)),((h,k,m)=>{if(m){const v=o.style,x=v[y];v[y]="hidden",ee((()=>{v[y]=x}))}o[f]=e.C()+h,k&&l&&l()})),u[1](!0)},P(){n&&n.A(),u[1](!1),u=Q()},V(o){c((()=>o))},X(o){o+=e.C(),c((()=>o))},Y(o,{align:h,smooth:k,offset:m=0}={}){if(o=ie(o,0,e.T()-1),h==="nearest"){const v=e.k(o),x=e.C();if(v<x)h="start";else{if(!(v+e.R(o)>x+e.p()))return;h="end"}}c((()=>m+e.H()+e.k(o)+(h==="end"?e.R(o)-e.p():h==="center"?(e.R(o)-e.p())/2:0)),k)},j:()=>{n&&n.L()}}},Be=e=>{let t;return{q(r){(t||(t=new(ke(be(r))).ResizeObserver(e))).observe(r)},G(r){t.unobserve(r)},A(){t&&t.disconnect()}}},Me=(e,t)=>{let r;const n=t?"width":"height",l=new WeakMap,u=Be((f=>{const y=[];for(const{target:c,contentRect:o}of f)if(c.offsetParent)if(c===r)e.B(4,o[n]);else{const h=l.get(c);h!=J&&y.push([h,o[n]])}y.length&&e.B(3,y)}));return{U(f){u.q(r=f)},F:(f,y)=>(l.set(f,y),u.q(f),()=>{l.delete(f),u.G(f)}),P:u.A}},K=ae?L.useLayoutEffect:L.useEffect,M="current",pe=(e,t)=>{if(Array.isArray(e))for(const r of e)pe(r,t);else e==null||typeof e=="boolean"||t.push(e)},je=(e,t)=>{const r=e.key;return r??"_"+t},Ce=e=>{const t=L.useRef(null);return t[M]||(t[M]=e())},le=e=>{const t=L.useRef(e);return K((()=>{t[M]=e}),[e]),t},ze=L.memo((({Z:e,ee:t,te:r,oe:n,ne:l,re:u,ie:f,se:y})=>{const c=L.useRef(null);K((()=>t(c[M],r)),[r]);const o=L.useMemo((()=>{const h={contain:"layout style",position:l&&y?void 0:"absolute",[f?"height":"width"]:"100%",[f?"top":"left"]:0,[f?de()?"right":"left":"top"]:n,visibility:!l||y?"visible":"hidden"};return f&&(h.display="inline-flex"),h}),[n,l,y,f]);return O.jsx(u,typeof u=="string"?{ref:c,style:o,children:e}:{ref:c,style:o,index:r,children:e})})),Ae=(e,t)=>L.useMemo((()=>{if(typeof e=="function")return[e,t||0];const r=(n=>{const l=[];return pe(n,l),l})(e);return[n=>r[n],r.length]}),[e,t]),Oe=L.forwardRef((({children:e,count:t,overscan:r,itemSize:n,shift:l,horizontal:u,keepMounted:f,cache:y,startMargin:c=0,ssrCount:o,as:h="div",item:k="div",scrollRef:m,onScroll:v,onScrollEnd:x},R)=>{const[S,w]=Ae(e,t),T=L.useRef(null),b=L.useRef(!!o),H=le(v),P=le(x),[p,V,C,W]=Ce((()=>{const i=!!u,d=Te(w,n,r,o,y,!n);return[d,Me(d,i),Le(d,i),i]}));w!==p.T()&&p.B(5,[w,l]),c!==p.H()&&p.B(6,c);const[X,Y]=L.useReducer(p.v,void 0,p.v),[s,a]=p._(),E=p.M(),z=p.h(),g=[],I=i=>{const d=S(i);return O.jsx(ze,{ee:V.F,te:i,oe:p.k(i),ne:p.I(i),re:k,Z:d,ie:W,se:b[M]},je(d,i))};K((()=>{b[M]=!1;const i=p.O(1,(A=>{A?ge.flushSync(Y):Y()})),d=p.O(4,(()=>{H[M]&&H[M](p.C())})),B=p.O(8,(()=>{P[M]&&P[M]()})),_=A=>{V.U(A),C.D(A)};return m?ce((()=>{m[M]&&_(m[M])})):_(T[M].parentElement),()=>{i(),d(),B(),V.P(),C.P()}}),[]),K((()=>{C.j()}),[X]),L.useImperativeHandle(R,(()=>({get cache(){return p.m()},get scrollOffset(){return p.C()},get scrollSize(){return Re(p)},get viewportSize(){return p.p()},findStartIndex:p.S,findEndIndex:p.$,getItemOffset:p.k,getItemSize:p.R,scrollToIndex:C.Y,scrollTo:C.V,scrollBy:C.X})),[]);for(let i=s,d=a;i<=d;i++)g.push(I(i));if(f){const i=[],d=[];ue(f).forEach((B=>{B<s&&i.push(I(B)),B>a&&d.push(I(B))})),g.unshift(...i),g.push(...d)}return O.jsx(h,{ref:T,style:{contain:"strict",overflowAnchor:"none",overflow:"clip",flex:"none",position:"relative",width:W?z:"100%",height:W?"100%":z,pointerEvents:E?"none":void 0},children:g})})),_e=L.forwardRef((({children:e,count:t,overscan:r,itemSize:n,shift:l,horizontal:u,keepMounted:f,reverse:y,cache:c,ssrCount:o,item:h,onScroll:k,onScrollEnd:m,style:v,...x},R)=>{const S=L.useRef(null),w=y&&!u;let T=O.jsx(Oe,{ref:R,scrollRef:w?S:void 0,count:t,overscan:r,itemSize:n,shift:l,horizontal:u,keepMounted:f,cache:c,ssrCount:o,item:h,onScroll:k,onScrollEnd:m,children:e});return w&&(T=O.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:T})),O.jsx("div",{ref:S,...x,style:{display:u?"inline-block":"block",[u?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...v},children:T})})),qe=L.memo(({count:e,Component:t,handle:r})=>{const n=L.useRef(null);return L.useImperativeHandle(r,()=>({scrollToIndex:l=>{n.current?.scrollToIndex(l)}})),O.jsx(_e,{ref:n,children:Array.from({length:e}).map((l,u)=>O.jsx(t,{index:u},u))})});qe.__docgenInfo={description:"",methods:[{name:"scrollToIndex",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null}],returns:null}],displayName:"VirtuaList",props:{count:{required:!0,tsType:{name:"number"},description:""},Component:{required:!0,tsType:{name:"SimpleItem"},description:""},handle:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:"{ scrollToIndex: (index: number) => void }",signature:{properties:[{key:"scrollToIndex",value:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<ListHandle>"},description:""}}};export{qe as V};
