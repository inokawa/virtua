import{r as G}from"./iframe-B_-wC5Mi.js";const J=null,{min:N,max:z,abs:ae,floor:we}=Math,ne=(e,t,s)=>N(s,z(t,e)),Ce=e=>[...e].sort((t,s)=>t-s),Se=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},K=()=>{let e;return[new Promise(s=>{e=s}),e]},oe=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},D=-1,P=(e,t,s)=>{const o=s?"unshift":"push";for(let r=0;r<t;r++)e[o](D);return e},ge=(e,t)=>{const s=e._sizes[t];return s===D?e._defaultItemSize:s},ye=(e,t,s)=>{const o=e._sizes[t]===D;return e._sizes[t]=s,e._computedOffsetIndex=N(t,e._computedOffsetIndex),o},q=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=ge(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},M=(e,t,s=0,o=e._length-1)=>{let r=s;for(;s<=o;){const c=we((s+o)/2);q(e,c)<=t?(r=c,s=c+1):o=c-1}return ne(r,0,e._length-1)},Ae=(e,t,s,o)=>{if(o=N(o,e._length-1),q(e,o)<=t){const r=M(e,s,o);return[M(e,t,o,r),r]}else{const r=M(e,t,void 0,o);return[r,M(e,s,r)]}},ke=(e,t)=>{let s=0;const o=[];e._sizes.forEach((n,i)=>{n!==D&&(o.push(n),i<t&&s++)}),e._computedOffsetIndex=-1;const r=Ce(o),c=r.length,d=c/2|0,f=c%2===0?(r[d-1]+r[d])/2:r[d],l=e._defaultItemSize;return((e._defaultItemSize=f)-l)*z(t-s,0)},Ne=(e,t,s)=>({_defaultItemSize:t,_sizes:s?P(s.slice(0,N(e,s.length)),z(0,e-s.length)):P([],e),_length:e,_computedOffsetIndex:-1,_offsets:P([],e+1)}),Ve=e=>[e._sizes.slice(),e._defaultItemSize],me=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:N(t-1,e._computedOffsetIndex),e._length=t,o>0?(P(e._offsets,o),P(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((r,c)=>r-(c===D?e._defaultItemSize:c),0))},Ie=typeof window<"u",Oe=()=>document.documentElement,x=e=>e.ownerDocument,U=e=>e.defaultView,be=oe(()=>Ie?getComputedStyle(Oe()).direction==="rtl":!1),ze=oe(()=>/iP(hone|od|ad)/.test(navigator.userAgent)?!0:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>0),Me=oe(()=>"scrollBehavior"in Oe().style),Je=2147483647,V=0,_e=1,$e=2,W=0,j=1,Q=2,H=1,Ee=2,A=3,B=4,De=5,Le=6,ee=7,ve=8,y=1,te=2,We=4,Pe=8,Be=e=>z(e.$getTotalSize(),e.$getViewportSize()),Fe=(e,t=40,s=0,o,r=!1)=>{let c=!!s,d=1,f=0,l=0,n=0,i=0,u=0,_=0,m=V,a=W,$=J,g=[0,c?z(s-1,0):-1],O=0,v=!1;const I=Ne(e,o?o[1]:t,o&&o[0]),R=new Set,h=()=>n-l,ie=()=>h()+u+i,ce=(S,p)=>Ae(I,S,p,g[0]),fe=()=>q(I,I._length),ue=S=>q(I,S)-u,X=S=>ge(I,S),de=(S,p=D)=>I._sizes[S]===p,Z=S=>{S&&(ze()&&m!==V||$&&a===j?u+=S:i+=S)};return{$dispose:()=>{R.clear()},$getStateVersion:()=>d,$getCacheSnapshot:()=>Ve(I),$getRange:(S=200)=>{if(!v||c)return g;let p,T;if(_)[p,T]=g;else{let w=z(0,ie()),b=w+f;r||(S=z(0,S),m!==_e&&(w-=S),m!==$e&&(b+=S)),[p,T]=g=ce(z(0,w),z(0,b)),$&&(p=N(p,$[0]),T=z(T,$[1]))}return[z(p,0),N(T,I._length-1)]},$findItemIndex:S=>M(I,S-l),$isUnmeasuredItem:de,$getItemOffset:ue,$getItemSize:X,$getItemsLength:()=>I._length,$getScrollOffset:()=>n,$isScrolling:()=>m!==V,$getViewportSize:()=>f,$getStartSpacerSize:()=>l,$getTotalSize:fe,_flushJump:()=>(_=i,i=0,[_,a===Q]),$subscribe:(S,p)=>{const T=[S,p];return R.add(T),()=>{R.delete(T)}},$update:(S,p)=>{let T,w,b=0;switch(S){case H:{if(p===n&&a===W)break;const C=_;_=0;const E=p-n,L=ae(E);!(C&&L<ae(C)+1)&&a===W&&(m=E<0?$e:_e),c&&(c=!1),n=p,b=We;const Y=h();Y>=-f&&Y<=fe()&&(b+=y,w=L>f);break}case Ee:{b=Pe,m!==V&&(T=!0,b+=y),m=V,a=W,$=J;break}case A:{const C=p.filter(([E,L])=>!de(E,L));if(!C.length)break;Z(C.reduce((E,[L,F])=>((a===Q||($&&a===j?L<$[0]:ue(L+(m===V&&a===W?1:0))<h()))&&(E+=F-X(L)),E),0));for(const[E,L]of C){const F=X(E),Y=ye(I,E,L);r&&(O+=Y?L:L-F)}r&&f&&O>f&&(Z(ke(I,M(I,ie()))),r=!1),b=y+te,w=!0;break}case B:{f!==p&&(f||(v=w=!0),f=p,b=y+te);break}case De:{p[1]?(Z(me(I,p[0],!0)),a=Q,b=y):(me(I,p[0]),b=y);break}case Le:{l=p;break}case ee:{a=j;break}case ve:{$=ce(p,p+f),b=y;break}}b&&(d=(d&Je)+1,T&&u&&(i+=u,u=0),R.forEach(([C,E])=>{b&C&&E(w)}))}}},re=setTimeout,xe=(e,t)=>{let s;const o=()=>{s!=J&&clearTimeout(s)},r=()=>{o(),s=re(()=>{s=J,e()},t)};return r._cancel=o,r},k=(e,t)=>t&&be()?-e:e,Te=(e,t,s,o,r,c)=>{const d=Date.now;let f=0,l=!1,n=!1,i=!1,u=!1;const _=xe(()=>{if(l||n){l=!1,_();return}i=!1,e.$update(Ee)},150),m=()=>{f=d(),i&&(u=!0),c&&e.$update(Le,c()),e.$update(H,o()),_()},a=(O=>{if(l||!e.$isScrolling()||O.ctrlKey)return;const v=d()-f;150>v&&50<v&&(s?O.deltaX:O.deltaY)&&(l=!0)}),$=()=>{n=!0,i=u=!1},g=()=>{n=!1,ze()&&(i=!0)};return t.addEventListener("scroll",m),t.addEventListener("wheel",a,{passive:!0}),t.addEventListener("touchstart",$,{passive:!0}),t.addEventListener("touchend",g,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",m),t.removeEventListener("wheel",a),t.removeEventListener("touchstart",$),t.removeEventListener("touchend",g),_._cancel()},_fixScrollJump:()=>{const[O,v]=e._flushJump();O&&(r(O,v,u),u=!1,v&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(H,o()))}}},Re=(e,t,s)=>{let o;return[async(r,c)=>{if(!await t())return;o&&o();const d=()=>{const[f,l]=K();return o=()=>{l(!1)},e.$getViewportSize()&&re(o,150),[f,e.$subscribe(te,()=>{l(!0)})]};if(c&&Me())e.$update(ve,r()),Se(async()=>{for(;;){let f=!0;for(let[i,u]=e.$getRange();i<=u;i++)if(e.$isUnmeasuredItem(i)){f=!1;break}if(f)break;const[l,n]=d();try{if(!await l)return}finally{n()}}e.$update(ee),s(r(),c)});else for(;;){const[f,l]=d();try{if(e.$update(ee),s(r()),!await f)return}finally{l()}}},()=>{o&&o()}]},pe=(e,t)=>{let s,o,r=K();const c=t?"scrollLeft":"scrollTop",d=t?"overflowX":"overflowY",[f,l]=Re(e,()=>r[0],(n,i)=>{n=k(n,t),i?s.scrollTo({[t?"left":"top"]:n,behavior:"smooth"}):s[c]=n});return{$observe(n){s=n,o=Te(e,n,t,()=>k(n[c],t),(i,u,_)=>{if(_){const m=n.style,a=m[d];m[d]="hidden",re(()=>{m[d]=a})}n[c]=k(e.$getScrollOffset()+i,t),u&&l()}),r[1](!0)},$dispose(){o&&o._dispose(),r[1](!1),r=K()},$scrollTo(n){f(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),f(()=>n)},$scrollToIndex(n,{align:i,smooth:u,offset:_=0}={}){if(n=ne(n,0,e.$getItemsLength()-1),i==="nearest"){const m=e.$getItemOffset(n),a=e.$getScrollOffset();if(m<a)i="start";else if(m+e.$getItemSize(n)>a+e.$getViewportSize())i="end";else return}f(()=>_+e.$getStartSpacerSize()+e.$getItemOffset(n)+(i==="end"?e.$getItemSize(n)-e.$getViewportSize():i==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),u)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Ye=(e,t)=>{let s,o,r=K();const c=t?"left":"top",[d]=Re(e,()=>r[0],(l,n)=>{l=k(l,t);const i=U(x(s));n?i.scroll({[c]:l,behavior:"smooth"}):i.scroll({[c]:l})}),f=(l,n,i,u,_=0)=>{const m=u?"offsetLeft":"offsetTop",a=_+(u&&be()?i.innerWidth-l[m]-l.offsetWidth:l[m]),$=l.offsetParent;return l===n||!$?a:f($,n,i,u,a)};return{$observe(l){s=l;const n=t?"scrollX":"scrollY",i=x(l),u=U(i);o=Te(e,u,t,()=>k(u[n],t),(_,m)=>{m?u.scroll({[c]:k(e.$getScrollOffset()+_,t)}):u.scrollBy({[c]:k(_,t)})},()=>f(l,i.body,u,t)),r[1](!0)},$dispose(){o&&o._dispose(),s=void 0,r[1](!1),r=K()},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(l,{align:n,smooth:i,offset:u=0}={}){if(!s)return;if(l=ne(l,0,e.$getItemsLength()-1),n==="nearest"){const g=e.$getItemOffset(l),O=e.$getScrollOffset();if(g<O)n="start";else if(g+e.$getItemSize(l)>O+e.$getViewportSize())n="end";else return}const _=x(s),m=U(_),a=_.documentElement,$=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);d(()=>u+f(s,_.body,m,t)+e.$getItemOffset(l)+(n==="end"?e.$getItemSize(l)-(e.$getViewportSize()-$()):n==="center"?(e.$getItemSize(l)-(e.$getViewportSize()-$()))/2:0),i)}}},Ge=(e,t)=>{const s=pe(e,!1),o=pe(t,!0);return{$observe(r){s.$observe(r),o.$observe(r)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(r,c){r!=null&&s.$scrollTo(r),c!=null&&o.$scrollTo(c)},$scrollBy(r,c){r!=null&&s.$scrollBy(r),c!=null&&o.$scrollBy(c)},$scrollToIndex(r,c){r!=null&&s.$scrollToIndex(r),c!=null&&o.$scrollToIndex(c)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},le=e=>{let t;return{_observe(s){(t||(t=new(U(x(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},qe=(e,t)=>{let s;const o=t?"width":"height",r=new WeakMap,c=le(d=>{const f=[];for(const{target:l,contentRect:n}of d)if(l.offsetParent)if(l===s)e.$update(B,n[o]);else{const i=r.get(l);i!=J&&f.push([i,n[o]])}f.length&&e.$update(A,f)});return{$observeRoot(d){c._observe(s=d)},$observeItem:(d,f)=>(r.set(d,f),c._observe(d),()=>{r.delete(d),c._unobserve(d)}),$dispose:c._dispose}},Xe=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,c=le(f=>{const l=[];for(const{target:n,contentRect:i}of f){if(!n.offsetParent)continue;const u=r.get(n);u!=J&&l.push([u,i[s]])}l.length&&e.$update(A,l)});let d;return{$observeRoot(f){const l=U(x(f)),n=()=>{e.$update(B,l[o])};l.addEventListener("resize",n),Se(n),d=()=>{l.removeEventListener("resize",n)}},$observeItem:(f,l)=>(r.set(f,l),c._observe(f),()=>{r.delete(f),c._unobserve(f)}),$dispose(){d&&d(),c._dispose()}}},Ze=(e,t)=>{let s;const o=new WeakMap,r=new Set,c=new Set,d=new Map,f=(n,i)=>`${n}-${i}`,l=le(n=>{const i=new Set,u=new Set;for(const{target:_,contentRect:{width:m,height:a}}of n)if(_.offsetParent)if(_===s)e.$update(B,a),t.$update(B,m);else{const $=o.get(_);if($){const[g,O]=$,v=f(g,O),I=d.get(v);let R,h;I?(I[0]!==a&&(R=!0),I[1]!==m&&(h=!0)):R=h=!0,R&&i.add(g),h&&u.add(O),(R||h)&&d.set(v,[a,m])}}if(i.size){const _=[];i.forEach(m=>{let a=0;c.forEach($=>{const g=d.get(f(m,$));g&&(a=z(a,g[0]))}),a&&_.push([m,a])}),e.$update(A,_)}if(u.size){const _=[];u.forEach(m=>{let a=0;r.forEach($=>{const g=d.get(f($,m));g&&(a=z(a,g[1]))}),a&&_.push([m,a])}),t.$update(A,_)}});return{$observeRoot(n){l._observe(s=n)},$observeItem(n,i,u){return o.set(n,[i,u]),r.add(i),c.add(u),l._observe(n),()=>{o.delete(n),l._unobserve(n)}},$resizeCols(n){for(const[i]of n)for(let u=0;u<e.$getItemsLength();u++)d.delete(f(u,i));t.$update(A,n)},$resizeRows(n){for(const[i]of n)for(let u=0;u<t.$getItemsLength();u++)d.delete(f(i,u));e.$update(A,n)},$dispose:l._dispose}},Ue=Ie?G.useLayoutEffect:G.useEffect,se="current",he=(e,t)=>{if(Array.isArray(e))for(const s of e)he(s,t);else e==null||typeof e=="boolean"||t.push(e)},je=e=>{const t=[];return he(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},He=e=>{const t=G.useRef(null);return t[se]||(t[se]=e())},et=e=>{const t=G.useRef(e);return Ue(()=>{t[se]=e},[e]),t};export{De as A,y as U,He as a,Le as b,Ue as c,We as d,Pe as e,Fe as f,Be as g,qe as h,pe as i,Qe as j,Xe as k,Ye as l,Se as m,be as n,je as o,Ze as p,Ge as q,se as r,Ce as s,et as u};
