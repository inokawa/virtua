import{r as X}from"./iframe-BqqiOlV0.js";const V=null,{min:T,max:E,abs:ae,floor:Re}=Math,ie=(e,t,s)=>T(s,E(t,e)),ve=e=>[...e].sort((t,s)=>t-s),Ke=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},q=()=>{let e;return[new Promise(s=>{e=s}),e]},ce=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},D=-1,U=(e,t,s)=>{const n=s?"unshift":"push";for(let o=0;o<t;o++)e[n](D);return e},j=(e,t)=>{const s=e._sizes[t];return s===D?e._defaultItemSize:s},Te=(e,t,s)=>{const n=e._sizes[t]===D;return e._sizes[t]=s,e._computedOffsetIndex=T(t,e._computedOffsetIndex),n},H=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=j(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},ye=e=>e._length?H(e,e._length-1)+j(e,e._length-1):0,k=(e,t,s=0,n=e._length-1)=>{for(;s<=n;){const o=Re((s+n)/2),m=H(e,o);if(m<=t){if(m+j(e,o)>t)return o;s=o+1}else n=o-1}return ie(s,0,e._length-1)},Ce=(e,t,s,n)=>{if(n=T(n,e._length-1),H(e,n)<=t){const o=k(e,t+s,n);return[k(e,t,n,o),o]}else{const o=k(e,t,void 0,n);return[o,k(e,t+s,o)]}},Ae=(e,t)=>{let s=0;const n=[];e._sizes.forEach((i,r)=>{i!==D&&(n.push(i),r<t&&s++)}),e._computedOffsetIndex=-1;const o=ve(n),m=o.length,$=m/2|0,_=m%2===0?(o[$-1]+o[$])/2:o[$],u=e._defaultItemSize;return((e._defaultItemSize=_)-u)*E(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?U(s[0].slice(0,T(e,s[0].length)),E(0,e-s[0].length)):U([],e),_length:e,_computedOffsetIndex:-1,_offsets:U([],e)}),Ne=e=>[e._sizes.slice(),e._defaultItemSize],me=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:T(t-1,e._computedOffsetIndex),e._length=t,n>0?(U(e._offsets,n),U(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((o,m)=>o-(m===D?e._defaultItemSize:m),0))},pe=typeof window<"u",ge=()=>document.documentElement,P=e=>e.ownerDocument,x=e=>e.defaultView,Ie=ce(()=>pe?getComputedStyle(ge()).direction==="rtl":!1),ze=ce(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),be=ce(()=>"scrollBehavior"in ge().style),Ve=2147483647,J=0,_e=1,$e=2,G=0,Me=1,ne=2,oe=1,Oe=2,N=3,K=4,De=5,Ee=6,le=7,fe=8,A=1,Z=2,Je=4,We=8,Be=e=>E(e.$getTotalSize(),e.$getViewportSize()),we=e=>!!e.$getViewportSize(),Fe=(e,t=40,s=4,n=0,o,m=!1)=>{let $=!!n,_=1,u=0,i=0,r=0,c=0,d=0,a=0,l=J,f=G,S=$?[0,E(n-1,0)]:V,I=[0,0],z=0;const g=ke(e,t,o),y=new Set,R=()=>r-i,h=()=>R()+d+c,C=p=>Ce(g,p,u,I[0]),ee=()=>ye(g),de=p=>H(g,p)-d,B=p=>j(g,p),te=p=>{p&&(ze()&&l!==J?d+=p:c+=p)};return{$getStateVersion:()=>_,$getCacheSnapshot:()=>Ne(g),$getRange:()=>{let p,b;return a?[p,b]=I:([p,b]=I=C(E(0,h())),S&&(p=T(p,S[0]),b=E(b,S[1]))),l!==_e&&(p-=E(0,s)),l!==$e&&(b+=E(0,s)),[E(p,0),T(b,g._length-1)]},$findStartIndex:()=>k(g,h()),$findEndIndex:()=>k(g,h()+u),$isUnmeasuredItem:p=>g._sizes[p]===D,_hasUnmeasuredItemsInFrozenRange:()=>S?g._sizes.slice(E(0,S[0]-1),T(g._length-1,S[1]+1)+1).includes(D):!1,$getItemOffset:de,$getItemSize:B,$getItemsLength:()=>g._length,$getScrollOffset:()=>r,$isScrolling:()=>l!==J,$getViewportSize:()=>u,$getStartSpacerSize:()=>i,$getTotalSize:ee,_flushJump:()=>(a=c,c=0,[a,f===ne||R()+u>=ee()]),$subscribe:(p,b)=>{const W=[p,b];return y.add(W),()=>{y.delete(W)}},$update:(p,b)=>{let W,se,L=0;switch(p){case oe:{const v=a;a=0;const w=b-r,O=ae(w);!(v&&O<ae(v)+1)&&f===G&&(l=w<0?$e:_e),$&&(S=V,$=!1),r=b,L=Je;const Y=R();Y>=-u&&Y<=ee()&&(L+=A,se=O>u);break}case Oe:{L=We,l!==J&&(W=!0,L+=A),l=J,f=G,S=V;break}case N:{const v=b.filter(([w,O])=>g._sizes[w]!==O);if(!v.length)break;te(v.reduce((w,[O,F])=>((f===ne||(S?!$&&O<S[0]:de(O)+(l===J&&f===G?B(O):0)<R()))&&(w+=F-B(O)),w),0));for(const[w,O]of v){const F=B(w),Y=Te(g,w,O);m&&(z+=Y?O:O-F)}m&&u&&z>u&&(te(Ae(g,k(g,h()))),m=!1),L=A+Z,se=!0;break}case K:{u!==b&&(u=b,L=A+Z);break}case De:{b[1]?(te(me(g,b[0],!0)),f=ne,L=A):(me(g,b[0]),L=A);break}case Ee:{i=b;break}case le:{f=Me;break}case fe:{S=C(b),L=A;break}}L&&(_=(_&Ve)+1,W&&d&&(c+=d,d=0),y.forEach(([v,w])=>{L&v&&w(se)}))}}},Q=setTimeout,Ue=(e,t)=>{let s;const n=()=>{s!=V&&clearTimeout(s)},o=()=>{n(),s=Q(()=>{s=V,e()},t)};return o._cancel=n,o},M=(e,t)=>t&&Ie()?-e:e,Le=(e,t,s,n,o,m)=>{const $=Date.now;let _=0,u=!1,i=!1,r=!1,c=!1;const d=Ue(()=>{if(u||i){u=!1,d();return}r=!1,e.$update(Oe)},150),a=()=>{_=$(),r&&(c=!0),m&&e.$update(Ee,m()),e.$update(oe,n()),d()},l=I=>{if(u||!e.$isScrolling()||I.ctrlKey)return;const z=$()-_;150>z&&50<z&&(s?I.deltaX:I.deltaY)&&(u=!0)},f=()=>{i=!0,r=c=!1},S=()=>{i=!1,ze()&&(r=!0)};return t.addEventListener("scroll",a),t.addEventListener("wheel",l,{passive:!0}),t.addEventListener("touchstart",f,{passive:!0}),t.addEventListener("touchend",S,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",a),t.removeEventListener("wheel",l),t.removeEventListener("touchstart",f),t.removeEventListener("touchend",S),d._cancel()},_fixScrollJump:()=>{const[I,z]=e._flushJump();I&&(o(M(I,s),z,c),c=!1,z&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(oe,n()))}}},Se=(e,t)=>{let s,n,o;const[m,$]=q(),_=t?"scrollLeft":"scrollTop",u=t?"overflowX":"overflowY",i=async(r,c)=>{if(!await m)return;o&&o();const a=()=>{const[l,f]=q();return o=()=>{f(!1)},we(e)&&Q(o,150),[l,e.$subscribe(Z,()=>{f(!0)})]};if(c&&be()){for(;e.$update(fe,r()),!!e._hasUnmeasuredItemsInFrozenRange();){const[l,f]=a();try{if(!await l)return}finally{f()}}s.scrollTo({[t?"left":"top"]:M(r(),t),behavior:"smooth"})}else for(;;){const[l,f]=a();try{if(s[_]=M(r(),t),e.$update(le),!await l)return}finally{f()}}};return{$observe(r){s=r,n=Le(e,r,t,()=>M(r[_],t),(c,d,a)=>{if(a){const l=r.style,f=l[u];l[u]="hidden",Q(()=>{l[u]=f})}d?(r[_]=e.$getScrollOffset()+c,o&&o()):r[_]+=c}),$(!0)},$dispose(){n&&n._dispose(),$(!1)},$scrollTo(r){i(()=>r)},$scrollBy(r){r+=e.$getScrollOffset(),i(()=>r)},$scrollToIndex(r,{align:c,smooth:d,offset:a=0}={}){if(r=ie(r,0,e.$getItemsLength()-1),c==="nearest"){const l=e.$getItemOffset(r),f=e.$getScrollOffset();if(l<f)c="start";else if(l+e.$getItemSize(r)>f+e.$getViewportSize())c="end";else return}i(()=>a+e.$getStartSpacerSize()+e.$getItemOffset(r)+(c==="end"?e.$getItemSize(r)-e.$getViewportSize():c==="center"?(e.$getItemSize(r)-e.$getViewportSize())/2:0),d)},$fixScrollJump:()=>{n&&n._fixScrollJump()}}},Ye=(e,t)=>{let s,n,o;const[m,$]=q(),_=(i,r,c,d,a=0)=>{const l=d?"offsetLeft":"offsetTop",f=a+(d&&Ie()?c.innerWidth-i[l]-i.offsetWidth:i[l]),S=i.offsetParent;return i===r||!S?f:_(S,r,c,d,f)},u=async(i,r)=>{if(!await m)return;o&&o();const d=()=>{const[l,f]=q();return o=()=>{f(!1)},we(e)&&Q(o,150),[l,e.$subscribe(Z,()=>{f(!0)})]},a=x(P(s));if(r&&be()){for(;e.$update(fe,i()),!!e._hasUnmeasuredItemsInFrozenRange();){const[l,f]=d();try{if(!await l)return}finally{f()}}a.scroll({[t?"left":"top"]:M(i(),t),behavior:"smooth"})}else for(;;){const[l,f]=d();try{if(a.scroll({[t?"left":"top"]:M(i(),t)}),e.$update(le),!await l)return}finally{f()}}};return{$observe(i){s=i;const r=t?"scrollX":"scrollY",c=P(i),d=x(c),a=c.body;n=Le(e,d,t,()=>M(d[r],t),(l,f)=>{f?d.scroll({[t?"left":"top"]:e.$getScrollOffset()+l}):d.scrollBy(t?l:0,t?0:l)},()=>_(i,a,d,t)),$(!0)},$dispose(){n&&n._dispose(),s=void 0,$(!1)},$fixScrollJump:()=>{n&&n._fixScrollJump()},$scrollToIndex(i,{align:r,smooth:c,offset:d=0}={}){if(!s)return;if(i=ie(i,0,e.$getItemsLength()-1),r==="nearest"){const I=e.$getItemOffset(i),z=e.$getScrollOffset();if(I<z)r="start";else if(I+e.$getItemSize(i)>z+e.$getViewportSize())r="end";else return}const a=P(s),l=x(a),f=a.documentElement,S=()=>e.$getViewportSize()-(t?f.clientWidth:f.clientHeight);u(()=>d+_(s,a.body,l,t)+e.$getItemOffset(i)+(r==="end"?e.$getItemSize(i)-(e.$getViewportSize()-S()):r==="center"?(e.$getItemSize(i)-(e.$getViewportSize()-S()))/2:0),c)}}},Ge=(e,t)=>{const s=Se(e,!1),n=Se(t,!0);return{$observe(o){s.$observe(o),n.$observe(o)},$dispose(){s.$dispose(),n.$dispose()},$scrollTo(o,m){s.$scrollTo(m),n.$scrollTo(o)},$scrollBy(o,m){s.$scrollBy(m),n.$scrollBy(o)},$scrollToIndex(o,m){s.$scrollToIndex(m),n.$scrollToIndex(o)},$fixScrollJump(){s.$fixScrollJump(),n.$fixScrollJump()}}},ue=e=>{let t;return{_observe(s){(t||(t=new(x(P(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Xe=(e,t)=>{let s;const n=t?"width":"height",o=new WeakMap,m=ue($=>{const _=[];for(const{target:u,contentRect:i}of $)if(u.offsetParent)if(u===s)e.$update(K,i[n]);else{const r=o.get(u);r!=V&&_.push([r,i[n]])}_.length&&e.$update(N,_)});return{$observeRoot($){m._observe(s=$)},$observeItem:($,_)=>(o.set($,_),m._observe($),()=>{o.delete($),m._unobserve($)}),$dispose:m._dispose}},qe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",o=new WeakMap,m=ue(_=>{const u=[];for(const{target:i,contentRect:r}of _){if(!i.offsetParent)continue;const c=o.get(i);c!=V&&u.push([c,r[s]])}u.length&&e.$update(N,u)});let $;return{$observeRoot(_){const u=x(P(_)),i=()=>{e.$update(K,u[n])};u.addEventListener("resize",i),i(),$=()=>{u.removeEventListener("resize",i)}},$observeItem:(_,u)=>(o.set(_,u),m._observe(_),()=>{o.delete(_),m._unobserve(_)}),$dispose(){$&&$(),m._dispose()}}},Ze=(e,t)=>{let s;const n="height",o="width",m=new WeakMap,$=new Set,_=new Set,u=new Map,i=(c,d)=>`${c}-${d}`,r=ue(c=>{const d=new Set,a=new Set;for(const{target:l,contentRect:f}of c)if(l.offsetParent)if(l===s)e.$update(K,f[n]),t.$update(K,f[o]);else{const S=m.get(l);if(S){const[I,z]=S,g=i(I,z),y=u.get(g),R=[f[n],f[o]];let h,C;y?(y[0]!==R[0]&&(h=!0),y[1]!==R[1]&&(C=!0)):h=C=!0,h&&d.add(I),C&&a.add(z),(h||C)&&u.set(g,R)}}if(d.size){const l=[];d.forEach(f=>{let S=0;_.forEach(I=>{const z=u.get(i(f,I));z&&(S=E(S,z[0]))}),S&&l.push([f,S])}),e.$update(N,l)}if(a.size){const l=[];a.forEach(f=>{let S=0;$.forEach(I=>{const z=u.get(i(I,f));z&&(S=E(S,z[1]))}),S&&l.push([f,S])}),t.$update(N,l)}});return{$observeRoot(c){r._observe(s=c)},$observeItem(c,d,a){return m.set(c,[d,a]),$.add(d),_.add(a),r._observe(c),()=>{m.delete(c),r._unobserve(c)}},$resizeCols(c){for(const[d]of c)for(let a=0;a<e.$getItemsLength();a++)u.delete(i(a,d));t.$update(N,c)},$resizeRows(c){for(const[d]of c)for(let a=0;a<t.$getItemsLength();a++)u.delete(i(d,a));e.$update(N,c)},$dispose:r._dispose}},Pe=pe?X.useLayoutEffect:X.useEffect,re="current",he=(e,t)=>{if(Array.isArray(e))for(const s of e)he(s,t);else e==null||typeof e=="boolean"||t.push(e)},Qe=e=>{const t=[];return he(e,t),t},je=(e,t)=>{const s=e.key;return s??"_"+t},He=e=>{const t=X.useRef(null);return t[re]||(t[re]=e())},et=e=>{const t=X.useRef(e);return Pe(()=>{t[re]=e},[e]),t};export{De as A,A as U,et as a,Pe as b,Je as c,We as d,Fe as e,Ze as f,Be as g,Ge as h,Ie as i,Ee as j,Xe as k,Se as l,Ke as m,je as n,qe as o,Ye as p,Qe as q,re as r,ve as s,He as u};
