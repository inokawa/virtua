import{j as y}from"./jsx-runtime-DR9Q75dM.js";import{r as a}from"./index-DRjF_FHU.js";import{N as M,a as Q,A as W,h as X,b as Y,c as Z,u as D,r,U as $,j as ee,k as se,m as te,g as re,s as oe,S as le,d as ae,l as ne,n as ie,o as ce}from"./useRerender-C0g9iCf9.js";import{u as ue,a as H,L as fe}from"./useChildren-CcKP1hHT.js";import{r as de}from"./index-uWwxbAOW.js";const me=a.forwardRef(({children:j,count:k,overscan:x=4,itemSize:p,shift:U,horizontal:w,keepMounted:g,cache:q,startMargin:E=0,ssrCount:h,as:u="div",item:G="div",scrollRef:v,onScroll:P,onScrollEnd:B,onRangeChange:I},F)=>{u=u;const[J,n]=ue(j,k),b=a.useRef(M),z=a.useRef(!!h),T=H(P),R=H(B),[e,f,o,d]=Q(()=>{const s=!!w,t=ae(n,p,h,q,!p);return[t,ne(t,s),ie(t,s),s]});n!==e._getItemsLength()&&e._update(W,[n,U]),E!==e._getStartSpacerSize()&&e._update(X,E);const L=Y(e),[m,_]=e._getRange(),O=e._getScrollDirection(),K=e._getJumpCount(),V=e._getTotalSize(),i=[],[A,C]=Z(m,_,x,O,n),S=s=>{const t=J(s);return y.jsx(fe,{_resizer:f._observeItem,_index:s,_offset:e._getItemOffset(s),_hide:e._isUnmeasuredItem(s),_as:G,_children:t,_isHorizontal:d,_isSSR:z[r]},ce(t,s))};D(()=>{z[r]=!1;const s=e._subscribe($,c=>{c?de.flushSync(L):L()}),t=e._subscribe(ee,()=>{T[r]&&T[r](e._getScrollOffset())}),l=e._subscribe(se,()=>{R[r]&&R[r]()}),N=c=>{f._observeRoot(c),o._observe(c)};return v?te(()=>N(v[r])):N(b[r].parentElement),()=>{s(),t(),l(),f._dispose(),o._dispose()}},[]),D(()=>{o._fixScrollJump()},[K]),a.useEffect(()=>{I&&I(m,_)},[m,_]),a.useImperativeHandle(F,()=>({get cache(){return e._getCacheSnapshot()},get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return re(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,getItemSize:e._getItemSize,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),[]);for(let s=A,t=C;s<=t;s++)i.push(S(s));if(g){const s=[],t=[];oe(g).forEach(l=>{l<A&&s.push(S(l)),l>C&&t.push(S(l))}),i.unshift(...s),i.push(...t)}return y.jsx(u,{ref:b,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?V:"100%",height:d?"100%":V,pointerEvents:O!==le?"none":void 0},children:i})});me.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},startMargin:{defaultValue:{value:"0",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{me as V};
