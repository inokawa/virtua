import{r as q}from"./iframe-CUJX56vO.js";const A=null,{min:N,max:E,abs:me,floor:he}=Math,re=(e,t,s)=>N(s,E(t,e)),we=e=>[...e].sort((t,s)=>t-s),Ce=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},P=()=>{let e;return[new Promise(s=>{e=s}),e]},ie=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},V=-1,J=(e,t,s)=>{const o=s?"unshift":"push";for(let i=0;i<t;i++)e[o](V);return e},X=(e,t)=>{const s=e._sizes[t];return s===V?e._defaultItemSize:s},ye=(e,t,s)=>{const o=e._sizes[t]===V;return e._sizes[t]=s,e._computedOffsetIndex=N(t,e._computedOffsetIndex),o},Z=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=X(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},Ae=e=>e._length?Z(e,e._length-1)+X(e,e._length-1):0,C=(e,t,s=0,o=e._length-1)=>{for(;s<=o;){const i=he((s+o)/2),f=Z(e,i);if(f<=t){if(f+X(e,i)>t)return i;s=i+1}else o=i-1}return re(s,0,e._length-1)},Ne=(e,t,s,o)=>{if(o=N(o,e._length-1),Z(e,o)<=t){const i=C(e,t+s,o);return[C(e,t,o,i),i]}else{const i=C(e,t,void 0,o);return[i,C(e,t+s,i)]}},ke=(e,t)=>{let s=0;const o=[];e._sizes.forEach((n,c)=>{n!==V&&(o.push(n),c<t&&s++)}),e._computedOffsetIndex=-1;const i=we(o),f=i.length,d=f/2|0,u=f%2===0?(i[d-1]+i[d])/2:i[d],r=e._defaultItemSize;return((e._defaultItemSize=u)-r)*E(t-s,0)},Ve=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?J(s[0].slice(0,N(e,s[0].length)),E(0,e-s[0].length)):J([],e),_length:e,_computedOffsetIndex:-1,_offsets:J([],e)}),Me=e=>[e._sizes.slice(),e._defaultItemSize],_e=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:N(t-1,e._computedOffsetIndex),e._length=t,o>0?(J(e._offsets,o),J(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((i,f)=>i-(f===V?e._defaultItemSize:f),0))},ge=typeof window<"u",Ie=()=>document.documentElement,D=e=>e.ownerDocument,W=e=>e.defaultView,ze=ie(()=>ge?getComputedStyle(Ie()).direction==="rtl":!1),be=ie(()=>/iP(hone|od|ad)/.test(navigator.userAgent)?!0:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>0),Je=ie(()=>"scrollBehavior"in Ie().style),De=2147483647,k=0,Se=1,$e=2,G=0,H=1,ee=2,te=1,Oe=2,y=3,x=4,We=5,Ee=6,se=7,Le=8,w=1,ne=2,Pe=4,xe=8,Fe=e=>E(e.$getTotalSize(),e.$getViewportSize()),Ye=(e,t=40,s=4,o=0,i,f=!1)=>{let d=!!o,u=1,r=0,n=0,c=0,l=0,m=0,_=0,a=k,S=G,$=d?[0,E(o-1,0)]:A,z=[0,0],L=0;const I=Ve(e,t,i),v=new Set,R=()=>c-n,K=()=>R()+m+l,fe=p=>Ne(I,p,r,z[0]),ue=()=>Ae(I),de=p=>Z(I,p)-m,B=p=>X(I,p),ae=(p,g=V)=>I._sizes[p]===g,j=p=>{p&&(be()&&a!==k||$&&S===H?m+=p:l+=p)};return{$getStateVersion:()=>u,$getCacheSnapshot:()=>Me(I),$getRange:()=>{let p,g;return _?[p,g]=z:([p,g]=z=fe(E(0,K())),$&&(p=N(p,$[0]),g=E(g,$[1]))),a!==Se&&(p-=E(0,s)),a!==$e&&(g+=E(0,s)),[E(p,0),N(g,I._length-1)]},$findStartIndex:()=>C(I,K()),$findEndIndex:()=>C(I,K()+r),$isUnmeasuredItem:ae,$getItemOffset:de,$getItemSize:B,$getItemsLength:()=>I._length,$getScrollOffset:()=>c,$isScrolling:()=>a!==k,$getViewportSize:()=>r,$getStartSpacerSize:()=>n,$getTotalSize:ue,_flushJump:()=>(_=l,l=0,[_,S===ee]),$subscribe:(p,g)=>{const M=[p,g];return v.add(M),()=>{v.delete(M)}},$update:(p,g)=>{let M,Q,T=0;switch(p){case te:{const h=_;_=0;const O=g-c,b=me(O);!(h&&b<me(h)+1)&&S===G&&(a=O<0?$e:Se),d&&($=A,d=!1),c=g,T=Pe;const Y=R();Y>=-r&&Y<=ue()&&(T+=w,Q=b>r);break}case Oe:{T=xe,a!==k&&(M=!0,T+=w),a=k,S=G,$=A;break}case y:{const h=g.filter(([O,b])=>!ae(O,b));if(!h.length)break;j(h.reduce((O,[b,F])=>((S===ee||($&&S===H?b<$[0]:de(b)+(a===k&&S===G?B(b):0)<R()))&&(O+=F-B(b)),O),0));for(const[O,b]of h){const F=B(O),Y=ye(I,O,b);f&&(L+=Y?b:b-F)}f&&r&&L>r&&(j(ke(I,C(I,K()))),f=!1),T=w+ne,Q=!0;break}case x:{r!==g&&(r=g,T=w+ne);break}case We:{g[1]?(j(_e(I,g[0],!0)),S=ee,T=w):(_e(I,g[0]),T=w);break}case Ee:{n=g;break}case se:{S=H;break}case Le:{$=fe(g),T=w;break}}T&&(u=(u&De)+1,M&&m&&(l+=m,m=0),v.forEach(([h,O])=>{T&h&&O(Q)}))}}},ce=setTimeout,Ue=(e,t)=>{let s;const o=()=>{s!=A&&clearTimeout(s)},i=()=>{o(),s=ce(()=>{s=A,e()},t)};return i._cancel=o,i},U=(e,t)=>t&&ze()?-e:e,Te=(e,t,s,o,i,f)=>{const d=Date.now;let u=0,r=!1,n=!1,c=!1,l=!1;const m=Ue(()=>{if(r||n){r=!1,m();return}c=!1,e.$update(Oe)},150),_=()=>{u=d(),c&&(l=!0),f&&e.$update(Ee,f()),e.$update(te,o()),m()},a=(z=>{if(r||!e.$isScrolling()||z.ctrlKey)return;const L=d()-u;150>L&&50<L&&(s?z.deltaX:z.deltaY)&&(r=!0)}),S=()=>{n=!0,c=l=!1},$=()=>{n=!1,be()&&(c=!0)};return t.addEventListener("scroll",_),t.addEventListener("wheel",a,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",$,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",_),t.removeEventListener("wheel",a),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",$),m._cancel()},_fixScrollJump:()=>{const[z,L]=e._flushJump();z&&(i(U(z,s),L,l),l=!1,L&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(te,o()))}}},ve=(e,t,s)=>{let o;return[async(i,f)=>{if(!await t())return;o&&o();const d=()=>{const[u,r]=P();return o=()=>{r(!1)},e.$getViewportSize()&&ce(o,150),[u,e.$subscribe(ne,()=>{r(!0)})]};if(f&&Je())e.$update(Le,i()),Ce(async()=>{for(;;){let u=!0;for(let[c,l]=e.$getRange();c<=l;c++)if(e.$isUnmeasuredItem(c)){u=!1;break}if(u)break;const[r,n]=d();try{if(!await r)return}finally{n()}}e.$update(se),s(i(),f)});else for(;;){const[u,r]=d();try{if(e.$update(se),s(i()),!await u)return}finally{r()}}},()=>{o&&o()}]},pe=(e,t)=>{let s,o,i=P();const f=t?"scrollLeft":"scrollTop",d=t?"overflowX":"overflowY",[u,r]=ve(e,()=>i[0],(n,c)=>{n=U(n,t),c?s.scrollTo({[t?"left":"top"]:n,behavior:"smooth"}):s[f]=n});return{$observe(n){s=n,o=Te(e,n,t,()=>U(n[f],t),(c,l,m)=>{if(m){const _=n.style,a=_[d];_[d]="hidden",ce(()=>{_[d]=a})}n[f]=e.$getScrollOffset()+c,l&&r()}),i[1](!0)},$dispose(){o&&o._dispose(),i[1](!1),i=P()},$scrollTo(n){u(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),u(()=>n)},$scrollToIndex(n,{align:c,smooth:l,offset:m=0}={}){if(n=re(n,0,e.$getItemsLength()-1),c==="nearest"){const _=e.$getItemOffset(n),a=e.$getScrollOffset();if(_<a)c="start";else if(_+e.$getItemSize(n)>a+e.$getViewportSize())c="end";else return}u(()=>m+e.$getStartSpacerSize()+e.$getItemOffset(n)+(c==="end"?e.$getItemSize(n)-e.$getViewportSize():c==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),l)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Ge=(e,t)=>{let s,o,i=P();const f=t?"left":"top",[d]=ve(e,()=>i[0],(r,n)=>{r=U(r,t);const c=W(D(s));n?c.scroll({[f]:r,behavior:"smooth"}):c.scroll({[f]:r})}),u=(r,n,c,l,m=0)=>{const _=l?"offsetLeft":"offsetTop",a=m+(l&&ze()?c.innerWidth-r[_]-r.offsetWidth:r[_]),S=r.offsetParent;return r===n||!S?a:u(S,n,c,l,a)};return{$observe(r){s=r;const n=t?"scrollX":"scrollY",c=D(r),l=W(c);o=Te(e,l,t,()=>U(l[n],t),m=>{l.scroll({[f]:e.$getScrollOffset()+m})},()=>u(r,c.body,l,t)),i[1](!0)},$dispose(){o&&o._dispose(),s=void 0,i[1](!1),i=P()},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(r,{align:n,smooth:c,offset:l=0}={}){if(!s)return;if(r=re(r,0,e.$getItemsLength()-1),n==="nearest"){const $=e.$getItemOffset(r),z=e.$getScrollOffset();if($<z)n="start";else if($+e.$getItemSize(r)>z+e.$getViewportSize())n="end";else return}const m=D(s),_=W(m),a=m.documentElement,S=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);d(()=>l+u(s,m.body,_,t)+e.$getItemOffset(r)+(n==="end"?e.$getItemSize(r)-(e.$getViewportSize()-S()):n==="center"?(e.$getItemSize(r)-(e.$getViewportSize()-S()))/2:0),c)}}},qe=(e,t)=>{const s=pe(e,!1),o=pe(t,!0);return{$observe(i){s.$observe(i),o.$observe(i)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(i,f){s.$scrollTo(f),o.$scrollTo(i)},$scrollBy(i,f){s.$scrollBy(f),o.$scrollBy(i)},$scrollToIndex(i,f){s.$scrollToIndex(f),o.$scrollToIndex(i)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},le=e=>{let t;return{_observe(s){(t||(t=new(W(D(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Xe=(e,t)=>{let s;const o=t?"width":"height",i=new WeakMap,f=le(d=>{const u=[];for(const{target:r,contentRect:n}of d)if(r.offsetParent)if(r===s)e.$update(x,n[o]);else{const c=i.get(r);c!=A&&u.push([c,n[o]])}u.length&&e.$update(y,u)});return{$observeRoot(d){f._observe(s=d)},$observeItem:(d,u)=>(i.set(d,u),f._observe(d),()=>{i.delete(d),f._unobserve(d)}),$dispose:f._dispose}},Ze=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",i=new WeakMap,f=le(u=>{const r=[];for(const{target:n,contentRect:c}of u){if(!n.offsetParent)continue;const l=i.get(n);l!=A&&r.push([l,c[s]])}r.length&&e.$update(y,r)});let d;return{$observeRoot(u){const r=W(D(u)),n=()=>{e.$update(x,r[o])};r.addEventListener("resize",n),n(),d=()=>{r.removeEventListener("resize",n)}},$observeItem:(u,r)=>(i.set(u,r),f._observe(u),()=>{i.delete(u),f._unobserve(u)}),$dispose(){d&&d(),f._dispose()}}},je=(e,t)=>{let s;const o=new WeakMap,i=new Set,f=new Set,d=new Map,u=(n,c)=>`${n}-${c}`,r=le(n=>{const c=new Set,l=new Set;for(const{target:m,contentRect:{width:_,height:a}}of n)if(m.offsetParent)if(m===s)e.$update(x,a),t.$update(x,_);else{const S=o.get(m);if(S){const[$,z]=S,L=u($,z),I=d.get(L);let v,R;I?(I[0]!==a&&(v=!0),I[1]!==_&&(R=!0)):v=R=!0,v&&c.add($),R&&l.add(z),(v||R)&&d.set(L,[a,_])}}if(c.size){const m=[];c.forEach(_=>{let a=0;f.forEach(S=>{const $=d.get(u(_,S));$&&(a=E(a,$[0]))}),a&&m.push([_,a])}),e.$update(y,m)}if(l.size){const m=[];l.forEach(_=>{let a=0;i.forEach(S=>{const $=d.get(u(S,_));$&&(a=E(a,$[1]))}),a&&m.push([_,a])}),t.$update(y,m)}});return{$observeRoot(n){r._observe(s=n)},$observeItem(n,c,l){return o.set(n,[c,l]),i.add(c),f.add(l),r._observe(n),()=>{o.delete(n),r._unobserve(n)}},$resizeCols(n){for(const[c]of n)for(let l=0;l<e.$getItemsLength();l++)d.delete(u(l,c));t.$update(y,n)},$resizeRows(n){for(const[c]of n)for(let l=0;l<t.$getItemsLength();l++)d.delete(u(c,l));e.$update(y,n)},$dispose:r._dispose}},Ke=ge?q.useLayoutEffect:q.useEffect,oe="current",Re=(e,t)=>{if(Array.isArray(e))for(const s of e)Re(s,t);else e==null||typeof e=="boolean"||t.push(e)},Qe=e=>{const t=[];return Re(e,t),t},He=(e,t)=>{const s=e.key;return s??"_"+t},et=e=>{const t=q.useRef(null);return t[oe]||(t[oe]=e())},tt=e=>{const t=q.useRef(e);return Ke(()=>{t[oe]=e},[e]),t};export{We as A,w as U,tt as a,Ke as b,Pe as c,xe as d,Ye as e,je as f,Fe as g,qe as h,ze as i,Ee as j,Xe as k,pe as l,Ce as m,He as n,Ze as o,Ge as p,Qe as q,oe as r,we as s,et as u};
