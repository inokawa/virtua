import{r as G}from"./index-DRjF_FHU.js";const k=null,{min:T,max:E,abs:de,floor:Re}=Math,re=(e,t,s)=>T(s,E(t,e)),ve=e=>[...e].sort((t,s)=>t-s),$e=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},ce=e=>{let t,s;return()=>(t||(t=!0,s=e()),s)},M=-1,W=(e,t,s)=>{const o=s?"unshift":"push";for(let r=0;r<t;r++)e[o](M);return e},Q=(e,t)=>{const s=e._sizes[t];return s===M?e._defaultItemSize:s},Te=(e,t,s)=>{const o=e._sizes[t]===M;return e._sizes[t]=s,e._computedOffsetIndex=T(t,e._computedOffsetIndex),o},j=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=Q(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},ye=e=>e._length?j(e,e._length-1)+Q(e,e._length-1):0,N=(e,t,s=0,o=e._length-1)=>{for(;s<=o;){const r=Re((s+o)/2),f=j(e,r);if(f<=t){if(f+Q(e,r)>t)return r;s=r+1}else o=r-1}return re(s,0,e._length-1)},Ce=(e,t,s,o)=>{if(o=T(o,e._length-1),j(e,o)<=t){const r=N(e,t+s,o);return[N(e,t,o,r),r]}else{const r=N(e,t,void 0,o);return[r,N(e,t+s,r)]}},Ae=(e,t)=>{let s=0;const o=[];e._sizes.forEach((l,d)=>{l!==M&&(o.push(l),d<t&&s++)}),e._computedOffsetIndex=-1;const r=ve(o),f=r.length,m=f/2|0,c=f%2===0?(r[m-1]+r[m])/2:r[m],n=e._defaultItemSize;return((e._defaultItemSize=c)-n)*E(t-s,0)},Ne=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?W(s[0].slice(0,T(e,s[0].length)),E(0,e-s[0].length)):W([],e),_length:e,_computedOffsetIndex:-1,_offsets:W([],e)}),ke=e=>[e._sizes.slice(),e._defaultItemSize],ae=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:T(t-1,e._computedOffsetIndex),e._length=t,o>0?(W(e._offsets,o),W(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((r,f)=>r-(f===M?e._defaultItemSize:f),0))},pe=typeof window<"u",ge=()=>document.documentElement,U=e=>e.ownerDocument,P=e=>e.defaultView,Ie=ce(()=>pe?getComputedStyle(ge()).direction==="rtl":!1),be=ce(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),ze=ce(()=>"scrollBehavior"in ge().style),Ve=2147483647,D=0,me=1,_e=2,q=0,Me=1,se=2,ne=1,Oe=2,x=3,K=4,De=5,Ee=6,ie=7,le=8,A=1,X=2,Je=4,We=8,Ke=e=>E(e.$getTotalSize(),e.$getViewportSize()),he=e=>!!e.$getViewportSize(),Be=(e,t=40,s=4,o=0,r,f=!1)=>{let m=!!o,c=1,n=0,l=0,d=0,i=0,u=0,a=0,S=D,$=q,_=m?[0,E(o-1,0)]:k,b=[0,0],z=0;const g=Ne(e,t,r),y=new Set,R=()=>d-l,L=()=>R()+u+i,C=p=>Ce(g,p,n,b[0]),H=()=>ye(g),fe=p=>j(g,p)-u,B=p=>Q(g,p),ee=p=>{p&&(be()&&S!==D?u+=p:i+=p)};return{$getStateVersion:()=>c,$getCacheSnapshot:()=>ke(g),$getRange:()=>{let p,I;return a?[p,I]=b:([p,I]=b=C(E(0,L())),_&&(p=T(p,_[0]),I=E(I,_[1]))),S!==me&&(p-=E(0,s)),S!==_e&&(I+=E(0,s)),[E(p,0),T(I,g._length-1)]},$findStartIndex:()=>N(g,L()),$findEndIndex:()=>N(g,L()+n),$isUnmeasuredItem:p=>g._sizes[p]===M,_hasUnmeasuredItemsInFrozenRange:()=>_?g._sizes.slice(E(0,_[0]-1),T(g._length-1,_[1]+1)+1).includes(M):!1,$getItemOffset:fe,$getItemSize:B,$getItemsLength:()=>g._length,$getScrollOffset:()=>d,$isScrolling:()=>S!==D,$getViewportSize:()=>n,$getStartSpacerSize:()=>l,$getTotalSize:H,_flushJump:()=>(a=i,i=0,[a,$===se||R()+n>=H()]),$subscribe:(p,I)=>{const J=[p,I];return y.add(J),()=>{y.delete(J)}},$update:(p,I)=>{let J,te,w=0;switch(p){case ne:{const v=a;a=0;const h=I-d,O=de(h);!(v&&O<de(v)+1)&&$===q&&(S=h<0?_e:me),m&&(_=k,m=!1),d=I,w=Je;const Y=R();Y>=-n&&Y<=H()&&(w+=A,te=O>n);break}case Oe:{w=We,S!==D&&(J=!0,w+=A),S=D,$=q,_=k;break}case x:{const v=I.filter(([h,O])=>g._sizes[h]!==O);if(!v.length)break;ee(v.reduce((h,[O,F])=>(($===se||(_?!m&&O<_[0]:fe(O)+(S===D&&$===q?B(O):0)<R()))&&(h+=F-B(O)),h),0));for(const[h,O]of v){const F=B(h),Y=Te(g,h,O);f&&(z+=Y?O:O-F)}f&&n&&z>n&&(ee(Ae(g,N(g,L()))),f=!1),w=A+X,te=!0;break}case K:{n!==I&&(n=I,w=A+X);break}case De:{I[1]?(ee(ae(g,I[0],!0)),$=se,w=A):(ae(g,I[0]),w=A);break}case Ee:{l=I;break}case ie:{$=Me;break}case le:{_=C(I),w=A;break}}w&&(c=(c&Ve)+1,J&&u&&(i+=u,u=0),y.forEach(([v,h])=>{w&v&&h(te)}))}}},Z=setTimeout,Ue=(e,t)=>{let s;const o=()=>{s!=k&&clearTimeout(s)},r=()=>{o(),s=Z(()=>{s=k,e()},t)};return r._cancel=o,r},V=(e,t)=>t&&Ie()?-e:e,we=(e,t,s,o,r,f)=>{const m=Date.now;let c=0,n=!1,l=!1,d=!1,i=!1;const u=Ue(()=>{if(n||l){n=!1,u();return}d=!1,e.$update(Oe)},150),a=()=>{c=m(),d&&(i=!0),f&&e.$update(Ee,f()),e.$update(ne,o()),u()},S=b=>{if(n||!e.$isScrolling()||b.ctrlKey)return;const z=m()-c;150>z&&50<z&&(s?b.deltaX:b.deltaY)&&(n=!0)},$=()=>{l=!0,d=i=!1},_=()=>{l=!1,be()&&(d=!0)};return t.addEventListener("scroll",a),t.addEventListener("wheel",S,{passive:!0}),t.addEventListener("touchstart",$,{passive:!0}),t.addEventListener("touchend",_,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",a),t.removeEventListener("wheel",S),t.removeEventListener("touchstart",$),t.removeEventListener("touchend",_),u._cancel()},_fixScrollJump:()=>{const[b,z]=e._flushJump();b&&(r(V(b,s),z,i),i=!1,z&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(ne,o()))}}},Se=(e,t)=>{let s,o,r;const f=t?"scrollLeft":"scrollTop",m=t?"overflowX":"overflowY",c=async(n,l)=>{if(!s){$e(()=>c(n,l));return}r&&r();const d=()=>{let i;return[new Promise((u,a)=>{i=u,r=a,he(e)&&Z(a,150)}),e.$subscribe(X,()=>{i&&i()})]};if(l&&ze()){for(;e.$update(le,n()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,u]=d();try{await i}catch{return}finally{u()}}s.scrollTo({[t?"left":"top"]:V(n(),t),behavior:"smooth"})}else for(;;){const[i,u]=d();try{s[f]=V(n(),t),e.$update(ie),await i}catch{return}finally{u()}}};return{$observe(n){s=n,o=we(e,n,t,()=>V(n[f],t),(l,d,i)=>{if(i){const u=n.style,a=u[m];u[m]="hidden",Z(()=>{u[m]=a})}d?(n[f]=e.$getScrollOffset()+l,r&&r()):n[f]+=l})},$dispose(){o&&o._dispose()},$scrollTo(n){c(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),c(()=>n)},$scrollToIndex(n,{align:l,smooth:d,offset:i=0}={}){if(n=re(n,0,e.$getItemsLength()-1),l==="nearest"){const u=e.$getItemOffset(n),a=e.$getScrollOffset();if(u<a)l="start";else if(u+e.$getItemSize(n)>a+e.$getViewportSize())l="end";else return}c(()=>i+e.$getStartSpacerSize()+e.$getItemOffset(n)+(l==="end"?e.$getItemSize(n)-e.$getViewportSize():l==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),d)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Fe=(e,t)=>{let s,o,r;const f=(c,n,l,d,i=0)=>{const u=d?"offsetLeft":"offsetTop",a=i+(d&&Ie()?l.innerWidth-c[u]-c.offsetWidth:c[u]),S=c.offsetParent;return c===n||!S?a:f(S,n,l,d,a)},m=async(c,n)=>{if(!s){$e(()=>m(c,n));return}r&&r();const l=()=>{let i;return[new Promise((u,a)=>{i=u,r=a,he(e)&&Z(a,150)}),e.$subscribe(X,()=>{i&&i()})]},d=P(U(s));if(n&&ze()){for(;e.$update(le,c()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,u]=l();try{await i}catch{return}finally{u()}}d.scroll({[t?"left":"top"]:V(c(),t),behavior:"smooth"})}else for(;;){const[i,u]=l();try{d.scroll({[t?"left":"top"]:V(c(),t)}),e.$update(ie),await i}catch{return}finally{u()}}};return{$observe(c){s=c;const n=t?"scrollX":"scrollY",l=U(c),d=P(l),i=l.body;o=we(e,d,t,()=>V(d[n],t),(u,a)=>{a?d.scroll({[t?"left":"top"]:e.$getScrollOffset()+u}):d.scrollBy(t?u:0,t?0:u)},()=>f(c,i,d,t))},$dispose(){o&&o._dispose(),s=void 0},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(c,{align:n,smooth:l,offset:d=0}={}){if(!s)return;if(c=re(c,0,e.$getItemsLength()-1),n==="nearest"){const $=e.$getItemOffset(c),_=e.$getScrollOffset();if($<_)n="start";else if($+e.$getItemSize(c)>_+e.$getViewportSize())n="end";else return}const i=U(s),u=P(i),a=i.documentElement,S=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);m(()=>d+f(s,i.body,u,t)+e.$getItemOffset(c)+(n==="end"?e.$getItemSize(c)-(e.$getViewportSize()-S()):n==="center"?(e.$getItemSize(c)-(e.$getViewportSize()-S()))/2:0),l)}}},Ye=(e,t)=>{const s=Se(e,!1),o=Se(t,!0);return{$observe(r){s.$observe(r),o.$observe(r)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(r,f){s.$scrollTo(f),o.$scrollTo(r)},$scrollBy(r,f){s.$scrollBy(f),o.$scrollBy(r)},$scrollToIndex(r,f){s.$scrollToIndex(f),o.$scrollToIndex(r)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},ue=e=>{let t;return{_observe(s){(t||(t=new(P(U(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},qe=(e,t)=>{let s;const o=t?"width":"height",r=new WeakMap,f=ue(m=>{const c=[];for(const{target:n,contentRect:l}of m)if(n.offsetParent)if(n===s)e.$update(K,l[o]);else{const d=r.get(n);d!=k&&c.push([d,l[o]])}c.length&&e.$update(x,c)});return{$observeRoot(m){f._observe(s=m)},$observeItem:(m,c)=>(r.set(m,c),f._observe(m),()=>{r.delete(m),f._unobserve(m)}),$dispose:f._dispose}},Ge=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,f=ue(c=>{const n=[];for(const{target:l,contentRect:d}of c){if(!l.offsetParent)continue;const i=r.get(l);i!=k&&n.push([i,d[s]])}n.length&&e.$update(x,n)});let m;return{$observeRoot(c){const n=P(U(c)),l=()=>{e.$update(K,n[o])};n.addEventListener("resize",l),l(),m=()=>{n.removeEventListener("resize",l)}},$observeItem:(c,n)=>(r.set(c,n),f._observe(c),()=>{r.delete(c),f._unobserve(c)}),$dispose(){m&&m(),f._dispose()}}},Xe=(e,t)=>{let s;const o="height",r="width",f=new WeakMap,m=new Set,c=new Set,n=new Map,l=(i,u)=>`${i}-${u}`,d=ue(i=>{const u=new Set,a=new Set;for(const{target:S,contentRect:$}of i)if(S.offsetParent)if(S===s)e.$update(K,$[o]),t.$update(K,$[r]);else{const _=f.get(S);if(_){const[b,z]=_,g=l(b,z),y=n.get(g),R=[$[o],$[r]];let L,C;y?(y[0]!==R[0]&&(L=!0),y[1]!==R[1]&&(C=!0)):L=C=!0,L&&u.add(b),C&&a.add(z),(L||C)&&n.set(g,R)}}if(u.size){const S=[];u.forEach($=>{let _=0;c.forEach(b=>{const z=n.get(l($,b));z&&(_=E(_,z[0]))}),_&&S.push([$,_])}),e.$update(x,S)}if(a.size){const S=[];a.forEach($=>{let _=0;m.forEach(b=>{const z=n.get(l(b,$));z&&(_=E(_,z[1]))}),_&&S.push([$,_])}),t.$update(x,S)}});return{$observeRoot(i){d._observe(s=i)},$observeItem(i,u,a){return f.set(i,[u,a]),m.add(u),c.add(a),d._observe(i),()=>{f.delete(i),d._unobserve(i)}},$dispose:d._dispose}},Pe=pe?G.useLayoutEffect:G.useEffect,oe="current",Le=(e,t)=>{if(Array.isArray(e))for(const s of e)Le(s,t);else e==null||typeof e=="boolean"||t.push(e)},Ze=e=>{const t=[];return Le(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},je=e=>{const t=G.useRef();return t[oe]||(t[oe]=e())},He=e=>{const t=G.useRef(e);return Pe(()=>{t[oe]=e},[e]),t};export{De as A,A as U,je as a,He as b,Je as c,We as d,Be as e,Xe as f,Ke as g,Ye as h,Ie as i,Ee as j,qe as k,Se as l,$e as m,Qe as n,Ge as o,Fe as p,Ze as q,oe as r,ve as s,Pe as u};
