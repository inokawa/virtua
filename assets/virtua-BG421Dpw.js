import{j as _}from"./jsx-runtime-D_zvdyIk.js";import{r as S}from"./iframe-D0b3K_4L.js";import{r as ye}from"./index-DnoLG0YB.js";const Y=null,{min:P,max:B,abs:ne,floor:ge}=Math,ie=(e,t,r)=>P(r,B(t,e)),le=e=>[...e].sort(((t,r)=>t-r)),ue=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},K=()=>{let e;return[new Promise((t=>{e=t})),e]},Q=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},X=(e,t,r)=>{const n=r?"unshift":"push";for(let s=0;s<t;s++)e[n](-1);return e},U=(e,t)=>{const r=e.t[t];return r===-1?e.o:r},we=(e,t,r)=>{const n=e.t[t]===-1;return e.t[t]=r,e.i=P(t,e.i),n},G=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let r=e.i,n=e.u[r];for(;r<t;)n+=U(e,r),e.u[++r]=n;return e.i=t,n},O=(e,t,r=0,n=e.l-1)=>{for(;r<=n;){const s=ge((r+n)/2),u=G(e,s);if(u<=t){if(u+U(e,s)>t)return s;r=s+1}else n=s-1}return ie(r,0,e.l-1)},oe=(e,t,r)=>{const n=t-e.l;return e.i=r?-1:P(t-1,e.i),e.l=t,n>0?(X(e.u,n),X(e.t,n,r),e.o*n):(e.u.splice(n),(r?e.t.splice(0,-n):e.t.splice(n)).reduce(((s,u)=>s-(u===-1?e.o:u)),0))},ce=typeof window<"u",ae=()=>document.documentElement,xe=e=>e.ownerDocument,be=e=>e.defaultView,fe=Q((()=>!!ce&&getComputedStyle(ae()).direction==="rtl")),de=Q((()=>!!/iP(hone|od|ad)/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>0)),ke=Q((()=>"scrollBehavior"in ae().style)),Ee=e=>B(e.h(),e.p()),Re=(e,t=40,r=0,n,s=!1)=>{let u=!!r,f=1,i=0,p=0,o=0,a=0,x=0,E=0,w=0,b=0,T=Y,z=[0,u?B(r-1,0):-1],k=0;const h=((l,v,m)=>({o:m?m[1]:v,t:m&&m[0]?X(m[0].slice(0,P(l,m[0].length)),B(0,l-m[0].length)):X([],l),l,i:-1,u:X([],l)}))(e,t,n),j=new Set,q=()=>o-p,H=()=>q()+x+a,y=(l,v)=>((m,I,c,d)=>{if(d=P(d,m.l-1),G(m,d)<=I){const g=O(m,c,d);return[O(m,I,d,g),g]}{const g=O(m,I,void 0,d);return[g,O(m,c,g)]}})(h,l,v,z[0]),D=()=>(l=>l.l?G(l,l.l-1)+U(l,l.l-1):0)(h),A=l=>G(h,l)-x,C=l=>U(h,l),J=(l,v=-1)=>h.t[l]===v,V=l=>{l&&(de()&&w!==0||T&&b===1?x+=l:a+=l)};return{v:()=>f,m:()=>(l=>[l.t.slice(),l.o])(h),_:(l=200)=>{if(!i||u)return z;let v,m;if(E)[v,m]=z;else{l=B(0,l);let I=B(0,H()),c=I+i;s||(w!==1&&(I-=l),w!==2&&(c+=l)),[v,m]=z=y(B(0,I),B(0,c)),T&&(v=P(v,T[0]),m=B(m,T[1]))}return[B(v,0),P(m,h.l-1)]},S:()=>O(h,H()),$:()=>O(h,H()+i),I:J,k:A,R:C,T:()=>h.l,M:()=>o,C:()=>w!==0,p:()=>i,H:()=>p,h:D,W:()=>(E=a,a=0,[E,b===2]),O:(l,v)=>{const m=[l,v];return j.add(m),()=>{j.delete(m)}},B:(l,v)=>{let m,I,c=0;switch(l){case 1:{const d=E;E=0;const g=v-o,R=ne(g);d&&R<ne(d)+1||b!==0||(w=g<0?2:1),u&&(u=!1),o=v,c=4;const M=q();M>=-i&&M<=D()&&(c+=1,I=R>i);break}case 2:c=8,w!==0&&(m=!0,c+=1),w=0,b=0,T=Y;break;case 3:{const d=v.filter((([g,R])=>!J(g,R)));if(!d.length)break;V(d.reduce(((g,[R,M])=>((b===2||(T&&b===1?R<T[0]:A(R)+(w===0&&b===0?C(R):0)<q()))&&(g+=M-C(R)),g)),0));for(const[g,R]of d){const M=C(g),W=we(h,g,R);s&&(k+=W?R:R-M)}s&&i&&k>i&&(V(((g,R)=>{let M=0;const W=[];g.t.forEach(((re,ve)=>{re!==-1&&(W.push(re),ve<R&&M++)})),g.i=-1;const F=le(W),te=F.length,$=te/2|0,pe=te%2==0?(F[$-1]+F[$])/2:F[$],me=g.o;return((g.o=pe)-me)*B(R-M,0)})(h,O(h,H()))),s=!1),c=3,I=!0;break}case 4:i!==v&&(i||(I=!0),i=v,c=3);break;case 5:v[1]?(V(oe(h,v[0],!0)),b=2,c=1):(oe(h,v[0]),c=1);break;case 6:p=v;break;case 7:b=1;break;case 8:T=y(v,v+i),c=1}c&&(f=1+(2147483647&f),m&&x&&(a+=x,x=0),j.forEach((([d,g])=>{c&d&&g(I)})))}}},ee=setTimeout,N=(e,t)=>t&&fe()?-e:e,Se=(e,t,r,n,s,u)=>{const f=Date.now;let i=0,p=!1,o=!1,a=!1,x=!1;const E=(()=>{let k;const h=()=>{k!=Y&&clearTimeout(k)},j=()=>{h(),k=ee((()=>{k=Y,(()=>{if(p||o)return p=!1,void E();a=!1,e.B(2)})()}),150)};return j.J=h,j})(),w=()=>{i=f(),a&&(x=!0),e.B(1,n()),E()},b=k=>{if(p||!e.C()||k.ctrlKey)return;const h=f()-i;150>h&&50<h&&(r?k.deltaX:k.deltaY)&&(p=!0)},T=()=>{o=!0,a=x=!1},z=()=>{o=!1,de()&&(a=!0)};return t.addEventListener("scroll",w),t.addEventListener("wheel",b,{passive:!0}),t.addEventListener("touchstart",T,{passive:!0}),t.addEventListener("touchend",z,{passive:!0}),{A:()=>{t.removeEventListener("scroll",w),t.removeEventListener("wheel",b),t.removeEventListener("touchstart",T),t.removeEventListener("touchend",z),E.J()},L:()=>{const[k,h]=e.W();k&&(s(N(k,r),h,x),x=!1,h&&e.p()>e.h()&&e.B(1,n()))}}},Te=(e,t,r)=>{let n;return[async(s,u)=>{if(!await t())return;n&&n();const f=()=>{const[i,p]=K();return n=()=>{p(!1)},e.p()&&ee(n,150),[i,e.O(2,(()=>{p(!0)}))]};if(u&&ke())e.B(8,s()),ue((async()=>{for(;;){let i=!0;for(let[a,x]=e._();a<=x;a++)if(e.I(a)){i=!1;break}if(i)break;const[p,o]=f();try{if(!await p)return}finally{o()}}e.B(7),r(s(),u)}));else for(;;){const[i,p]=f();try{if(e.B(7),r(s()),!await i)return}finally{p()}}},()=>{n&&n()}]},Ie=(e,t)=>{let r,n,s=K();const u=t?"scrollLeft":"scrollTop",f=t?"overflowX":"overflowY",[i,p]=Te(e,(()=>s[0]),((o,a)=>{o=N(o,t),a?r.scrollTo({[t?"left":"top"]:o,behavior:"smooth"}):r[u]=o}));return{D(o){r=o,n=Se(e,o,t,(()=>N(o[u],t)),((a,x,E)=>{if(E){const w=o.style,b=w[f];w[f]="hidden",ee((()=>{w[f]=b}))}o[u]=e.M()+a,x&&p()})),s[1](!0)},P(){n&&n.A(),s[1](!1),s=K()},V(o){i((()=>o))},X(o){o+=e.M(),i((()=>o))},Y(o,{align:a,smooth:x,offset:E=0}={}){if(o=ie(o,0,e.T()-1),a==="nearest"){const w=e.k(o),b=e.M();if(w<b)a="start";else{if(!(w+e.R(o)>b+e.p()))return;a="end"}}i((()=>E+e.H()+e.k(o)+(a==="end"?e.R(o)-e.p():a==="center"?(e.R(o)-e.p())/2:0)),x)},j:()=>{n&&n.L()}}},Me=e=>{let t;return{q(r){(t||(t=new(be(xe(r))).ResizeObserver(e))).observe(r)},G(r){t.unobserve(r)},A(){t&&t.disconnect()}}},Le=(e,t)=>{let r;const n=t?"width":"height",s=new WeakMap,u=Me((f=>{const i=[];for(const{target:p,contentRect:o}of f)if(p.offsetParent)if(p===r)e.B(4,o[n]);else{const a=s.get(p);a!=Y&&i.push([a,o[n]])}i.length&&e.B(3,i)}));return{U(f){u.q(r=f)},F:(f,i)=>(s.set(f,i),u.q(f),()=>{s.delete(f),u.G(f)}),P:u.A}},Z=ce?S.useLayoutEffect:S.useEffect,L="current",he=(e,t)=>{if(Array.isArray(e))for(const r of e)he(r,t);else e==null||typeof e=="boolean"||t.push(e)},ze=(e,t)=>{const r=e.key;return r??"_"+t},Be=e=>{const t=S.useRef(null);return t[L]||(t[L]=e())},se=e=>{const t=S.useRef(e);return Z((()=>{t[L]=e}),[e]),t},je=S.memo((({Z:e,ee:t,te:r,oe:n,ne:s,re:u,ie:f,se:i})=>{const p=S.useRef(null);Z((()=>t(p[L],r)),[r]);const o=S.useMemo((()=>{const a={contain:"layout style",position:s&&i?void 0:"absolute",[f?"height":"width"]:"100%",[f?"top":"left"]:0,[f?fe()?"right":"left":"top"]:n,visibility:!s||i?"visible":"hidden"};return f&&(a.display="inline-flex"),a}),[n,s,i,f]);return _.jsx(u,typeof u=="string"?{ref:p,style:o,children:e}:{ref:p,style:o,index:r,children:e})})),Ae=(e,t)=>S.useMemo((()=>{if(typeof e=="function")return[n=>e(t[n],n),t.length];const r=(n=>{const s=[];return he(n,s),s})(e);return[n=>r[n],r.length]}),[e,t]),Ce=S.forwardRef((({children:e,data:t,bufferSize:r,itemSize:n,shift:s,horizontal:u,keepMounted:f,cache:i,startMargin:p=0,ssrCount:o,as:a="div",item:x="div",scrollRef:E,onScroll:w,onScrollEnd:b},T)=>{const[z,k]=Ae(e,t),h=S.useRef(null),j=S.useRef(!!o),q=se(w),H=se(b),[y,D,A,C]=Be((()=>{const c=!!u,d=Re(k,n,o,i,!n);return[d,Le(d,c),Ie(d,c),c]}));k!==y.T()&&y.B(5,[k,s]),p!==y.H()&&y.B(6,p);const[J,V]=S.useReducer(y.v,void 0,y.v),l=y.C(),v=y.h(),m=[],I=c=>{const d=z(c);return _.jsx(je,{ee:D.F,te:c,oe:y.k(c),ne:y.I(c),re:x,Z:d,ie:C,se:j[L]},ze(d,c))};if(Z((()=>{j[L]=!1;const c=y.O(1,(M=>{M?ye.flushSync(V):V()})),d=y.O(4,(()=>{q[L]&&q[L](y.M())})),g=y.O(8,(()=>{H[L]&&H[L]()})),R=M=>{D.U(M),A.D(M)};return E?ue((()=>{E[L]&&R(E[L])})):R(h[L].parentElement),()=>{c(),d(),g(),D.P(),A.P()}}),[]),Z((()=>{A.j()}),[J]),S.useImperativeHandle(T,(()=>({get cache(){return y.m()},get scrollOffset(){return y.M()},get scrollSize(){return Ee(y)},get viewportSize(){return y.p()},findStartIndex:y.S,findEndIndex:y.$,getItemOffset:y.k,getItemSize:y.R,scrollToIndex:A.Y,scrollTo:A.V,scrollBy:A.X})),[]),f){const c=new Set(f);for(let[d,g]=y._(r);d<=g;d++)c.add(d);le([...c]).forEach((d=>{m.push(I(d))}))}else for(let[c,d]=y._(r);c<=d;c++)m.push(I(c));return _.jsx(a,{ref:h,style:{contain:"size paint style",overflowAnchor:"none",overflow:"clip",flex:"none",position:"relative",width:C?v:"100%",height:C?"100%":v,pointerEvents:l?"none":void 0},children:m})})),_e=S.forwardRef((({children:e,data:t,bufferSize:r,itemSize:n,shift:s,horizontal:u,keepMounted:f,reverse:i,cache:p,ssrCount:o,item:a,onScroll:x,onScrollEnd:E,style:w,...b},T)=>{const z=S.useRef(null),k=i&&!u;let h=_.jsx(Ce,{ref:T,scrollRef:k?z:void 0,data:t,bufferSize:r,itemSize:n,shift:s,horizontal:u,keepMounted:f,cache:p,ssrCount:o,item:a,onScroll:x,onScrollEnd:E,children:e});return k&&(h=_.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:h})),_.jsx("div",{ref:z,...b,style:{display:u?"inline-block":"block",[u?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...w},children:h})})),He=S.memo(({count:e,Component:t,handle:r})=>{const n=S.useRef(null);return S.useImperativeHandle(r,()=>({scrollToIndex:s=>{n.current?.scrollToIndex(s)}})),_.jsx(_e,{ref:n,children:Array.from({length:e}).map((s,u)=>_.jsx(t,{index:u},u))})});He.__docgenInfo={description:"",methods:[{name:"scrollToIndex",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null}],returns:null}],displayName:"VirtuaList",props:{count:{required:!0,tsType:{name:"number"},description:""},Component:{required:!0,tsType:{name:"SimpleItem"},description:""},handle:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:"{ scrollToIndex: (index: number) => void }",signature:{properties:[{key:"scrollToIndex",value:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<ListHandle>"},description:""}}};export{He as V};
