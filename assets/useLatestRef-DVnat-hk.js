import{r as j}from"./iframe-TMlQV0rA.js";const V=null,{min:T,max:E,abs:ae,floor:Re}=Math,ce=(e,t,s)=>T(s,E(t,e)),ve=e=>[...e].sort((t,s)=>t-s),Ke=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},X=()=>{let e,t;return[new Promise((n,r)=>{e=n,t=r}),e,t]},ie=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},D=-1,U=(e,t,s)=>{const n=s?"unshift":"push";for(let r=0;r<t;r++)e[n](D);return e},Q=(e,t)=>{const s=e._sizes[t];return s===D?e._defaultItemSize:s},Te=(e,t,s)=>{const n=e._sizes[t]===D;return e._sizes[t]=s,e._computedOffsetIndex=T(t,e._computedOffsetIndex),n},H=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=Q(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},ye=e=>e._length?H(e,e._length-1)+Q(e,e._length-1):0,N=(e,t,s=0,n=e._length-1)=>{for(;s<=n;){const r=Re((s+n)/2),m=H(e,r);if(m<=t){if(m+Q(e,r)>t)return r;s=r+1}else n=r-1}return ce(s,0,e._length-1)},Ce=(e,t,s,n)=>{if(n=T(n,e._length-1),H(e,n)<=t){const r=N(e,t+s,n);return[N(e,t,n,r),r]}else{const r=N(e,t,void 0,n);return[r,N(e,t+s,r)]}},Ae=(e,t)=>{let s=0;const n=[];e._sizes.forEach((_,f)=>{_!==D&&(n.push(_),f<t&&s++)}),e._computedOffsetIndex=-1;const r=ve(n),m=r.length,$=m/2|0,S=m%2===0?(r[$-1]+r[$])/2:r[$],l=e._defaultItemSize;return((e._defaultItemSize=S)-l)*E(t-s,0)},Ne=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?U(s[0].slice(0,T(e,s[0].length)),E(0,e-s[0].length)):U([],e),_length:e,_computedOffsetIndex:-1,_offsets:U([],e)}),ke=e=>[e._sizes.slice(),e._defaultItemSize],me=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:T(t-1,e._computedOffsetIndex),e._length=t,n>0?(U(e._offsets,n),U(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((r,m)=>r-(m===D?e._defaultItemSize:m),0))},pe=typeof window<"u",ge=()=>document.documentElement,P=e=>e.ownerDocument,x=e=>e.defaultView,Ie=ie(()=>pe?getComputedStyle(ge()).direction==="rtl":!1),ze=ie(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),be=ie(()=>"scrollBehavior"in ge().style),Ve=2147483647,J=0,_e=1,$e=2,G=0,Me=1,ne=2,oe=1,Oe=2,k=3,K=4,De=5,Ee=6,le=7,fe=8,A=1,q=2,Je=4,We=8,Be=e=>E(e.$getTotalSize(),e.$getViewportSize()),he=e=>!!e.$getViewportSize(),Fe=(e,t=40,s=4,n=0,r,m=!1)=>{let $=!!n,S=1,l=0,_=0,f=0,o=0,u=0,d=0,a=J,i=G,c=$?[0,E(n-1,0)]:V,g=[0,0],z=0;const p=Ne(e,t,r),y=new Set,R=()=>f-_,L=()=>R()+u+o,C=I=>Ce(p,I,l,g[0]),ee=()=>ye(p),de=I=>H(p,I)-u,B=I=>Q(p,I),te=I=>{I&&(ze()&&a!==J?u+=I:o+=I)};return{$getStateVersion:()=>S,$getCacheSnapshot:()=>ke(p),$getRange:()=>{let I,b;return d?[I,b]=g:([I,b]=g=C(E(0,L())),c&&(I=T(I,c[0]),b=E(b,c[1]))),a!==_e&&(I-=E(0,s)),a!==$e&&(b+=E(0,s)),[E(I,0),T(b,p._length-1)]},$findStartIndex:()=>N(p,L()),$findEndIndex:()=>N(p,L()+l),$isUnmeasuredItem:I=>p._sizes[I]===D,_hasUnmeasuredItemsInFrozenRange:()=>c?p._sizes.slice(E(0,c[0]-1),T(p._length-1,c[1]+1)+1).includes(D):!1,$getItemOffset:de,$getItemSize:B,$getItemsLength:()=>p._length,$getScrollOffset:()=>f,$isScrolling:()=>a!==J,$getViewportSize:()=>l,$getStartSpacerSize:()=>_,$getTotalSize:ee,_flushJump:()=>(d=o,o=0,[d,i===ne||R()+l>=ee()]),$subscribe:(I,b)=>{const W=[I,b];return y.add(W),()=>{y.delete(W)}},$update:(I,b)=>{let W,se,w=0;switch(I){case oe:{const v=d;d=0;const h=b-f,O=ae(h);!(v&&O<ae(v)+1)&&i===G&&(a=h<0?$e:_e),$&&(c=V,$=!1),f=b,w=Je;const Y=R();Y>=-l&&Y<=ee()&&(w+=A,se=O>l);break}case Oe:{w=We,a!==J&&(W=!0,w+=A),a=J,i=G,c=V;break}case k:{const v=b.filter(([h,O])=>p._sizes[h]!==O);if(!v.length)break;te(v.reduce((h,[O,F])=>((i===ne||(c?!$&&O<c[0]:de(O)+(a===J&&i===G?B(O):0)<R()))&&(h+=F-B(O)),h),0));for(const[h,O]of v){const F=B(h),Y=Te(p,h,O);m&&(z+=Y?O:O-F)}m&&l&&z>l&&(te(Ae(p,N(p,L()))),m=!1),w=A+q,se=!0;break}case K:{l!==b&&(l=b,w=A+q);break}case De:{b[1]?(te(me(p,b[0],!0)),i=ne,w=A):(me(p,b[0]),w=A);break}case Ee:{_=b;break}case le:{i=Me;break}case fe:{c=C(b),w=A;break}}w&&(S=(S&Ve)+1,W&&u&&(o+=u,u=0),y.forEach(([v,h])=>{w&v&&h(se)}))}}},Z=setTimeout,Ue=(e,t)=>{let s;const n=()=>{s!=V&&clearTimeout(s)},r=()=>{n(),s=Z(()=>{s=V,e()},t)};return r._cancel=n,r},M=(e,t)=>t&&Ie()?-e:e,we=(e,t,s,n,r,m)=>{const $=Date.now;let S=0,l=!1,_=!1,f=!1,o=!1;const u=Ue(()=>{if(l||_){l=!1,u();return}f=!1,e.$update(Oe)},150),d=()=>{S=$(),f&&(o=!0),m&&e.$update(Ee,m()),e.$update(oe,n()),u()},a=g=>{if(l||!e.$isScrolling()||g.ctrlKey)return;const z=$()-S;150>z&&50<z&&(s?g.deltaX:g.deltaY)&&(l=!0)},i=()=>{_=!0,f=o=!1},c=()=>{_=!1,ze()&&(f=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",a,{passive:!0}),t.addEventListener("touchstart",i,{passive:!0}),t.addEventListener("touchend",c,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",a),t.removeEventListener("touchstart",i),t.removeEventListener("touchend",c),u._cancel()},_fixScrollJump:()=>{const[g,z]=e._flushJump();g&&(r(M(g,s),z,o),o=!1,z&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(oe,n()))}}},Se=(e,t)=>{let s,n,r;const[m,$,S]=X(),l=t?"scrollLeft":"scrollTop",_=t?"overflowX":"overflowY",f=async(o,u)=>{await m,r&&r();const d=()=>{const[a,i,c]=X();return r=c,he(e)&&Z(c,150),[a,e.$subscribe(q,()=>{i()})]};if(u&&be()){for(;e.$update(fe,o()),!!e._hasUnmeasuredItemsInFrozenRange();){const[a,i]=d();try{await a}catch{return}finally{i()}}s.scrollTo({[t?"left":"top"]:M(o(),t),behavior:"smooth"})}else for(;;){const[a,i]=d();try{s[l]=M(o(),t),e.$update(le),await a}catch{return}finally{i()}}};return{$observe(o){s=o,n=we(e,o,t,()=>M(o[l],t),(u,d,a)=>{if(a){const i=o.style,c=i[_];i[_]="hidden",Z(()=>{i[_]=c})}d?(o[l]=e.$getScrollOffset()+u,r&&r()):o[l]+=u}),$()},$dispose(){n&&n._dispose(),S()},$scrollTo(o){f(()=>o)},$scrollBy(o){o+=e.$getScrollOffset(),f(()=>o)},$scrollToIndex(o,{align:u,smooth:d,offset:a=0}={}){if(o=ce(o,0,e.$getItemsLength()-1),u==="nearest"){const i=e.$getItemOffset(o),c=e.$getScrollOffset();if(i<c)u="start";else if(i+e.$getItemSize(o)>c+e.$getViewportSize())u="end";else return}f(()=>a+e.$getStartSpacerSize()+e.$getItemOffset(o)+(u==="end"?e.$getItemSize(o)-e.$getViewportSize():u==="center"?(e.$getItemSize(o)-e.$getViewportSize())/2:0),d)},$fixScrollJump:()=>{n&&n._fixScrollJump()}}},Ye=(e,t)=>{let s,n,r;const[m,$,S]=X(),l=(f,o,u,d,a=0)=>{const i=d?"offsetLeft":"offsetTop",c=a+(d&&Ie()?u.innerWidth-f[i]-f.offsetWidth:f[i]),g=f.offsetParent;return f===o||!g?c:l(g,o,u,d,c)},_=async(f,o)=>{await m,r&&r();const u=()=>{const[a,i,c]=X();return r=c,he(e)&&Z(c,150),[a,e.$subscribe(q,()=>{i()})]},d=x(P(s));if(o&&be()){for(;e.$update(fe,f()),!!e._hasUnmeasuredItemsInFrozenRange();){const[a,i]=u();try{await a}catch{return}finally{i()}}d.scroll({[t?"left":"top"]:M(f(),t),behavior:"smooth"})}else for(;;){const[a,i]=u();try{d.scroll({[t?"left":"top"]:M(f(),t)}),e.$update(le),await a}catch{return}finally{i()}}};return{$observe(f){s=f;const o=t?"scrollX":"scrollY",u=P(f),d=x(u),a=u.body;n=we(e,d,t,()=>M(d[o],t),(i,c)=>{c?d.scroll({[t?"left":"top"]:e.$getScrollOffset()+i}):d.scrollBy(t?i:0,t?0:i)},()=>l(f,a,d,t)),$()},$dispose(){n&&n._dispose(),s=void 0,S()},$fixScrollJump:()=>{n&&n._fixScrollJump()},$scrollToIndex(f,{align:o,smooth:u,offset:d=0}={}){if(!s)return;if(f=ce(f,0,e.$getItemsLength()-1),o==="nearest"){const z=e.$getItemOffset(f),p=e.$getScrollOffset();if(z<p)o="start";else if(z+e.$getItemSize(f)>p+e.$getViewportSize())o="end";else return}const a=P(s),i=x(a),c=a.documentElement,g=()=>e.$getViewportSize()-(t?c.clientWidth:c.clientHeight);_(()=>d+l(s,a.body,i,t)+e.$getItemOffset(f)+(o==="end"?e.$getItemSize(f)-(e.$getViewportSize()-g()):o==="center"?(e.$getItemSize(f)-(e.$getViewportSize()-g()))/2:0),u)}}},Ge=(e,t)=>{const s=Se(e,!1),n=Se(t,!0);return{$observe(r){s.$observe(r),n.$observe(r)},$dispose(){s.$dispose(),n.$dispose()},$scrollTo(r,m){s.$scrollTo(m),n.$scrollTo(r)},$scrollBy(r,m){s.$scrollBy(m),n.$scrollBy(r)},$scrollToIndex(r,m){s.$scrollToIndex(m),n.$scrollToIndex(r)},$fixScrollJump(){s.$fixScrollJump(),n.$fixScrollJump()}}},ue=e=>{let t;return{_observe(s){(t||(t=new(x(P(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},je=(e,t)=>{let s;const n=t?"width":"height",r=new WeakMap,m=ue($=>{const S=[];for(const{target:l,contentRect:_}of $)if(l.offsetParent)if(l===s)e.$update(K,_[n]);else{const f=r.get(l);f!=V&&S.push([f,_[n]])}S.length&&e.$update(k,S)});return{$observeRoot($){m._observe(s=$)},$observeItem:($,S)=>(r.set($,S),m._observe($),()=>{r.delete($),m._unobserve($)}),$dispose:m._dispose}},Xe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,m=ue(S=>{const l=[];for(const{target:_,contentRect:f}of S){if(!_.offsetParent)continue;const o=r.get(_);o!=V&&l.push([o,f[s]])}l.length&&e.$update(k,l)});let $;return{$observeRoot(S){const l=x(P(S)),_=()=>{e.$update(K,l[n])};l.addEventListener("resize",_),_(),$=()=>{l.removeEventListener("resize",_)}},$observeItem:(S,l)=>(r.set(S,l),m._observe(S),()=>{r.delete(S),m._unobserve(S)}),$dispose(){$&&$(),m._dispose()}}},qe=(e,t)=>{let s;const n="height",r="width",m=new WeakMap,$=new Set,S=new Set,l=new Map,_=(o,u)=>`${o}-${u}`,f=ue(o=>{const u=new Set,d=new Set;for(const{target:a,contentRect:i}of o)if(a.offsetParent)if(a===s)e.$update(K,i[n]),t.$update(K,i[r]);else{const c=m.get(a);if(c){const[g,z]=c,p=_(g,z),y=l.get(p),R=[i[n],i[r]];let L,C;y?(y[0]!==R[0]&&(L=!0),y[1]!==R[1]&&(C=!0)):L=C=!0,L&&u.add(g),C&&d.add(z),(L||C)&&l.set(p,R)}}if(u.size){const a=[];u.forEach(i=>{let c=0;S.forEach(g=>{const z=l.get(_(i,g));z&&(c=E(c,z[0]))}),c&&a.push([i,c])}),e.$update(k,a)}if(d.size){const a=[];d.forEach(i=>{let c=0;$.forEach(g=>{const z=l.get(_(g,i));z&&(c=E(c,z[1]))}),c&&a.push([i,c])}),t.$update(k,a)}});return{$observeRoot(o){f._observe(s=o)},$observeItem(o,u,d){return m.set(o,[u,d]),$.add(u),S.add(d),f._observe(o),()=>{m.delete(o),f._unobserve(o)}},$resizeCols(o){for(const[u]of o)for(let d=0;d<e.$getItemsLength();d++)l.delete(_(d,u));t.$update(k,o)},$resizeRows(o){for(const[u]of o)for(let d=0;d<t.$getItemsLength();d++)l.delete(_(u,d));e.$update(k,o)},$dispose:f._dispose}},Pe=pe?j.useLayoutEffect:j.useEffect,re="current",Le=(e,t)=>{if(Array.isArray(e))for(const s of e)Le(s,t);else e==null||typeof e=="boolean"||t.push(e)},Ze=e=>{const t=[];return Le(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},He=e=>{const t=j.useRef(null);return t[re]||(t[re]=e())},et=e=>{const t=j.useRef(e);return Pe(()=>{t[re]=e},[e]),t};export{De as A,A as U,et as a,Pe as b,Je as c,We as d,Fe as e,qe as f,Be as g,Ge as h,Ie as i,Ee as j,je as k,Se as l,Ke as m,Qe as n,Xe as o,Ye as p,Ze as q,re as r,ve as s,He as u};
