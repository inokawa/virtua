import{j as O}from"./jsx-runtime-DR9Q75dM.js";import{r as n}from"./index-DRjF_FHU.js";import{b as A,a as B,A as F,j as K,u as L,r,U as J,c as M,d as Q,m as W,g as X,s as Y,e as Z,k as ee,l as te,n as se}from"./useLatestRef-BsCZ8dmY.js";import{u as re,L as oe}from"./useChildren-DUz-hS9Y.js";import{r as le}from"./index-DU7l7UOc.js";const ne=n.forwardRef(({children:x,count:y,overscan:N,itemSize:S,shift:C,horizontal:H,keepMounted:p,cache:k,startMargin:g=0,ssrCount:$,as:c="div",item:j="div",scrollRef:I,onScroll:w,onScrollEnd:U},D)=>{c=c;const[P,u]=re(x,y),E=n.useRef(null),_=n.useRef(!!$),h=A(w),b=A(U),[e,f,o,d]=B(()=>{const t=!!H,s=Z(u,S,N,$,k,!S);return[s,ee(s,t),te(s,t),t]});u!==e.$getItemsLength()&&e.$update(F,[u,C]),g!==e.$getStartSpacerSize()&&e.$update(K,g);const[q,z]=n.useReducer(e.$getStateVersion,void 0,e.$getStateVersion),[v,T]=e.$getRange(),G=e.$isScrolling(),V=e.$getTotalSize(),i=[],m=t=>{const s=P(t);return O.jsx(oe,{_resizer:f.$observeItem,_index:t,_offset:e.$getItemOffset(t),_hide:e.$isUnmeasuredItem(t),_as:j,_children:s,_isHorizontal:d,_isSSR:_[r]},se(s,t))};L(()=>{_[r]=!1;const t=e.$subscribe(J,a=>{a?le.flushSync(z):z()}),s=e.$subscribe(M,()=>{h[r]&&h[r](e.$getScrollOffset())}),l=e.$subscribe(Q,()=>{b[r]&&b[r]()}),R=a=>{f.$observeRoot(a),o.$observe(a)};return I?W(()=>R(I[r])):R(E[r].parentElement),()=>{t(),s(),l(),f.$dispose(),o.$dispose()}},[]),L(()=>{o.$fixScrollJump()},[q]),n.useImperativeHandle(D,()=>({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return X(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:o.$scrollToIndex,scrollTo:o.$scrollTo,scrollBy:o.$scrollBy}),[]);for(let t=v,s=T;t<=s;t++)i.push(m(t));if(p){const t=[],s=[];Y(p).forEach(l=>{l<v&&t.push(m(l)),l>T&&s.push(m(l))}),i.unshift(...t),i.push(...s)}return O.jsx(c,{ref:E,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?V:"100%",height:d?"100%":V,pointerEvents:G?"none":void 0},children:i})});ne.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{startMargin:{defaultValue:{value:"0",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ne as V};
