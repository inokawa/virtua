import{r as G}from"./index-DRjF_FHU.js";const V=null,{min:T,max:E,abs:de,floor:ve}=Math,oe=(e,t,s)=>T(s,E(t,e)),Te=e=>[...e].sort((t,s)=>t-s),pe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},re=e=>{let t,s;return()=>(t||(t=!0,s=e()),s)},N=-1,W=(e,t,s)=>{const o=s?"unshift":"push";for(let r=0;r<t;r++)e[o](N);return e},Q=(e,t)=>{const s=e._sizes[t];return s===N?e._defaultItemSize:s},ye=(e,t,s)=>{const o=e._sizes[t]===N;return e._sizes[t]=s,e._computedOffsetIndex=T(t,e._computedOffsetIndex),o},j=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=Q(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},Ce=e=>e._length?j(e,e._length-1)+Q(e,e._length-1):0,A=(e,t,s=0,o=e._length-1)=>{for(;s<=o;){const r=ve((s+o)/2),f=j(e,r);if(f<=t){if(f+Q(e,r)>t)return r;s=r+1}else o=r-1}return oe(s,0,e._length-1)},Ae=(e,t,s,o)=>{if(o=T(o,e._length-1),j(e,o)<=t){const r=A(e,t+s,o);return[A(e,t,o,r),r]}else{const r=A(e,t,void 0,o);return[r,A(e,t+s,r)]}},Ve=(e,t)=>{let s=0;const o=[];e._sizes.forEach((l,d)=>{l!==N&&(o.push(l),d<t&&s++)}),e._computedOffsetIndex=-1;const r=Te(o),f=r.length,m=f/2|0,c=f%2===0?(r[m-1]+r[m])/2:r[m],n=e._defaultItemSize;return((e._defaultItemSize=c)-n)*E(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?W(s[0].slice(0,T(e,s[0].length)),E(0,e-s[0].length)):W([],e),_length:e,_computedOffsetIndex:-1,_offsets:W([],e)}),Ne=e=>[e._sizes.slice(),e._defaultItemSize],ae=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:T(t-1,e._computedOffsetIndex),e._length=t,o>0?(W(e._offsets,o),W(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((r,f)=>r-(f===N?e._defaultItemSize:f),0))},ge=typeof window<"u",Ie=()=>document.documentElement,U=e=>e.ownerDocument,P=e=>e.defaultView,be=re(()=>ge?getComputedStyle(Ie()).direction==="rtl":!1),ze=re(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Oe=re(()=>"scrollBehavior"in Ie().style),M=0,me=1,_e=2,q=0,Me=1,se=2,ne=1,Ee=2,x=3,K=4,Je=5,he=6,ce=7,ie=8,C=1,X=2,De=4,We=8,xe=e=>E(e.$getTotalSize(),e.$getViewportSize()),we=e=>!!e.$getViewportSize(),Ke=(e,t=40,s=4,o=0,r,f=!1)=>{let m=!!o,c=[],n=0,l=0,d=0,i=0,u=0,a=0,p=0,S=M,_=q,$=m?[0,E(o-1,0)]:V,z=[0,0],J=0;const g=ke(e,t,r),y=new Set,L=()=>d-l,R=()=>L()+a+u,ue=I=>Ae(g,I,n,z[0]),H=()=>Ce(g),fe=I=>j(g,I)-a,B=I=>Q(g,I),ee=I=>{I&&(ze()&&S!==M?a+=I:(u+=I,i++))};return{$getStateVersion:()=>c,$getCacheSnapshot:()=>Ne(g),$getRange:()=>{let I,b;return p?[I,b]=z:([I,b]=z=ue(E(0,R())),$&&(I=T(I,$[0]),b=E(b,$[1]))),S!==me&&(I-=E(0,s)),S!==_e&&(b+=E(0,s)),[E(I,0),T(b,g._length-1)]},$findStartIndex:()=>A(g,R()),$findEndIndex:()=>A(g,R()+n),$isUnmeasuredItem:I=>g._sizes[I]===N,_hasUnmeasuredItemsInFrozenRange:()=>$?g._sizes.slice(E(0,$[0]-1),T(g._length-1,$[1]+1)+1).includes(N):!1,$getItemOffset:fe,$getItemSize:B,$getItemsLength:()=>g._length,$getScrollOffset:()=>d,$isScrolling:()=>S!==M,$getViewportSize:()=>n,$getStartSpacerSize:()=>l,$getTotalSize:H,$getJumpCount:()=>i,_flushJump:()=>(p=u,u=0,[p,_===se||L()+n>=H()]),$subscribe:(I,b)=>{const D=[I,b];return y.add(D),()=>{y.delete(D)}},$update:(I,b)=>{let D,te,w=0;switch(I){case ne:{const v=p;p=0;const h=b-d,O=de(h);!(v&&O<de(v)+1)&&_===q&&(S=h<0?_e:me),m&&($=V,m=!1),d=b,w=De;const Y=L();Y>=-n&&Y<=H()&&(w+=C,te=O>n);break}case Ee:{w=We,S!==M&&(D=!0,w+=C),S=M,_=q,$=V;break}case x:{const v=b.filter(([h,O])=>g._sizes[h]!==O);if(!v.length)break;ee(v.reduce((h,[O,F])=>((_===se||($?!m&&O<$[0]:fe(O)+(S===M&&_===q?B(O):0)<L()))&&(h+=F-B(O)),h),0));for(const[h,O]of v){const F=B(h),Y=ye(g,h,O);f&&(J+=Y?O:O-F)}f&&n&&J>n&&(ee(Ve(g,A(g,R()))),f=!1),w=C+X,te=!0;break}case K:{n!==b&&(n=b,w=C+X);break}case Je:{b[1]?(ee(ae(g,b[0],!0)),_=se,w=C):(ae(g,b[0]),w=C);break}case he:{l=b;break}case ce:{_=Me;break}case ie:{$=ue(b),w=C;break}}w&&(c=[],D&&a&&(u+=a,a=0,i++),y.forEach(([v,h])=>{w&v&&h(te)}))}}},Z=setTimeout,Ue=(e,t)=>{let s;const o=()=>{s!=V&&clearTimeout(s)},r=()=>{o(),s=Z(()=>{s=V,e()},t)};return r._cancel=o,r},k=(e,t)=>t&&be()?-e:e,Le=(e,t,s,o,r,f)=>{const m=Date.now;let c=0,n=!1,l=!1,d=!1,i=!1;const u=Ue(()=>{if(n||l){n=!1,u();return}d=!1,e.$update(Ee)},150),a=()=>{c=m(),d&&(i=!0),f&&e.$update(he,f()),e.$update(ne,o()),u()},p=$=>{if(n||!e.$isScrolling()||$.ctrlKey)return;const z=m()-c;150>z&&50<z&&(s?$.deltaX:$.deltaY)&&(n=!0)},S=()=>{l=!0,d=i=!1},_=()=>{l=!1,ze()&&(d=!0)};return t.addEventListener("scroll",a),t.addEventListener("wheel",p,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",_,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",a),t.removeEventListener("wheel",p),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",_),u._cancel()},_fixScrollJump:()=>{const[$,z]=e._flushJump();$&&(r(k($,s),z,i),i=!1,z&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(ne,o()))}}},Se=(e,t)=>{let s,o,r;const f=t?"scrollLeft":"scrollTop",m=t?"overflowX":"overflowY",c=async(n,l)=>{if(!s){pe(()=>c(n,l));return}r&&r();const d=()=>{let i;return[new Promise((u,a)=>{i=u,r=a,we(e)&&Z(a,150)}),e.$subscribe(X,()=>{i&&i()})]};if(l&&Oe()){for(;e.$update(ie,n()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,u]=d();try{await i}catch{return}finally{u()}}s.scrollTo({[t?"left":"top"]:k(n(),t),behavior:"smooth"})}else for(;;){const[i,u]=d();try{s[f]=k(n(),t),e.$update(ce),await i}catch{return}finally{u()}}};return{$observe(n){s=n,o=Le(e,n,t,()=>k(n[f],t),(l,d,i)=>{if(i){const u=n.style,a=u[m];u[m]="hidden",Z(()=>{u[m]=a})}d?(n[f]=e.$getScrollOffset()+l,r&&r()):n[f]+=l})},$dispose(){o&&o._dispose()},$scrollTo(n){c(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),c(()=>n)},$scrollToIndex(n,{align:l,smooth:d,offset:i=0}={}){if(n=oe(n,0,e.$getItemsLength()-1),l==="nearest"){const u=e.$getItemOffset(n),a=e.$getScrollOffset();if(u<a)l="start";else if(u+e.$getItemSize(n)>a+e.$getViewportSize())l="end";else return}c(()=>i+e.$getStartSpacerSize()+e.$getItemOffset(n)+(l==="end"?e.$getItemSize(n)-e.$getViewportSize():l==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),d)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Be=(e,t)=>{let s,o,r;const f=(c,n,l,d,i=0)=>{const u=d?"offsetLeft":"offsetTop",a=i+(d&&be()?l.innerWidth-c[u]-c.offsetWidth:c[u]),p=c.offsetParent;return c===n||!p?a:f(p,n,l,d,a)},m=async(c,n)=>{if(!s){pe(()=>m(c,n));return}r&&r();const l=()=>{let i;return[new Promise((u,a)=>{i=u,r=a,we(e)&&Z(a,150)}),e.$subscribe(X,()=>{i&&i()})]},d=P(U(s));if(n&&Oe()){for(;e.$update(ie,c()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,u]=l();try{await i}catch{return}finally{u()}}d.scroll({[t?"left":"top"]:k(c(),t),behavior:"smooth"})}else for(;;){const[i,u]=l();try{d.scroll({[t?"left":"top"]:k(c(),t)}),e.$update(ce),await i}catch{return}finally{u()}}};return{$observe(c){s=c;const n=t?"scrollX":"scrollY",l=U(c),d=P(l),i=l.body;o=Le(e,d,t,()=>k(d[n],t),(u,a)=>{a?d.scroll({[t?"left":"top"]:e.$getScrollOffset()+u}):d.scrollBy(t?u:0,t?0:u)},()=>f(c,i,d,t))},$dispose(){o&&o._dispose(),s=void 0},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(c,{align:n,smooth:l,offset:d=0}={}){if(!s)return;if(c=oe(c,0,e.$getItemsLength()-1),n==="nearest"){const S=e.$getItemOffset(c),_=e.$getScrollOffset();if(S<_)n="start";else if(S+e.$getItemSize(c)>_+e.$getViewportSize())n="end";else return}const i=U(s),u=P(i),a=i.documentElement,p=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);m(()=>d+f(s,i.body,u,t)+e.$getItemOffset(c)+(n==="end"?e.$getItemSize(c)-(e.$getViewportSize()-p()):n==="center"?(e.$getItemSize(c)-(e.$getViewportSize()-p()))/2:0),l)}}},Fe=(e,t)=>{const s=Se(e,!1),o=Se(t,!0);return{$observe(r){s.$observe(r),o.$observe(r)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(r,f){s.$scrollTo(f),o.$scrollTo(r)},$scrollBy(r,f){s.$scrollBy(f),o.$scrollBy(r)},$scrollToIndex(r,f){s.$scrollToIndex(f),o.$scrollToIndex(r)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},le=e=>{let t;return{_observe(s){(t||(t=new(P(U(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ye=(e,t)=>{let s;const o=t?"width":"height",r=new WeakMap,f=le(m=>{const c=[];for(const{target:n,contentRect:l}of m)if(n.offsetParent)if(n===s)e.$update(K,l[o]);else{const d=r.get(n);d!=V&&c.push([d,l[o]])}c.length&&e.$update(x,c)});return{$observeRoot(m){f._observe(s=m)},$observeItem:(m,c)=>(r.set(m,c),f._observe(m),()=>{r.delete(m),f._unobserve(m)}),$dispose:f._dispose}},qe=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,f=le(c=>{const n=[];for(const{target:l,contentRect:d}of c){if(!l.offsetParent)continue;const i=r.get(l);i!=V&&n.push([i,d[s]])}n.length&&e.$update(x,n)});let m;return{$observeRoot(c){const n=P(U(c)),l=()=>{e.$update(K,n[o])};n.addEventListener("resize",l),l(),m=()=>{n.removeEventListener("resize",l)}},$observeItem:(c,n)=>(r.set(c,n),f._observe(c),()=>{r.delete(c),f._unobserve(c)}),$dispose(){m&&m(),f._dispose()}}},Ge=(e,t)=>{let s;const o="height",r="width",f=new WeakMap,m=new Set,c=new Set,n=new Map,l=(i,u)=>`${i}-${u}`,d=le(i=>{const u=new Set,a=new Set;for(const{target:p,contentRect:S}of i)if(p.offsetParent)if(p===s)e.$update(K,S[o]),t.$update(K,S[r]);else{const _=f.get(p);if(_){const[$,z]=_,J=l($,z),g=n.get(J),y=[S[o],S[r]];let L,R;g?(g[0]!==y[0]&&(L=!0),g[1]!==y[1]&&(R=!0)):L=R=!0,L&&u.add($),R&&a.add(z),(L||R)&&n.set(J,y)}}if(u.size){const p=[];u.forEach(S=>{let _=0;c.forEach($=>{const z=n.get(l(S,$));z&&(_=E(_,z[0]))}),_&&p.push([S,_])}),e.$update(x,p)}if(a.size){const p=[];a.forEach(S=>{let _=0;m.forEach($=>{const z=n.get(l($,S));z&&(_=E(_,z[1]))}),_&&p.push([S,_])}),t.$update(x,p)}});return{$observeRoot(i){d._observe(s=i)},$observeItem(i,u,a){return f.set(i,[u,a]),m.add(u),c.add(a),d._observe(i),()=>{f.delete(i),d._unobserve(i)}},$dispose:d._dispose}},Xe=ge?G.useLayoutEffect:G.useEffect,$e="current",Re=(e,t)=>{if(Array.isArray(e))for(const s of e)Re(s,t);else e==null||typeof e=="boolean"||t.push(e)},Ze=e=>{const t=[];return Re(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},je=e=>{const t=G.useRef();return t[$e]||(t[$e]=e())},He=e=>G.useReducer(e.$getStateVersion,void 0,e.$getStateVersion)[1];export{Je as A,C as U,je as a,He as b,Ke as c,Ge as d,Fe as e,he as f,xe as g,De as h,be as i,We as j,Ye as k,Se as l,pe as m,Qe as n,qe as o,Be as p,Ze as q,$e as r,Te as s,Xe as u};
