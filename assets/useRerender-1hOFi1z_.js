import{r as X}from"./index-DRjF_FHU.js";const T=null,{min:C,max:E,abs:_e,floor:Te}=Math,ye=Array.isArray,Z=setTimeout,re=(e,t,s)=>C(s,E(t,e)),Ce=e=>[...e].sort((t,s)=>t-s),Ae=e=>{const t=Ce(e),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},ge=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},Ne=(e,t)=>{let s;const r=()=>{s!=T&&clearTimeout(s)},o=()=>{r(),s=Z(()=>{s=T,e()},t)};return o._cancel=r,o},oe=e=>{let t,s;return()=>(t||(t=!0,s=e()),s)},k=-1,U=(e,t,s)=>{const r=s?"unshift":"push";for(let o=0;o<t;o++)e[r](k);return e},Q=(e,t)=>{const s=e._sizes[t];return s===k?e._defaultItemSize:s},Ve=(e,t,s)=>{const r=e._sizes[t]===k;return e._sizes[t]=s,e._computedOffsetIndex=C(t,e._computedOffsetIndex),r},j=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,r=e._offsets[s];for(;s<t;)r+=Q(e,s),e._offsets[++s]=r;return e._computedOffsetIndex=t,r},ke=e=>e._length?j(e,e._length-1)+Q(e,e._length-1):0,N=(e,t,s=0,r=e._length-1)=>{for(;s<=r;){const o=Te((s+r)/2),f=j(e,o);if(f<=t){if(f+Q(e,o)>t)return o;s=o+1}else r=o-1}return re(s,0,e._length-1)},Me=(e,t,s,r)=>{if(r=C(r,e._length-1),j(e,r)<=t){const o=N(e,t+s,r);return[N(e,t,r,o),o]}else{const o=N(e,t,void 0,r);return[o,N(e,t+s,o)]}},Je=(e,t)=>{let s=0;const r=e._defaultItemSize,o=[];return e._sizes.forEach((f,a)=>{f!==k&&(o.push(f),a<t&&s++)}),e._computedOffsetIndex=-1,((e._defaultItemSize=Ae(o))-r)*E(t-s,0)},De=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?U(s[0].slice(0,C(e,s[0].length)),E(0,e-s[0].length)):U([],e),_length:e,_computedOffsetIndex:-1,_offsets:U([],e)}),We=e=>[e._sizes.slice(),e._defaultItemSize],de=(e,t,s)=>{const r=t-e._length;return e._computedOffsetIndex=s?-1:C(t-1,e._computedOffsetIndex),e._length=t,r>0?(U(e._offsets,r),U(e._sizes,r,s),e._defaultItemSize*r):(e._offsets.splice(r),(s?e._sizes.splice(0,-r):e._sizes.splice(r)).reduce((o,f)=>o-(f===k?e._defaultItemSize:f),0))},Ie=typeof window<"u",be=()=>document.documentElement,P=e=>e.ownerDocument,x=e=>e.defaultView,ze=oe(()=>Ie?getComputedStyle(be()).direction==="rtl":!1),Oe=oe(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),he=oe(()=>"scrollBehavior"in be().style),M=0,ae=1,me=2,G=0,Ue=1,se=2,ne=1,Ee=2,K=3,B=4,Pe=5,we=6,ce=7,ie=8,J=1,$=2,xe=4,Ke=8,Fe=e=>E(e._getTotalSize(),e._getViewportSize()),Le=e=>!!e._getViewportSize(),Ye=(e,t=40,s=4,r=0,o,f=!1)=>{let a=!!r,c=[],n=0,u=0,_=0,i=0,l=0,d=0,m=0,g=M,S=G,p=a?[0,E(r-1,0)]:T,z=[0,0],D=0;const I=De(e,t,o),A=new Set,v=()=>_-u,R=()=>v()+d+l,ue=b=>Me(I,b,n,z[0]),H=()=>ke(I),fe=b=>j(I,b)-d,F=b=>Q(I,b),ee=b=>{b&&(Oe()&&g!==M?d+=b:(l+=b,i++))};return{_getStateVersion:()=>c,_getCacheSnapshot:()=>We(I),_getRange:()=>{if(m)return z;let[b,O]=ue(E(0,R()));return p&&(b=C(b,p[0]),O=E(O,p[1])),g!==ae&&(b-=E(0,s)),g!==me&&(O+=E(0,s)),z=[E(b,0),C(O,I._length-1)]},_findStartIndex:()=>N(I,R()),_findEndIndex:()=>N(I,R()+n),_isUnmeasuredItem:b=>I._sizes[b]===k,_hasUnmeasuredItemsInFrozenRange:()=>p?I._sizes.slice(E(0,p[0]-1),C(I._length-1,p[1]+1)+1).includes(k):!1,_getItemOffset:fe,_getItemSize:F,_getItemsLength:()=>I._length,_getScrollOffset:()=>_,_isScrolling:()=>g!==M,_getViewportSize:()=>n,_getStartSpacerSize:()=>u,_getTotalSize:H,_getJumpCount:()=>i,_flushJump:()=>(m=l,l=0,[m,S===se||v()+n>=H()]),_subscribe:(b,O)=>{const W=[b,O];return A.add(W),()=>{A.delete(W)}},_update:(b,O)=>{let W,te,L=0;switch(b){case ne:{const y=m;m=0;const w=O-_,h=_e(w);!(y&&h<_e(y)+1)&&S===G&&(g=w<0?me:ae),a&&(p=T,a=!1),_=O,L=xe;const q=v();q>=-n&&q<=H()&&(L+=J,te=h>n);break}case Ee:{L=Ke,g!==M&&(W=!0,L+=J),g=M,S=G,p=T;break}case K:{const y=O.filter(([w,h])=>I._sizes[w]!==h);if(!y.length)break;ee(y.reduce((w,[h,Y])=>((S===se||(p?h<p[0]:fe(h)+(g===M&&S===G?F(h):0)<v()))&&(w+=Y-F(h)),w),0));for(const[w,h]of y){const Y=F(w),q=Ve(I,w,h);f&&(D+=q?h:h-Y)}f&&n&&D>n&&(ee(Je(I,N(I,R()))),f=!1),L=J+$,te=!0;break}case B:{n!==O&&(n=O,L=J+$);break}case Pe:{O[1]?(ee(de(I,O[0],!0)),S=se,L=J):de(I,O[0]);break}case we:{u=O;break}case ce:{S=Ue;break}case ie:{p=ue(O),L=J;break}}L&&(c=[],W&&d&&(l+=d,d=0,i++),A.forEach(([y,w])=>{L&y&&w(te)}))}}},qe=Ie?X.useLayoutEffect:X.useEffect,V=(e,t)=>t&&ze()?-e:e,ve=(e,t,s,r,o,f)=>{const a=Date.now;let c=0,n=!1,u=!1,_=!1,i=!1;const l=Ne(()=>{if(n||u){n=!1,l();return}_=!1,e._update(Ee)},150),d=()=>{c=a(),_&&(i=!0),f&&e._update(we,f()),e._update(ne,r()),l()},m=p=>{if(n||!e._isScrolling()||p.ctrlKey)return;const z=a()-c;150>z&&50<z&&(s?p.deltaX:p.deltaY)&&(n=!0)},g=()=>{u=!0,_=i=!1},S=()=>{u=!1,Oe()&&(_=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",g,{passive:!0}),t.addEventListener("touchend",S,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",S),l._cancel()},_fixScrollJump:()=>{const[p,z]=e._flushJump();p&&(o(V(p,s),z,i),i=!1,z&&e._getViewportSize()>e._getTotalSize()&&e._update(ne,r()))}}},Se=(e,t)=>{let s,r,o;const f=t?"scrollLeft":"scrollTop",a=t?"overflowX":"overflowY",c=async(n,u)=>{if(!s){ge(()=>c(n,u));return}o&&o();const _=()=>{let i;return[new Promise((l,d)=>{i=l,o=d,Le(e)&&Z(d,150)}),e._subscribe($,()=>{i&&i()})]};if(u&&he()){for(;e._update(ie,n()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,l]=_();try{await i}catch{return}finally{l()}}s.scrollTo({[t?"left":"top"]:V(n(),t),behavior:"smooth"})}else for(;;){const[i,l]=_();try{s[f]=V(n(),t),e._update(ce),await i}catch{return}finally{l()}}};return{_observe(n){s=n,r=ve(e,n,t,()=>V(n[f],t),(u,_,i)=>{if(i){const l=n.style,d=l[a];l[a]="hidden",Z(()=>{l[a]=d})}_?(n[f]=e._getScrollOffset()+u,o&&o()):n[f]+=u})},_dispose(){r&&r._dispose()},_scrollTo(n){c(()=>n)},_scrollBy(n){n+=e._getScrollOffset(),c(()=>n)},_scrollToIndex(n,{align:u,smooth:_,offset:i=0}={}){if(n=re(n,0,e._getItemsLength()-1),u==="nearest"){const l=e._getItemOffset(n),d=e._getScrollOffset();if(l<d)u="start";else if(l+e._getItemSize(n)>d+e._getViewportSize())u="end";else return}c(()=>i+e._getStartSpacerSize()+e._getItemOffset(n)+(u==="end"?e._getItemSize(n)-e._getViewportSize():u==="center"?(e._getItemSize(n)-e._getViewportSize())/2:0),_)},_fixScrollJump:()=>{r&&r._fixScrollJump()}}},Ge=(e,t)=>{let s,r,o;const f=(c,n,u,_,i=0)=>{const l=_?"offsetLeft":"offsetTop",d=i+(_&&ze()?u.innerWidth-c[l]-c.offsetWidth:c[l]),m=c.offsetParent;return c===n||!m?d:f(m,n,u,_,d)},a=async(c,n)=>{if(!s){ge(()=>a(c,n));return}o&&o();const u=()=>{let i;return[new Promise((l,d)=>{i=l,o=d,Le(e)&&Z(d,150)}),e._subscribe($,()=>{i&&i()})]},_=x(P(s));if(n&&he()){for(;e._update(ie,c()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,l]=u();try{await i}catch{return}finally{l()}}_.scroll({[t?"left":"top"]:V(c(),t),behavior:"smooth"})}else for(;;){const[i,l]=u();try{_.scroll({[t?"left":"top"]:V(c(),t)}),e._update(ce),await i}catch{return}finally{l()}}};return{_observe(c){s=c;const n=t?"scrollX":"scrollY",u=P(c),_=x(u),i=u.body;r=ve(e,_,t,()=>V(_[n],t),(l,d)=>{d?_.scroll({[t?"left":"top"]:e._getScrollOffset()+l}):_.scrollBy(t?l:0,t?0:l)},()=>f(c,i,_,t))},_dispose(){r&&r._dispose(),s=void 0},_fixScrollJump:()=>{r&&r._fixScrollJump()},_scrollToIndex(c,{align:n,smooth:u,offset:_=0}={}){if(!s)return;if(c=re(c,0,e._getItemsLength()-1),n==="nearest"){const d=e._getItemOffset(c),m=e._getScrollOffset();if(d<m)n="start";else if(d+e._getItemSize(c)>m+e._getViewportSize())n="end";else return}const i=P(s),l=x(i);a(()=>{const d=f(s,i.body,l,t),m=l.innerHeight-i.documentElement.clientHeight,g=l.innerHeight-i.documentElement.clientWidth,S=n==="end"||n==="center"?t?g:m:0;return _+d+e._getItemOffset(c)+(n==="end"?e._getItemSize(c)-(e._getViewportSize()-S):n==="center"?(e._getItemSize(c)-(e._getViewportSize()-S))/2:0)},u)}}},Xe=(e,t)=>{const s=Se(e,!1),r=Se(t,!0);return{_observe(o){s._observe(o),r._observe(o)},_dispose(){s._dispose(),r._dispose()},_scrollTo(o,f){s._scrollTo(f),r._scrollTo(o)},_scrollBy(o,f){s._scrollBy(f),r._scrollBy(o)},_scrollToIndex(o,f){s._scrollToIndex(f),r._scrollToIndex(o)},_fixScrollJump(){s._fixScrollJump(),r._fixScrollJump()}}},pe="current",Re=(e,t)=>{if(ye(e))for(const s of e)Re(s,t);else e==T||typeof e=="boolean"||t.push(e)},Ze=e=>{const t=[];return Re(e,t),t},$e=(e,t)=>{const s=e.key;return s!=T?s:"_"+t},Qe=e=>{const t=X.useRef();return t[pe]||(t[pe]=e())},le=e=>{let t;return{_observe(s){(t||(t=new(x(P(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},je=(e,t)=>{let s;const r=t?"width":"height",o=new WeakMap,f=le(a=>{const c=[];for(const{target:n,contentRect:u}of a)if(n.offsetParent)if(n===s)e._update(B,u[r]);else{const _=o.get(n);_!=T&&c.push([_,u[r]])}c.length&&e._update(K,c)});return{_observeRoot(a){f._observe(s=a)},_observeItem:(a,c)=>(o.set(a,c),f._observe(a),()=>{o.delete(a),f._unobserve(a)}),_dispose:f._dispose}},He=(e,t)=>{const s=t?"width":"height",r=t?"innerWidth":"innerHeight",o=new WeakMap,f=le(c=>{const n=[];for(const{target:u,contentRect:_}of c){if(!u.offsetParent)continue;const i=o.get(u);i!=T&&n.push([i,_[s]])}n.length&&e._update(K,n)});let a;return{_observeRoot(c){const n=x(P(c)),u=()=>{e._update(B,n[r])};n.addEventListener("resize",u),u(),a=()=>{n.removeEventListener("resize",u)}},_observeItem:(c,n)=>(o.set(c,n),f._observe(c),()=>{o.delete(c),f._unobserve(c)}),_dispose(){a&&a(),f._dispose()}}},et=(e,t)=>{let s;const r="height",o="width",f=new WeakMap,a=new Set,c=new Set,n=new Map,u=(i,l)=>`${i}-${l}`,_=le(i=>{const l=new Set,d=new Set;for(const{target:m,contentRect:g}of i)if(m.offsetParent)if(m===s)e._update(B,g[r]),t._update(B,g[o]);else{const S=f.get(m);if(S){const[p,z]=S,D=u(p,z),I=n.get(D),A=[g[r],g[o]];let v,R;I?(I[0]!==A[0]&&(v=!0),I[1]!==A[1]&&(R=!0)):v=R=!0,v&&l.add(p),R&&d.add(z),(v||R)&&n.set(D,A)}}if(l.size){const m=[];l.forEach(g=>{let S=0;c.forEach(p=>{const z=n.get(u(g,p));z&&(S=E(S,z[0]))}),S&&m.push([g,S])}),e._update(K,m)}if(d.size){const m=[];d.forEach(g=>{let S=0;a.forEach(p=>{const z=n.get(u(p,g));z&&(S=E(S,z[1]))}),S&&m.push([g,S])}),t._update(K,m)}});return{_observeRoot(i){_._observe(s=i)},_observeItem(i,l,d){return f.set(i,[l,d]),a.add(l),c.add(d),_._observe(i),()=>{f.delete(i),_._unobserve(i)}},_dispose:_._dispose}},tt=e=>X.useReducer(e._getStateVersion,void 0,e._getStateVersion)[1];export{Pe as A,T as N,J as U,Qe as a,tt as b,Ye as c,et as d,Xe as e,we as f,Fe as g,xe as h,ze as i,Ke as j,je as k,Se as l,ge as m,$e as n,He as o,Ge as p,Ze as q,pe as r,Ce as s,qe as u};
