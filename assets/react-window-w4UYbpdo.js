import{j as R}from"./jsx-runtime-DR9Q75dM.js";import{r as x}from"./index-DRjF_FHU.js";import{A as ne}from"./AutoSizer-i8YFPKNy.js";import{_ as ie,a as $}from"./assertThisInitialized-DUTgmdVG.js";import{_ as ae}from"./inheritsLoose-CV23Oqyc.js";var q=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function oe(i,t){return!!(i===t||q(i)&&q(t))}function se(i,t){if(i.length!==t.length)return!1;for(var r=0;r<i.length;r++)if(!oe(i[r],t[r]))return!1;return!0}function W(i,t){t===void 0&&(t=se);var r,n=[],o,u=!1;function c(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return u&&r===this&&t(l,n)||(o=i.apply(this,l),u=!0,r=this,n=l),o}return c}var le=typeof performance=="object"&&typeof performance.now=="function",U=le?function(){return performance.now()}:function(){return Date.now()};function H(i){cancelAnimationFrame(i.id)}function ce(i,t){var r=U();function n(){U()-r>=t?i.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var A=-1;function j(i){if(i===void 0&&(i=!1),A===-1||i){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),A=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return A}var O=null;function B(i){if(i===void 0&&(i=!1),O===null||i){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?O="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?O="negative":O="positive-ascending"),document.body.removeChild(t),O}return O}var ue=150,de=function(t,r){return t};function fe(i){var t,r=i.getItemOffset,n=i.getEstimatedTotalSize,o=i.getItemSize,u=i.getOffsetForIndexAndAlignment,c=i.getStartIndexForOffset,l=i.getStopIndexForStartIndex,h=i.initInstanceProps,I=i.shouldResetStyleCacheOnItemSizeChange,_=i.validateProps;return t=function(M){ae(T,M);function T(S){var e;return e=M.call(this,S)||this,e._instanceProps=h(e.props,$(e)),e._outerRef=void 0,e._resetIsScrollingTimeoutId=null,e.state={instance:$(e),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof e.props.initialScrollOffset=="number"?e.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},e._callOnItemsRendered=void 0,e._callOnItemsRendered=W(function(a,s,f,m){return e.props.onItemsRendered({overscanStartIndex:a,overscanStopIndex:s,visibleStartIndex:f,visibleStopIndex:m})}),e._callOnScroll=void 0,e._callOnScroll=W(function(a,s,f){return e.props.onScroll({scrollDirection:a,scrollOffset:s,scrollUpdateWasRequested:f})}),e._getItemStyle=void 0,e._getItemStyle=function(a){var s=e.props,f=s.direction,m=s.itemSize,p=s.layout,d=e._getItemStyleCache(I&&m,I&&p,I&&f),v;if(d.hasOwnProperty(a))v=d[a];else{var g=r(e.props,a,e._instanceProps),z=o(e.props,a,e._instanceProps),C=f==="horizontal"||p==="horizontal",E=f==="rtl",N=C?g:0;d[a]=v={position:"absolute",left:E?void 0:N,right:E?N:void 0,top:C?0:g,height:C?"100%":z,width:C?z:"100%"}}return v},e._getItemStyleCache=void 0,e._getItemStyleCache=W(function(a,s,f){return{}}),e._onScrollHorizontal=function(a){var s=a.currentTarget,f=s.clientWidth,m=s.scrollLeft,p=s.scrollWidth;e.setState(function(d){if(d.scrollOffset===m)return null;var v=e.props.direction,g=m;if(v==="rtl")switch(B()){case"negative":g=-m;break;case"positive-descending":g=p-f-m;break}return g=Math.max(0,Math.min(g,p-f)),{isScrolling:!0,scrollDirection:d.scrollOffset<g?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._onScrollVertical=function(a){var s=a.currentTarget,f=s.clientHeight,m=s.scrollHeight,p=s.scrollTop;e.setState(function(d){if(d.scrollOffset===p)return null;var v=Math.max(0,Math.min(p,m-f));return{isScrolling:!0,scrollDirection:d.scrollOffset<v?"forward":"backward",scrollOffset:v,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._outerRefSetter=function(a){var s=e.props.outerRef;e._outerRef=a,typeof s=="function"?s(a):s!=null&&typeof s=="object"&&s.hasOwnProperty("current")&&(s.current=a)},e._resetIsScrollingDebounced=function(){e._resetIsScrollingTimeoutId!==null&&H(e._resetIsScrollingTimeoutId),e._resetIsScrollingTimeoutId=ce(e._resetIsScrolling,ue)},e._resetIsScrolling=function(){e._resetIsScrollingTimeoutId=null,e.setState({isScrolling:!1},function(){e._getItemStyleCache(-1,null)})},e}T.getDerivedStateFromProps=function(e,a){return me(e,a),_(e),null};var y=T.prototype;return y.scrollTo=function(e){e=Math.max(0,e),this.setState(function(a){return a.scrollOffset===e?null:{scrollDirection:a.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},y.scrollToItem=function(e,a){a===void 0&&(a="auto");var s=this.props,f=s.itemCount,m=s.layout,p=this.state.scrollOffset;e=Math.max(0,Math.min(e,f-1));var d=0;if(this._outerRef){var v=this._outerRef;m==="vertical"?d=v.scrollWidth>v.clientWidth?j():0:d=v.scrollHeight>v.clientHeight?j():0}this.scrollTo(u(this.props,e,a,p,this._instanceProps,d))},y.componentDidMount=function(){var e=this.props,a=e.direction,s=e.initialScrollOffset,f=e.layout;if(typeof s=="number"&&this._outerRef!=null){var m=this._outerRef;a==="horizontal"||f==="horizontal"?m.scrollLeft=s:m.scrollTop=s}this._callPropsCallbacks()},y.componentDidUpdate=function(){var e=this.props,a=e.direction,s=e.layout,f=this.state,m=f.scrollOffset,p=f.scrollUpdateWasRequested;if(p&&this._outerRef!=null){var d=this._outerRef;if(a==="horizontal"||s==="horizontal")if(a==="rtl")switch(B()){case"negative":d.scrollLeft=-m;break;case"positive-ascending":d.scrollLeft=m;break;default:var v=d.clientWidth,g=d.scrollWidth;d.scrollLeft=g-v-m;break}else d.scrollLeft=m;else d.scrollTop=m}this._callPropsCallbacks()},y.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&H(this._resetIsScrollingTimeoutId)},y.render=function(){var e=this.props,a=e.children,s=e.className,f=e.direction,m=e.height,p=e.innerRef,d=e.innerElementType,v=e.innerTagName,g=e.itemCount,z=e.itemData,C=e.itemKey,E=C===void 0?de:C,N=e.layout,Z=e.outerElementType,J=e.outerTagName,Q=e.style,X=e.useIsScrolling,Y=e.width,P=this.state.isScrolling,L=f==="horizontal"||N==="horizontal",ee=L?this._onScrollHorizontal:this._onScrollVertical,k=this._getRangeToRender(),te=k[0],re=k[1],D=[];if(g>0)for(var b=te;b<=re;b++)D.push(x.createElement(a,{data:z,key:E(b,z),index:b,isScrolling:X?P:void 0,style:this._getItemStyle(b)}));var F=n(this.props,this._instanceProps);return x.createElement(Z||J||"div",{className:s,onScroll:ee,ref:this._outerRefSetter,style:ie({position:"relative",height:m,width:Y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:f},Q)},x.createElement(d||v||"div",{children:D,ref:p,style:{height:L?"100%":F,pointerEvents:P?"none":void 0,width:L?F:"100%"}}))},y._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var e=this.props.itemCount;if(e>0){var a=this._getRangeToRender(),s=a[0],f=a[1],m=a[2],p=a[3];this._callOnItemsRendered(s,f,m,p)}}if(typeof this.props.onScroll=="function"){var d=this.state,v=d.scrollDirection,g=d.scrollOffset,z=d.scrollUpdateWasRequested;this._callOnScroll(v,g,z)}},y._getRangeToRender=function(){var e=this.props,a=e.itemCount,s=e.overscanCount,f=this.state,m=f.isScrolling,p=f.scrollDirection,d=f.scrollOffset;if(a===0)return[0,0,0,0];var v=c(this.props,d,this._instanceProps),g=l(this.props,v,d,this._instanceProps),z=!m||p==="backward"?Math.max(1,s):1,C=!m||p==="forward"?Math.max(1,s):1;return[Math.max(0,v-z),Math.max(0,Math.min(a-1,g+C)),v,g]},T}(x.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var me=function(t,r){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,r.instance},he=50,w=function(t,r,n){var o=t,u=o.itemSize,c=n.itemMetadataMap,l=n.lastMeasuredIndex;if(r>l){var h=0;if(l>=0){var I=c[l];h=I.offset+I.size}for(var _=l+1;_<=r;_++){var M=u(_);c[_]={offset:h,size:M},h+=M}n.lastMeasuredIndex=r}return c[r]},ve=function(t,r,n){var o=r.itemMetadataMap,u=r.lastMeasuredIndex,c=u>0?o[u].offset:0;return c>=n?V(t,r,u,0,n):pe(t,r,Math.max(0,u),n)},V=function(t,r,n,o,u){for(;o<=n;){var c=o+Math.floor((n-o)/2),l=w(t,c,r).offset;if(l===u)return c;l<u?o=c+1:l>u&&(n=c-1)}return o>0?o-1:0},pe=function(t,r,n,o){for(var u=t.itemCount,c=1;n<u&&w(t,n,r).offset<o;)n+=c,c*=2;return V(t,r,Math.min(n,u-1),Math.floor(n/2),o)},K=function(t,r){var n=t.itemCount,o=r.itemMetadataMap,u=r.estimatedItemSize,c=r.lastMeasuredIndex,l=0;if(c>=n&&(c=n-1),c>=0){var h=o[c];l=h.offset+h.size}var I=n-c-1,_=I*u;return l+_},ge=fe({getItemOffset:function(t,r,n){return w(t,r,n).offset},getItemSize:function(t,r,n){return n.itemMetadataMap[r].size},getEstimatedTotalSize:K,getOffsetForIndexAndAlignment:function(t,r,n,o,u,c){var l=t.direction,h=t.height,I=t.layout,_=t.width,M=l==="horizontal"||I==="horizontal",T=M?_:h,y=w(t,r,u),S=K(t,u),e=Math.max(0,Math.min(S-T,y.offset)),a=Math.max(0,y.offset-T+y.size+c);switch(n==="smart"&&(o>=a-T&&o<=e+T?n="auto":n="center"),n){case"start":return e;case"end":return a;case"center":return Math.round(a+(e-a)/2);case"auto":default:return o>=a&&o<=e?o:o<a?a:e}},getStartIndexForOffset:function(t,r,n){return ve(t,n,r)},getStopIndexForStartIndex:function(t,r,n,o){for(var u=t.direction,c=t.height,l=t.itemCount,h=t.layout,I=t.width,_=u==="horizontal"||h==="horizontal",M=_?I:c,T=w(t,r,o),y=n+M,S=T.offset+T.size,e=r;e<l-1&&S<y;)e++,S+=w(t,e,o).size;return e},initInstanceProps:function(t,r){var n=t,o=n.estimatedItemSize,u={itemMetadataMap:{},estimatedItemSize:o||he,lastMeasuredIndex:-1};return r.resetAfterIndex=function(c,l){l===void 0&&(l=!0),u.lastMeasuredIndex=Math.min(u.lastMeasuredIndex,c-1),r._getItemStyleCache(-1),l&&r.forceUpdate()},u},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});const Ie=({index:i,setHeight:t,Component:r})=>{const n=x.useRef(null);return x.useEffect(()=>{n.current&&t(i,n.current.getBoundingClientRect().height)},[]),R.jsx(r,{ref:n,index:i})},G=x.createContext(null),Se=({index:i,style:t})=>{const{Component:r,setHeight:n}=x.useContext(G);return R.jsx("div",{style:t,children:R.jsx(Ie,{index:i,setHeight:n,Component:r})},i)},ye=x.memo(({count:i,Component:t,handle:r})=>{const n=x.useMemo(()=>Array.from({length:i}).map(()=>50),[]),o=x.useRef(null),u=l=>n[l],c=(l,h)=>{var I;n[l]=h,(I=o.current)==null||I.resetAfterIndex(l)};return x.useImperativeHandle(r,()=>({scrollToIndex:l=>{var h;(h=o.current)==null||h.scrollToItem(l)}})),R.jsx(G.Provider,{value:x.useMemo(()=>({Component:t,setHeight:c}),[t,c]),children:R.jsx(ne,{children:({width:l,height:h})=>R.jsx(ge,{ref:o,width:l,height:h,itemCount:i,itemSize:u,children:Se})})})});ye.__docgenInfo={description:"",methods:[{name:"scrollToIndex",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null}],returns:null}],displayName:"ReactWindowList",props:{count:{required:!0,tsType:{name:"number"},description:""},Component:{required:!0,tsType:{name:"SimpleItem"},description:""},handle:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:"{ scrollToIndex: (index: number) => void }",signature:{properties:[{key:"scrollToIndex",value:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<ListHandle>"},description:""}}};export{ye as R};
