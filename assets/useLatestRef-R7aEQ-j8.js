import{r as q}from"./iframe-XN3YHpIy.js";const V=null,{min:T,max:E,abs:ae,floor:Re}=Math,ie=(e,t,s)=>T(s,E(t,e)),ve=e=>[...e].sort((t,s)=>t-s),Ke=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},W=()=>{let e;return[new Promise(s=>{e=s}),e]},ce=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},D=-1,P=(e,t,s)=>{const n=s?"unshift":"push";for(let i=0;i<t;i++)e[n](D);return e},j=(e,t)=>{const s=e._sizes[t];return s===D?e._defaultItemSize:s},Te=(e,t,s)=>{const n=e._sizes[t]===D;return e._sizes[t]=s,e._computedOffsetIndex=T(t,e._computedOffsetIndex),n},H=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=j(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},ye=e=>e._length?H(e,e._length-1)+j(e,e._length-1):0,N=(e,t,s=0,n=e._length-1)=>{for(;s<=n;){const i=Re((s+n)/2),u=H(e,i);if(u<=t){if(u+j(e,i)>t)return i;s=i+1}else n=i-1}return ie(s,0,e._length-1)},Ce=(e,t,s,n)=>{if(n=T(n,e._length-1),H(e,n)<=t){const i=N(e,t+s,n);return[N(e,t,n,i),i]}else{const i=N(e,t,void 0,n);return[i,N(e,t+s,i)]}},Ae=(e,t)=>{let s=0;const n=[];e._sizes.forEach((r,d)=>{r!==D&&(n.push(r),d<t&&s++)}),e._computedOffsetIndex=-1;const i=ve(n),u=i.length,a=u/2|0,_=u%2===0?(i[a-1]+i[a])/2:i[a],o=e._defaultItemSize;return((e._defaultItemSize=_)-o)*E(t-s,0)},Ne=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?P(s[0].slice(0,T(e,s[0].length)),E(0,e-s[0].length)):P([],e),_length:e,_computedOffsetIndex:-1,_offsets:P([],e)}),ke=e=>[e._sizes.slice(),e._defaultItemSize],me=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:T(t-1,e._computedOffsetIndex),e._length=t,n>0?(P(e._offsets,n),P(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((i,u)=>i-(u===D?e._defaultItemSize:u),0))},pe=typeof window<"u",ge=()=>document.documentElement,x=e=>e.ownerDocument,K=e=>e.defaultView,Ie=ce(()=>pe?getComputedStyle(ge()).direction==="rtl":!1),be=ce(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),ze=ce(()=>"scrollBehavior"in ge().style),Ve=2147483647,J=0,_e=1,$e=2,X=0,Me=1,ne=2,oe=1,Oe=2,k=3,B=4,De=5,Ee=6,le=7,fe=8,A=1,Z=2,Je=4,We=8,Be=e=>E(e.$getTotalSize(),e.$getViewportSize()),we=e=>!!e.$getViewportSize(),Fe=(e,t=40,s=4,n=0,i,u=!1)=>{let a=!!n,_=1,o=0,r=0,d=0,l=0,f=0,c=0,m=J,S=X,$=a?[0,E(n-1,0)]:V,I=[0,0],z=0;const g=Ne(e,t,i),y=new Set,R=()=>d-r,h=()=>R()+f+l,C=p=>Ce(g,p,o,I[0]),ee=()=>ye(g),de=p=>H(g,p)-f,F=p=>j(g,p),te=p=>{p&&(be()&&m!==J?f+=p:l+=p)};return{$getStateVersion:()=>_,$getCacheSnapshot:()=>ke(g),$getRange:()=>{let p,b;return c?[p,b]=I:([p,b]=I=C(E(0,h())),$&&(p=T(p,$[0]),b=E(b,$[1]))),m!==_e&&(p-=E(0,s)),m!==$e&&(b+=E(0,s)),[E(p,0),T(b,g._length-1)]},$findStartIndex:()=>N(g,h()),$findEndIndex:()=>N(g,h()+o),$isUnmeasuredItem:p=>g._sizes[p]===D,_hasUnmeasuredItemsInFrozenRange:()=>$?g._sizes.slice(E(0,$[0]-1),T(g._length-1,$[1]+1)+1).includes(D):!1,$getItemOffset:de,$getItemSize:F,$getItemsLength:()=>g._length,$getScrollOffset:()=>d,$isScrolling:()=>m!==J,$getViewportSize:()=>o,$getStartSpacerSize:()=>r,$getTotalSize:ee,_flushJump:()=>(c=l,l=0,[c,S===ne||R()+o>=ee()]),$subscribe:(p,b)=>{const U=[p,b];return y.add(U),()=>{y.delete(U)}},$update:(p,b)=>{let U,se,L=0;switch(p){case oe:{const v=c;c=0;const w=b-d,O=ae(w);!(v&&O<ae(v)+1)&&S===X&&(m=w<0?$e:_e),a&&($=V,a=!1),d=b,L=Je;const G=R();G>=-o&&G<=ee()&&(L+=A,se=O>o);break}case Oe:{L=We,m!==J&&(U=!0,L+=A),m=J,S=X,$=V;break}case k:{const v=b.filter(([w,O])=>g._sizes[w]!==O);if(!v.length)break;te(v.reduce((w,[O,Y])=>((S===ne||($?!a&&O<$[0]:de(O)+(m===J&&S===X?F(O):0)<R()))&&(w+=Y-F(O)),w),0));for(const[w,O]of v){const Y=F(w),G=Te(g,w,O);u&&(z+=G?O:O-Y)}u&&o&&z>o&&(te(Ae(g,N(g,h()))),u=!1),L=A+Z,se=!0;break}case B:{o!==b&&(o=b,L=A+Z);break}case De:{b[1]?(te(me(g,b[0],!0)),S=ne,L=A):(me(g,b[0]),L=A);break}case Ee:{r=b;break}case le:{S=Me;break}case fe:{$=C(b),L=A;break}}L&&(_=(_&Ve)+1,U&&f&&(l+=f,f=0),y.forEach(([v,w])=>{L&v&&w(se)}))}}},Q=setTimeout,Ue=(e,t)=>{let s;const n=()=>{s!=V&&clearTimeout(s)},i=()=>{n(),s=Q(()=>{s=V,e()},t)};return i._cancel=n,i},M=(e,t)=>t&&Ie()?-e:e,Le=(e,t,s,n,i,u)=>{const a=Date.now;let _=0,o=!1,r=!1,d=!1,l=!1;const f=Ue(()=>{if(o||r){o=!1,f();return}d=!1,e.$update(Oe)},150),c=()=>{_=a(),d&&(l=!0),u&&e.$update(Ee,u()),e.$update(oe,n()),f()},m=I=>{if(o||!e.$isScrolling()||I.ctrlKey)return;const z=a()-_;150>z&&50<z&&(s?I.deltaX:I.deltaY)&&(o=!0)},S=()=>{r=!0,d=l=!1},$=()=>{r=!1,be()&&(d=!0)};return t.addEventListener("scroll",c),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",$,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",c),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",$),f._cancel()},_fixScrollJump:()=>{const[I,z]=e._flushJump();I&&(i(M(I,s),z,l),l=!1,z&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(oe,n()))}}},Se=(e,t)=>{let s,n,i,u=W();const a=t?"scrollLeft":"scrollTop",_=t?"overflowX":"overflowY",o=async(r,d)=>{if(!await u[0])return;i&&i();const l=()=>{const[f,c]=W();return i=()=>{c(!1)},we(e)&&Q(i,150),[f,e.$subscribe(Z,()=>{c(!0)})]};if(d&&ze()){for(;e.$update(fe,r()),!!e._hasUnmeasuredItemsInFrozenRange();){const[f,c]=l();try{if(!await f)return}finally{c()}}s.scrollTo({[t?"left":"top"]:M(r(),t),behavior:"smooth"})}else for(;;){const[f,c]=l();try{if(s[a]=M(r(),t),e.$update(le),!await f)return}finally{c()}}};return{$observe(r){s=r,n=Le(e,r,t,()=>M(r[a],t),(d,l,f)=>{if(f){const c=r.style,m=c[_];c[_]="hidden",Q(()=>{c[_]=m})}l?(r[a]=e.$getScrollOffset()+d,i&&i()):r[a]+=d}),u[1](!0)},$dispose(){n&&n._dispose(),u[1](!1),u=W()},$scrollTo(r){o(()=>r)},$scrollBy(r){r+=e.$getScrollOffset(),o(()=>r)},$scrollToIndex(r,{align:d,smooth:l,offset:f=0}={}){if(r=ie(r,0,e.$getItemsLength()-1),d==="nearest"){const c=e.$getItemOffset(r),m=e.$getScrollOffset();if(c<m)d="start";else if(c+e.$getItemSize(r)>m+e.$getViewportSize())d="end";else return}o(()=>f+e.$getStartSpacerSize()+e.$getItemOffset(r)+(d==="end"?e.$getItemSize(r)-e.$getViewportSize():d==="center"?(e.$getItemSize(r)-e.$getViewportSize())/2:0),l)},$fixScrollJump:()=>{n&&n._fixScrollJump()}}},Ye=(e,t)=>{let s,n,i,u=W();const a=(o,r,d,l,f=0)=>{const c=l?"offsetLeft":"offsetTop",m=f+(l&&Ie()?d.innerWidth-o[c]-o.offsetWidth:o[c]),S=o.offsetParent;return o===r||!S?m:a(S,r,d,l,m)},_=async(o,r)=>{if(!await u[0])return;i&&i();const d=()=>{const[f,c]=W();return i=()=>{c(!1)},we(e)&&Q(i,150),[f,e.$subscribe(Z,()=>{c(!0)})]},l=K(x(s));if(r&&ze()){for(;e.$update(fe,o()),!!e._hasUnmeasuredItemsInFrozenRange();){const[f,c]=d();try{if(!await f)return}finally{c()}}l.scroll({[t?"left":"top"]:M(o(),t),behavior:"smooth"})}else for(;;){const[f,c]=d();try{if(l.scroll({[t?"left":"top"]:M(o(),t)}),e.$update(le),!await f)return}finally{c()}}};return{$observe(o){s=o;const r=t?"scrollX":"scrollY",d=x(o),l=K(d),f=d.body;n=Le(e,l,t,()=>M(l[r],t),(c,m)=>{m?l.scroll({[t?"left":"top"]:e.$getScrollOffset()+c}):l.scrollBy(t?c:0,t?0:c)},()=>a(o,f,l,t)),u[1](!0)},$dispose(){n&&n._dispose(),s=void 0,u[1](!1),u=W()},$fixScrollJump:()=>{n&&n._fixScrollJump()},$scrollToIndex(o,{align:r,smooth:d,offset:l=0}={}){if(!s)return;if(o=ie(o,0,e.$getItemsLength()-1),r==="nearest"){const $=e.$getItemOffset(o),I=e.$getScrollOffset();if($<I)r="start";else if($+e.$getItemSize(o)>I+e.$getViewportSize())r="end";else return}const f=x(s),c=K(f),m=f.documentElement,S=()=>e.$getViewportSize()-(t?m.clientWidth:m.clientHeight);_(()=>l+a(s,f.body,c,t)+e.$getItemOffset(o)+(r==="end"?e.$getItemSize(o)-(e.$getViewportSize()-S()):r==="center"?(e.$getItemSize(o)-(e.$getViewportSize()-S()))/2:0),d)}}},Ge=(e,t)=>{const s=Se(e,!1),n=Se(t,!0);return{$observe(i){s.$observe(i),n.$observe(i)},$dispose(){s.$dispose(),n.$dispose()},$scrollTo(i,u){s.$scrollTo(u),n.$scrollTo(i)},$scrollBy(i,u){s.$scrollBy(u),n.$scrollBy(i)},$scrollToIndex(i,u){s.$scrollToIndex(u),n.$scrollToIndex(i)},$fixScrollJump(){s.$fixScrollJump(),n.$fixScrollJump()}}},ue=e=>{let t;return{_observe(s){(t||(t=new(K(x(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Xe=(e,t)=>{let s;const n=t?"width":"height",i=new WeakMap,u=ue(a=>{const _=[];for(const{target:o,contentRect:r}of a)if(o.offsetParent)if(o===s)e.$update(B,r[n]);else{const d=i.get(o);d!=V&&_.push([d,r[n]])}_.length&&e.$update(k,_)});return{$observeRoot(a){u._observe(s=a)},$observeItem:(a,_)=>(i.set(a,_),u._observe(a),()=>{i.delete(a),u._unobserve(a)}),$dispose:u._dispose}},qe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",i=new WeakMap,u=ue(_=>{const o=[];for(const{target:r,contentRect:d}of _){if(!r.offsetParent)continue;const l=i.get(r);l!=V&&o.push([l,d[s]])}o.length&&e.$update(k,o)});let a;return{$observeRoot(_){const o=K(x(_)),r=()=>{e.$update(B,o[n])};o.addEventListener("resize",r),r(),a=()=>{o.removeEventListener("resize",r)}},$observeItem:(_,o)=>(i.set(_,o),u._observe(_),()=>{i.delete(_),u._unobserve(_)}),$dispose(){a&&a(),u._dispose()}}},Ze=(e,t)=>{let s;const n="height",i="width",u=new WeakMap,a=new Set,_=new Set,o=new Map,r=(l,f)=>`${l}-${f}`,d=ue(l=>{const f=new Set,c=new Set;for(const{target:m,contentRect:S}of l)if(m.offsetParent)if(m===s)e.$update(B,S[n]),t.$update(B,S[i]);else{const $=u.get(m);if($){const[I,z]=$,g=r(I,z),y=o.get(g),R=[S[n],S[i]];let h,C;y?(y[0]!==R[0]&&(h=!0),y[1]!==R[1]&&(C=!0)):h=C=!0,h&&f.add(I),C&&c.add(z),(h||C)&&o.set(g,R)}}if(f.size){const m=[];f.forEach(S=>{let $=0;_.forEach(I=>{const z=o.get(r(S,I));z&&($=E($,z[0]))}),$&&m.push([S,$])}),e.$update(k,m)}if(c.size){const m=[];c.forEach(S=>{let $=0;a.forEach(I=>{const z=o.get(r(I,S));z&&($=E($,z[1]))}),$&&m.push([S,$])}),t.$update(k,m)}});return{$observeRoot(l){d._observe(s=l)},$observeItem(l,f,c){return u.set(l,[f,c]),a.add(f),_.add(c),d._observe(l),()=>{u.delete(l),d._unobserve(l)}},$resizeCols(l){for(const[f]of l)for(let c=0;c<e.$getItemsLength();c++)o.delete(r(c,f));t.$update(k,l)},$resizeRows(l){for(const[f]of l)for(let c=0;c<t.$getItemsLength();c++)o.delete(r(f,c));e.$update(k,l)},$dispose:d._dispose}},Pe=pe?q.useLayoutEffect:q.useEffect,re="current",he=(e,t)=>{if(Array.isArray(e))for(const s of e)he(s,t);else e==null||typeof e=="boolean"||t.push(e)},Qe=e=>{const t=[];return he(e,t),t},je=(e,t)=>{const s=e.key;return s??"_"+t},He=e=>{const t=q.useRef(null);return t[re]||(t[re]=e())},et=e=>{const t=q.useRef(e);return Pe(()=>{t[re]=e},[e]),t};export{De as A,A as U,et as a,Pe as b,Je as c,We as d,Fe as e,Ze as f,Be as g,Ge as h,Ie as i,Ee as j,Xe as k,Se as l,Ke as m,je as n,qe as o,Ye as p,Qe as q,re as r,ve as s,He as u};
