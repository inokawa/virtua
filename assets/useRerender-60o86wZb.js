import{r as X}from"./index-DRjF_FHU.js";const A=null,{min:T,max:E,abs:de,floor:ve}=Math,oe=(e,t,s)=>T(s,E(t,e)),Te=e=>[...e].sort((t,s)=>t-s),pe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},re=e=>{let t,s;return()=>(t||(t=!0,s=e()),s)},k=-1,W=(e,t,s)=>{const o=s?"unshift":"push";for(let r=0;r<t;r++)e[o](k);return e},j=(e,t)=>{const s=e._sizes[t];return s===k?e._defaultItemSize:s},Ce=(e,t,s)=>{const o=e._sizes[t]===k;return e._sizes[t]=s,e._computedOffsetIndex=T(t,e._computedOffsetIndex),o},H=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=j(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},ye=e=>e._length?H(e,e._length-1)+j(e,e._length-1):0,y=(e,t,s=0,o=e._length-1)=>{for(;s<=o;){const r=ve((s+o)/2),d=H(e,r);if(d<=t){if(d+j(e,r)>t)return r;s=r+1}else o=r-1}return oe(s,0,e._length-1)},Ae=(e,t,s,o)=>{if(o=T(o,e._length-1),H(e,o)<=t){const r=y(e,t+s,o);return[y(e,t,o,r),r]}else{const r=y(e,t,void 0,o);return[r,y(e,t+s,r)]}},Ve=(e,t)=>{let s=0;const o=[];e._sizes.forEach((l,f)=>{l!==k&&(o.push(l),f<t&&s++)}),e._computedOffsetIndex=-1;const r=Te(o),d=r.length,m=d/2|0,c=d%2===0?(r[m-1]+r[m])/2:r[m],n=e._defaultItemSize;return((e._defaultItemSize=c)-n)*E(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?W(s[0].slice(0,T(e,s[0].length)),E(0,e-s[0].length)):W([],e),_length:e,_computedOffsetIndex:-1,_offsets:W([],e)}),Ne=e=>[e._sizes.slice(),e._defaultItemSize],ae=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:T(t-1,e._computedOffsetIndex),e._length=t,o>0?(W(e._offsets,o),W(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((r,d)=>r-(d===k?e._defaultItemSize:d),0))},ge=typeof window<"u",Ie=()=>document.documentElement,U=e=>e.ownerDocument,P=e=>e.defaultView,be=re(()=>ge?getComputedStyle(Ie()).direction==="rtl":!1),ze=re(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Oe=re(()=>"scrollBehavior"in Ie().style),N=0,me=1,_e=2,G=0,Me=1,se=2,ne=1,Ee=2,x=3,B=4,Je=5,he=6,ce=7,ie=8,M=1,Z=2,De=4,We=8,xe=e=>E(e.$getTotalSize(),e.$getViewportSize()),we=e=>!!e.$getViewportSize(),Be=(e,t=40,s=4,o=0,r,d=!1)=>{let m=!!o,c=[],n=0,l=0,f=0,i=0,u=0,a=0,p=0,S=N,_=G,$=m?[0,E(o-1,0)]:A,b=[0,0],J=0;const g=ke(e,t,r),C=new Set,R=()=>f-l,v=()=>R()+a+u,ue=I=>Ae(g,I,n,b[0]),K=()=>ye(g),fe=I=>H(g,I)-a,F=I=>j(g,I),ee=I=>{I&&(ze()&&S!==N?a+=I:(u+=I,i++))};return{$getStateVersion:()=>c,$getCacheSnapshot:()=>Ne(g),$getRange:()=>{if(p)return b;let[I,z]=ue(E(0,v()));return $&&(I=T(I,$[0]),z=E(z,$[1])),S!==me&&(I-=E(0,s)),S!==_e&&(z+=E(0,s)),b=[E(I,0),T(z,g._length-1)]},$findStartIndex:()=>y(g,v()),$findEndIndex:()=>y(g,v()+n),$isUnmeasuredItem:I=>g._sizes[I]===k,_hasUnmeasuredItemsInFrozenRange:()=>$?g._sizes.slice(E(0,$[0]-1),T(g._length-1,$[1]+1)+1).includes(k):!1,$getItemOffset:fe,$getItemSize:F,$getItemsLength:()=>g._length,$getScrollOffset:()=>f,$isScrolling:()=>S!==N,$getViewportSize:()=>n,$getStartSpacerSize:()=>l,$getTotalSize:K,$getJumpCount:()=>i,_flushJump:()=>(p=u,u=0,[p,_===se||R()+n>=K()]),$subscribe:(I,z)=>{const D=[I,z];return C.add(D),()=>{C.delete(D)}},$update:(I,z)=>{let D,te,w=0;switch(I){case ne:{const L=p;p=0;const h=z-f,O=de(h);!(L&&O<de(L)+1)&&_===G&&(S=h<0?_e:me),m&&($=A,m=!1),f=z,w=De;const q=R();q>=-n&&q<=K()&&(w+=M,te=O>n);break}case Ee:{w=We,S!==N&&(D=!0,w+=M),S=N,_=G,$=A;break}case x:{const L=z.filter(([h,O])=>g._sizes[h]!==O);if(!L.length)break;ee(L.reduce((h,[O,Y])=>((_===se||($?O<$[0]:fe(O)+(S===N&&_===G?F(O):0)<R()))&&(h+=Y-F(O)),h),0));for(const[h,O]of L){const Y=F(h),q=Ce(g,h,O);d&&(J+=q?O:O-Y)}d&&n&&J>n&&(ee(Ve(g,y(g,v()))),d=!1),w=M+Z,te=!0;break}case B:{n!==z&&(n=z,w=M+Z);break}case Je:{const L=f+n>=K();z[1]?(ee(ae(g,z[0],!0)),_=se):ae(g,z[0]),(z[1]||L)&&(w=M);break}case he:{l=z;break}case ce:{_=Me;break}case ie:{$=ue(z),w=M;break}}w&&(c=[],D&&a&&(u+=a,a=0,i++),C.forEach(([L,h])=>{w&L&&h(te)}))}}},Q=setTimeout,Ue=(e,t)=>{let s;const o=()=>{s!=A&&clearTimeout(s)},r=()=>{o(),s=Q(()=>{s=A,e()},t)};return r._cancel=o,r},V=(e,t)=>t&&be()?-e:e,Le=(e,t,s,o,r,d)=>{const m=Date.now;let c=0,n=!1,l=!1,f=!1,i=!1;const u=Ue(()=>{if(n||l){n=!1,u();return}f=!1,e.$update(Ee)},150),a=()=>{c=m(),f&&(i=!0),d&&e.$update(he,d()),e.$update(ne,o()),u()},p=$=>{if(n||!e.$isScrolling()||$.ctrlKey)return;const b=m()-c;150>b&&50<b&&(s?$.deltaX:$.deltaY)&&(n=!0)},S=()=>{l=!0,f=i=!1},_=()=>{l=!1,ze()&&(f=!0)};return t.addEventListener("scroll",a),t.addEventListener("wheel",p,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",_,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",a),t.removeEventListener("wheel",p),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",_),u._cancel()},_fixScrollJump:()=>{const[$,b]=e._flushJump();$&&(r(V($,s),b,i),i=!1,b&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(ne,o()))}}},Se=(e,t)=>{let s,o,r;const d=t?"scrollLeft":"scrollTop",m=t?"overflowX":"overflowY",c=async(n,l)=>{if(!s){pe(()=>c(n,l));return}r&&r();const f=()=>{let i;return[new Promise((u,a)=>{i=u,r=a,we(e)&&Q(a,150)}),e.$subscribe(Z,()=>{i&&i()})]};if(l&&Oe()){for(;e.$update(ie,n()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,u]=f();try{await i}catch{return}finally{u()}}s.scrollTo({[t?"left":"top"]:V(n(),t),behavior:"smooth"})}else for(;;){const[i,u]=f();try{s[d]=V(n(),t),e.$update(ce),await i}catch{return}finally{u()}}};return{$observe(n){s=n,o=Le(e,n,t,()=>V(n[d],t),(l,f,i)=>{if(i){const u=n.style,a=u[m];u[m]="hidden",Q(()=>{u[m]=a})}f?(n[d]=e.$getScrollOffset()+l,r&&r()):n[d]+=l})},$dispose(){o&&o._dispose()},$scrollTo(n){c(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),c(()=>n)},$scrollToIndex(n,{align:l,smooth:f,offset:i=0}={}){if(n=oe(n,0,e.$getItemsLength()-1),l==="nearest"){const u=e.$getItemOffset(n),a=e.$getScrollOffset();if(u<a)l="start";else if(u+e.$getItemSize(n)>a+e.$getViewportSize())l="end";else return}c(()=>i+e.$getStartSpacerSize()+e.$getItemOffset(n)+(l==="end"?e.$getItemSize(n)-e.$getViewportSize():l==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),f)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Ke=(e,t)=>{let s,o,r;const d=(c,n,l,f,i=0)=>{const u=f?"offsetLeft":"offsetTop",a=i+(f&&be()?l.innerWidth-c[u]-c.offsetWidth:c[u]),p=c.offsetParent;return c===n||!p?a:d(p,n,l,f,a)},m=async(c,n)=>{if(!s){pe(()=>m(c,n));return}r&&r();const l=()=>{let i;return[new Promise((u,a)=>{i=u,r=a,we(e)&&Q(a,150)}),e.$subscribe(Z,()=>{i&&i()})]},f=P(U(s));if(n&&Oe()){for(;e.$update(ie,c()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,u]=l();try{await i}catch{return}finally{u()}}f.scroll({[t?"left":"top"]:V(c(),t),behavior:"smooth"})}else for(;;){const[i,u]=l();try{f.scroll({[t?"left":"top"]:V(c(),t)}),e.$update(ce),await i}catch{return}finally{u()}}};return{$observe(c){s=c;const n=t?"scrollX":"scrollY",l=U(c),f=P(l),i=l.body;o=Le(e,f,t,()=>V(f[n],t),(u,a)=>{a?f.scroll({[t?"left":"top"]:e.$getScrollOffset()+u}):f.scrollBy(t?u:0,t?0:u)},()=>d(c,i,f,t))},$dispose(){o&&o._dispose(),s=void 0},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(c,{align:n,smooth:l,offset:f=0}={}){if(!s)return;if(c=oe(c,0,e.$getItemsLength()-1),n==="nearest"){const S=e.$getItemOffset(c),_=e.$getScrollOffset();if(S<_)n="start";else if(S+e.$getItemSize(c)>_+e.$getViewportSize())n="end";else return}const i=U(s),u=P(i),a=i.documentElement,p=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);m(()=>f+d(s,i.body,u,t)+e.$getItemOffset(c)+(n==="end"?e.$getItemSize(c)-(e.$getViewportSize()-p()):n==="center"?(e.$getItemSize(c)-(e.$getViewportSize()-p()))/2:0),l)}}},Fe=(e,t)=>{const s=Se(e,!1),o=Se(t,!0);return{$observe(r){s.$observe(r),o.$observe(r)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(r,d){s.$scrollTo(d),o.$scrollTo(r)},$scrollBy(r,d){s.$scrollBy(d),o.$scrollBy(r)},$scrollToIndex(r,d){s.$scrollToIndex(d),o.$scrollToIndex(r)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},le=e=>{let t;return{_observe(s){(t||(t=new(P(U(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ye=(e,t)=>{let s;const o=t?"width":"height",r=new WeakMap,d=le(m=>{const c=[];for(const{target:n,contentRect:l}of m)if(n.offsetParent)if(n===s)e.$update(B,l[o]);else{const f=r.get(n);f!=A&&c.push([f,l[o]])}c.length&&e.$update(x,c)});return{$observeRoot(m){d._observe(s=m)},$observeItem:(m,c)=>(r.set(m,c),d._observe(m),()=>{r.delete(m),d._unobserve(m)}),$dispose:d._dispose}},qe=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,d=le(c=>{const n=[];for(const{target:l,contentRect:f}of c){if(!l.offsetParent)continue;const i=r.get(l);i!=A&&n.push([i,f[s]])}n.length&&e.$update(x,n)});let m;return{$observeRoot(c){const n=P(U(c)),l=()=>{e.$update(B,n[o])};n.addEventListener("resize",l),l(),m=()=>{n.removeEventListener("resize",l)}},$observeItem:(c,n)=>(r.set(c,n),d._observe(c),()=>{r.delete(c),d._unobserve(c)}),$dispose(){m&&m(),d._dispose()}}},Ge=(e,t)=>{let s;const o="height",r="width",d=new WeakMap,m=new Set,c=new Set,n=new Map,l=(i,u)=>`${i}-${u}`,f=le(i=>{const u=new Set,a=new Set;for(const{target:p,contentRect:S}of i)if(p.offsetParent)if(p===s)e.$update(B,S[o]),t.$update(B,S[r]);else{const _=d.get(p);if(_){const[$,b]=_,J=l($,b),g=n.get(J),C=[S[o],S[r]];let R,v;g?(g[0]!==C[0]&&(R=!0),g[1]!==C[1]&&(v=!0)):R=v=!0,R&&u.add($),v&&a.add(b),(R||v)&&n.set(J,C)}}if(u.size){const p=[];u.forEach(S=>{let _=0;c.forEach($=>{const b=n.get(l(S,$));b&&(_=E(_,b[0]))}),_&&p.push([S,_])}),e.$update(x,p)}if(a.size){const p=[];a.forEach(S=>{let _=0;m.forEach($=>{const b=n.get(l($,S));b&&(_=E(_,b[1]))}),_&&p.push([S,_])}),t.$update(x,p)}});return{$observeRoot(i){f._observe(s=i)},$observeItem(i,u,a){return d.set(i,[u,a]),m.add(u),c.add(a),f._observe(i),()=>{d.delete(i),f._unobserve(i)}},$dispose:f._dispose}},Xe=ge?X.useLayoutEffect:X.useEffect,$e="current",Re=(e,t)=>{if(Array.isArray(e))for(const s of e)Re(s,t);else e==null||typeof e=="boolean"||t.push(e)},Ze=e=>{const t=[];return Re(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},je=e=>{const t=X.useRef();return t[$e]||(t[$e]=e())},He=e=>X.useReducer(e.$getStateVersion,void 0,e.$getStateVersion)[1];export{Je as A,M as U,je as a,He as b,Be as c,Ge as d,Fe as e,he as f,xe as g,De as h,be as i,We as j,Ye as k,Se as l,pe as m,Qe as n,qe as o,Ke as p,Ze as q,$e as r,Te as s,Xe as u};
