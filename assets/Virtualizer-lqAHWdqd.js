import{j as V}from"./jsx-runtime-DR9Q75dM.js";import{r as a}from"./index-DRjF_FHU.js";import{a as B,A as F,f as J,b as K,u as A,r,U as M,h as Q,j as W,m as X,g as Y,s as Z,c as ee,k as te,l as se,n as re}from"./useRerender-DW8Lojhf.js";import{u as oe,a as L,L as le}from"./useChildren-fmUhRfkc.js";import{r as ne}from"./index-uWwxbAOW.js";const ie=a.forwardRef(({children:x,count:C,overscan:y,itemSize:S,shift:N,horizontal:H,keepMounted:p,cache:j,startMargin:g=0,ssrCount:$,as:c="div",item:k="div",scrollRef:I,onScroll:w,onScrollEnd:U},D)=>{c=c;const[P,u]=oe(x,C),E=a.useRef(null),h=a.useRef(!!$),_=L(w),b=L(U),[e,f,o,d]=B(()=>{const t=!!H,s=ee(u,S,y,$,j,!S);return[s,te(s,t),se(s,t),t]});u!==e.$getItemsLength()&&e.$update(F,[u,N]),g!==e.$getStartSpacerSize()&&e.$update(J,g);const z=K(e),[v,T]=e.$getRange(),q=e.$isScrolling(),G=e.$getJumpCount(),R=e.$getTotalSize(),n=[],m=t=>{const s=P(t);return V.jsx(le,{_resizer:f.$observeItem,_index:t,_offset:e.$getItemOffset(t),_hide:e.$isUnmeasuredItem(t),_as:k,_children:s,_isHorizontal:d,_isSSR:h[r]},re(s,t))};A(()=>{h[r]=!1;const t=e.$subscribe(M,i=>{i?ne.flushSync(z):z()}),s=e.$subscribe(Q,()=>{_[r]&&_[r](e.$getScrollOffset())}),l=e.$subscribe(W,()=>{b[r]&&b[r]()}),O=i=>{f.$observeRoot(i),o.$observe(i)};return I?X(()=>O(I[r])):O(E[r].parentElement),()=>{t(),s(),l(),f.$dispose(),o.$dispose()}},[]),A(()=>{o.$fixScrollJump()},[G]),a.useImperativeHandle(D,()=>({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return Y(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:o.$scrollToIndex,scrollTo:o.$scrollTo,scrollBy:o.$scrollBy}),[]);for(let t=v,s=T;t<=s;t++)n.push(m(t));if(p){const t=[],s=[];Z(p).forEach(l=>{l<v&&t.push(m(l)),l>T&&s.push(m(l))}),n.unshift(...t),n.push(...s)}return V.jsx(c,{ref:E,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?R:"100%",height:d?"100%":R,pointerEvents:q?"none":void 0},children:n})});ie.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{startMargin:{defaultValue:{value:"0",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ie as V};
