import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./iframe-BoI5bJ6Z.js";import{f as x}from"./chunk-4X5ZEQ5K-DKZdp5Hc.js";import{V as m}from"./VList-TuqWwrss.js";import"./Virtualizer-BZXmzB2E.js";import"./useLatestRef-CzhV_rsI.js";import"./useChildren-GZDHuoaX.js";import"./index-M_VcXNYe.js";import"./index-exaFy-fc.js";const R={component:m},p=[20,40,80,77],h=({i:s,onMount:r})=>(t.useEffect(()=>{r(s)},[]),e.jsx("div",{style:{height:p[s%4],borderBottom:"solid 1px #ccc",background:"#fff"},children:s})),_={render:()=>{const s=t.useMemo(()=>Array.from({length:1e3}).map((i,d)=>d),[]),[r,o]=t.useState([]);return e.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx("div",{children:e.jsx("button",{onClick:()=>{o([])},children:"clear"})}),e.jsx(m,{data:s,keepMounted:r,children:i=>e.jsx(h,{i,onMount:d=>{o(u=>{const c=new Set(u);return c.add(d),Array.from(c).sort((l,f)=>l-f)})}},i)})]})}},g={border:"solid 1px #ccc",background:"#fff",margin:10,padding:10,borderRadius:8,whiteSpace:"pre-wrap"},j=({value:s})=>{const r=t.useRef(null);return t.useEffect(()=>{r.current?.focus()},[]),e.jsx("textarea",{style:{width:"100%"},rows:6,ref:r,defaultValue:s})},y=({id:s,value:r,isEditing:o,toggleEditing:i})=>e.jsxs("div",{style:{...g},children:[o?e.jsx(j,{value:r}):r,e.jsx("div",{children:e.jsx("button",{onClick:()=>i(s),children:o?"Stop editing":"Edit"})})]}),C={render:()=>{const s=t.useRef(0),r=({value:n=x.lorem.paragraphs(1)}={})=>({id:s.current++,value:n}),[o,i]=t.useState(()=>Array.from({length:20},()=>r())),[d,u]=t.useState(null),c=t.useRef(null),l=t.useRef(!1);t.useLayoutEffect(()=>{l.current=!1}),t.useEffect(()=>{c.current&&c.current.scrollToIndex(o.length-1,{align:"end"})},[]);const f=t.useCallback(n=>{u(a=>n===a?null:n)},[]);return e.jsxs("div",{style:{width:"90vw",height:"90vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:10},children:['1. Click "edit" button on any item',e.jsx("br",{}),"2. Modify text",e.jsx("br",{}),"3. Scroll that item out of view and back - the editor state is not lost, and item in edit mode is not unmounted when goes offscreen"]}),e.jsx(m,{ref:c,style:{flex:1},keepMounted:d?[o.findIndex(n=>n.id===d)]:void 0,shift:!0,onScroll:n=>{c.current&&n<100&&(l.current=!0,i(a=>[...Array.from({length:20},()=>r()),...a]))},children:o.map(n=>e.jsx(y,{isEditing:n.id===d,toggleEditing:f,...n},n.id))})]})}},O=["AppendOnly","SelectedIndex"];export{_ as AppendOnly,C as SelectedIndex,O as __namedExportsOrder,R as default};
