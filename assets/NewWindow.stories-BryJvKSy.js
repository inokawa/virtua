import{j as h}from"./jsx-runtime-DR9Q75dM.js";import{R as Z,r as $}from"./index-DRjF_FHU.js";import{R as ee}from"./index-uWwxbAOW.js";import{V as q}from"./VList-D_GcKYLQ.js";import"./Virtualizer-BwCjih5L.js";import"./useRerender-C0g9iCf9.js";import"./useChildren-CcKP1hHT.js";function ne(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function j(r,e){return j=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},j(r,e)}function k(r){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(r)}function te(r,e){if(e&&(k(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)}function g(r){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(r)}var D,H,F,M,a={exports:{}};function oe(r){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,n=g(r);if(e){var s=g(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return te(this,t)}}a.exports=function(){if(M)return F;M=1;var r=H?D:(H=1,D="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function e(){}function t(){}return t.resetWarningCache=e,F=function(){function n(o,u,y,W,P,c){if(c!==r){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}function s(){return n}n.isRequired=n;var i={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i}}()();var _,C,S,T=function(r){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&j(i,o)})(s,Z.PureComponent);var e,t,n=oe(s);function s(i){var o;return function(u,y){if(!(u instanceof y))throw new TypeError("Cannot call a class as a function")}(this,s),(o=n.call(this,i)).container=null,o.window=null,o.windowCheckerInterval=null,o.released=!1,o.state={mounted:!1},o}return e=s,(t=[{key:"render",value:function(){return this.state.mounted?ee.createPortal(this.props.children,this.container):null}},{key:"componentDidMount",value:function(){this.window||this.container||(this.openChild(),this.setState({mounted:!0}))}},{key:"openChild",value:function(){var i,o=this,u=this.props,y=u.url,W=u.title,P=u.name,c=u.features,m=u.onBlock,I=u.onOpen,x=u.center;if(typeof x!="string"||c.width!==void 0&&c.height!==void 0){if(x==="parent")c.left=window.top.outerWidth/2+window.top.screenX-c.width/2,c.top=window.top.outerHeight/2+window.top.screenY-c.height/2;else if(x==="screen"){var X=window.screenLeft!==void 0?window.screenLeft:window.screen.left,z=window.screenTop!==void 0?window.screenTop:window.screen.top,G=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,J=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;c.left=G/2-c.width/2+X,c.top=J/2-c.height/2+z}}else console.warn("width and height window features must be present when a center prop is provided");if(this.window=window.open(y,P,(i=c,Object.keys(i).reduce(function(f,l){var d=i[l];return typeof d=="boolean"?f.push("".concat(l,"=").concat(d?"yes":"no")):f.push("".concat(l,"=").concat(d)),f},[]).join(","))),this.container=this.window.document.createElement("div"),this.windowCheckerInterval=setInterval(function(){o.window&&!o.window.closed||o.release()},50),this.window){if(this.window.document.title=W,this.container=this.window.document.getElementById("new-window-container"),this.container===null)this.container=this.window.document.createElement("div"),this.container.setAttribute("id","new-window-container"),this.window.document.body.appendChild(this.container);else{var Q=this.window.document.getElementById("new-window-container-static");this.window.document.body.removeChild(Q)}this.props.copyStyles&&setTimeout(function(){return f=document,l=o.window.document,d=l.createDocumentFragment(),Array.from(f.styleSheets).forEach(function(v){var U;try{U=v.cssRules}catch(w){console.error(w)}if(U){var N=[];Array.from(v.cssRules).forEach(function(w){var R=w.type;if(R!==CSSRule.UNKNOWN_RULE){var L="";L=R===CSSRule.KEYFRAMES_RULE?function(b){var p=["@keyframes",b.name,"{"];return Array.from(b.cssRules).forEach(function(B){p.push(B.keyText,"{",B.style.cssText,"}")}),p.push("}"),p.join(" ")}(w):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(R)?function(b){return b.cssText.split("url(").map(function(p){return p[1]==="/"?"".concat(p.slice(0,1)).concat(window.location.origin).concat(p.slice(1)):p}).join("url(")}(w):w.cssText,N.push(L)}});var A=l.createElement("style");A.textContent=N.join(`
`),d.appendChild(A)}else if(v.href){var E=l.createElement("link");E.rel="stylesheet",E.href=v.href,d.appendChild(E)}}),void l.head.appendChild(d);var f,l,d},0),typeof I=="function"&&I(this.window),this.window.addEventListener("beforeunload",function(){return o.release()})}else typeof m=="function"?m(null):console.warn("A new window could not be opened. Maybe it was blocked.")}},{key:"componentWillUnmount",value:function(){if(this.state.mounted&&this.window){if(this.props.closeOnUnmount)this.window.close();else if(this.props.children){var i=this.container.cloneNode(!0);i.setAttribute("id","new-window-container-static"),this.window.document.body.appendChild(i)}}}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var i=this.props.onUnload;typeof i=="function"&&i(null)}}}])&&ne(e.prototype,t),s}();S={url:"",name:"",title:"",features:{width:"600px",height:"640px"},onBlock:null,onOpen:null,onUnload:null,center:"parent",copyStyles:!0,closeOnUnmount:!0},(C="defaultProps")in(_=T)?Object.defineProperty(_,C,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[C]=S,T.propTypes={children:a.exports.node,url:a.exports.string,name:a.exports.string,title:a.exports.string,features:a.exports.object,onUnload:a.exports.func,onBlock:a.exports.func,onOpen:a.exports.func,center:a.exports.oneOf(["parent","screen"]),copyStyles:a.exports.bool,closeOnUnmount:a.exports.bool};const fe={component:q},re=r=>{const e=[20,40,80,77];return Array.from({length:r}).map((t,n)=>h.jsx("div",{style:{height:e[n%4],borderBottom:"solid 1px #ccc",background:"#fff"},children:n},n))},ie=()=>h.jsx(q,{style:{height:"100vh"},children:re(1e3)}),O={name:"NewWindow",render:()=>{const[r,e]=$.useState(!1);return h.jsxs("div",{children:[h.jsxs("button",{onClick:()=>{e(t=>!t)},children:[r?"close":"open"," window"]}),r&&h.jsx(T,{onUnload:()=>{e(!1)},children:h.jsx(ie,{})})]})}};var V,Y,K;O.parameters={...O.parameters,docs:{...(V=O.parameters)==null?void 0:V.docs,source:{originalSource:`{
  name: "NewWindow",
  render: () => {
    const [isWindowOpened, setIsWindowOpened] = useState(false);
    return <div>
        <button onClick={() => {
        setIsWindowOpened(prev => !prev);
      }}>
          {isWindowOpened ? "close" : "open"} window
        </button>
        {isWindowOpened && <NewWindow onUnload={() => {
        setIsWindowOpened(false);
      }}>
            <Content />
          </NewWindow>}
      </div>;
  }
}`,...(K=(Y=O.parameters)==null?void 0:Y.docs)==null?void 0:K.source}}};const we=["Default"];export{O as Default,we as __namedExportsOrder,fe as default};
