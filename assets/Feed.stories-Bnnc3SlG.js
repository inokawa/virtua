import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{r as t}from"./iframe-BoI5bJ6Z.js";import{r as j,d as w}from"./common-BqtzafjA.js";import{f as h}from"./chunk-4X5ZEQ5K-DKZdp5Hc.js";import{V as g}from"./VList-TuqWwrss.js";import"./Virtualizer-BZXmzB2E.js";import"./useLatestRef-CzhV_rsI.js";import"./useChildren-GZDHuoaX.js";import"./index-M_VcXNYe.js";import"./index-exaFy-fc.js";const V={component:g},E={borderTop:"solid 1px #ccc",background:"#fff",padding:32,paddingTop:48,paddingBottom:48,whiteSpace:"pre-wrap"},O=({content:c})=>o.jsxs("div",{style:E,children:[c," "]}),k={name:"Feed",render:()=>{const c=t.useRef(0),I=()=>{const e=c.current++;return e%3!==1?{type:"text",id:e,value:h.lorem.paragraphs(Math.floor(Math.random()*10)+1)}:{type:"image",id:e,src:h.image.url()}},a=e=>j(e,I),[y,R]=t.useState(!1),u=async(e=!1)=>{R(e),await w(1e3)},r=t.useRef(null),i=30,[n,m]=t.useState(()=>a(i*2)),S=t.useMemo(()=>n.map(e=>o.jsx(O,{content:e.type==="image"?o.jsx("img",{src:e.src,style:{maxWidth:"100%"}}):e.value},e.id)),[n]),d=10,s=n.length,l=t.useRef(-1),p=t.useRef(-1),x=t.useRef(!1);return t.useEffect(()=>{r.current?.scrollToIndex(n.length/2+1),x.current=!0},[]),o.jsx(g,{ref:r,style:{flex:1},shift:!!y,onScroll:async()=>{if(!x.current||!r.current)return;const e=r.current.scrollOffset,T=e+r.current.viewportSize;p.current<s&&r.current.findItemIndex(T)+d>s?(p.current=s,await u(),m(f=>[...f,...a(i)])):l.current<s&&r.current.findItemIndex(e)-d<0&&(l.current=s,await u(!0),m(f=>[...a(i),...f]))},children:S})}},z=["Default"];export{k as Default,z as __namedExportsOrder,V as default};
