import{r as X}from"./index-DRjF_FHU.js";const V=null,{min:y,max:h,abs:_e,floor:Te}=Math,Z=setTimeout,re=(e,t,s)=>y(s,h(t,e)),ye=e=>[...e].sort((t,s)=>t-s),ge=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},Ce=(e,t)=>{let s;const r=()=>{s!=V&&clearTimeout(s)},o=()=>{r(),s=Z(()=>{s=V,e()},t)};return o._cancel=r,o},oe=e=>{let t,s;return()=>(t||(t=!0,s=e()),s)},N=-1,U=(e,t,s)=>{const r=s?"unshift":"push";for(let o=0;o<t;o++)e[r](N);return e},Q=(e,t)=>{const s=e._sizes[t];return s===N?e._defaultItemSize:s},Ae=(e,t,s)=>{const r=e._sizes[t]===N;return e._sizes[t]=s,e._computedOffsetIndex=y(t,e._computedOffsetIndex),r},j=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,r=e._offsets[s];for(;s<t;)r+=Q(e,s),e._offsets[++s]=r;return e._computedOffsetIndex=t,r},Ve=e=>e._length?j(e,e._length-1)+Q(e,e._length-1):0,A=(e,t,s=0,r=e._length-1)=>{for(;s<=r;){const o=Te((s+r)/2),f=j(e,o);if(f<=t){if(f+Q(e,o)>t)return o;s=o+1}else r=o-1}return re(s,0,e._length-1)},ke=(e,t,s,r)=>{if(r=y(r,e._length-1),j(e,r)<=t){const o=A(e,t+s,r);return[A(e,t,r,o),o]}else{const o=A(e,t,void 0,r);return[o,A(e,t+s,o)]}},Ne=(e,t)=>{let s=0;const r=[];e._sizes.forEach((u,_)=>{u!==N&&(r.push(u),_<t&&s++)}),e._computedOffsetIndex=-1;const o=ye(r),f=o.length,a=f/2|0,c=f%2===0?(o[a-1]+o[a])/2:o[a],n=e._defaultItemSize;return((e._defaultItemSize=c)-n)*h(t-s,0)},Me=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?U(s[0].slice(0,y(e,s[0].length)),h(0,e-s[0].length)):U([],e),_length:e,_computedOffsetIndex:-1,_offsets:U([],e)}),Je=e=>[e._sizes.slice(),e._defaultItemSize],de=(e,t,s)=>{const r=t-e._length;return e._computedOffsetIndex=s?-1:y(t-1,e._computedOffsetIndex),e._length=t,r>0?(U(e._offsets,r),U(e._sizes,r,s),e._defaultItemSize*r):(e._offsets.splice(r),(s?e._sizes.splice(0,-r):e._sizes.splice(r)).reduce((o,f)=>o-(f===N?e._defaultItemSize:f),0))},Ie=typeof window<"u",be=()=>document.documentElement,P=e=>e.ownerDocument,x=e=>e.defaultView,ze=oe(()=>Ie?getComputedStyle(be()).direction==="rtl":!1),Oe=oe(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ee=oe(()=>"scrollBehavior"in be().style),M=0,ae=1,me=2,G=0,De=1,se=2,ne=1,he=2,K=3,B=4,We=5,we=6,ce=7,ie=8,J=1,$=2,Ue=4,Pe=8,Ke=e=>h(e._getTotalSize(),e._getViewportSize()),Le=e=>!!e._getViewportSize(),Be=(e,t=40,s=4,r=0,o,f=!1)=>{let a=!!r,c=[],n=0,u=0,_=0,i=0,l=0,d=0,m=0,g=M,S=G,p=a?[0,h(r-1,0)]:V,z=[0,0],D=0;const I=Me(e,t,o),C=new Set,v=()=>_-u,R=()=>v()+d+l,ue=b=>ke(I,b,n,z[0]),H=()=>Ve(I),fe=b=>j(I,b)-d,F=b=>Q(I,b),ee=b=>{b&&(Oe()&&g!==M?d+=b:(l+=b,i++))};return{_getStateVersion:()=>c,_getCacheSnapshot:()=>Je(I),_getRange:()=>{if(m)return z;let[b,O]=ue(h(0,R()));return p&&(b=y(b,p[0]),O=h(O,p[1])),g!==ae&&(b-=h(0,s)),g!==me&&(O+=h(0,s)),z=[h(b,0),y(O,I._length-1)]},_findStartIndex:()=>A(I,R()),_findEndIndex:()=>A(I,R()+n),_isUnmeasuredItem:b=>I._sizes[b]===N,_hasUnmeasuredItemsInFrozenRange:()=>p?I._sizes.slice(h(0,p[0]-1),y(I._length-1,p[1]+1)+1).includes(N):!1,_getItemOffset:fe,_getItemSize:F,_getItemsLength:()=>I._length,_getScrollOffset:()=>_,_isScrolling:()=>g!==M,_getViewportSize:()=>n,_getStartSpacerSize:()=>u,_getTotalSize:H,_getJumpCount:()=>i,_flushJump:()=>(m=l,l=0,[m,S===se||v()+n>=H()]),_subscribe:(b,O)=>{const W=[b,O];return C.add(W),()=>{C.delete(W)}},_update:(b,O)=>{let W,te,L=0;switch(b){case ne:{const T=m;m=0;const w=O-_,E=_e(w);!(T&&E<_e(T)+1)&&S===G&&(g=w<0?me:ae),a&&(p=V,a=!1),_=O,L=Ue;const q=v();q>=-n&&q<=H()&&(L+=J,te=E>n);break}case he:{L=Pe,g!==M&&(W=!0,L+=J),g=M,S=G,p=V;break}case K:{const T=O.filter(([w,E])=>I._sizes[w]!==E);if(!T.length)break;ee(T.reduce((w,[E,Y])=>((S===se||(p?E<p[0]:fe(E)+(g===M&&S===G?F(E):0)<v()))&&(w+=Y-F(E)),w),0));for(const[w,E]of T){const Y=F(w),q=Ae(I,w,E);f&&(D+=q?E:E-Y)}f&&n&&D>n&&(ee(Ne(I,A(I,R()))),f=!1),L=J+$,te=!0;break}case B:{n!==O&&(n=O,L=J+$);break}case We:{O[1]?(ee(de(I,O[0],!0)),S=se,L=J):de(I,O[0]);break}case we:{u=O;break}case ce:{S=De;break}case ie:{p=ue(O),L=J;break}}L&&(c=[],W&&d&&(l+=d,d=0,i++),C.forEach(([T,w])=>{L&T&&w(te)}))}}},k=(e,t)=>t&&ze()?-e:e,ve=(e,t,s,r,o,f)=>{const a=Date.now;let c=0,n=!1,u=!1,_=!1,i=!1;const l=Ce(()=>{if(n||u){n=!1,l();return}_=!1,e._update(he)},150),d=()=>{c=a(),_&&(i=!0),f&&e._update(we,f()),e._update(ne,r()),l()},m=p=>{if(n||!e._isScrolling()||p.ctrlKey)return;const z=a()-c;150>z&&50<z&&(s?p.deltaX:p.deltaY)&&(n=!0)},g=()=>{u=!0,_=i=!1},S=()=>{u=!1,Oe()&&(_=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",g,{passive:!0}),t.addEventListener("touchend",S,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",S),l._cancel()},_fixScrollJump:()=>{const[p,z]=e._flushJump();p&&(o(k(p,s),z,i),i=!1,z&&e._getViewportSize()>e._getTotalSize()&&e._update(ne,r()))}}},Se=(e,t)=>{let s,r,o;const f=t?"scrollLeft":"scrollTop",a=t?"overflowX":"overflowY",c=async(n,u)=>{if(!s){ge(()=>c(n,u));return}o&&o();const _=()=>{let i;return[new Promise((l,d)=>{i=l,o=d,Le(e)&&Z(d,150)}),e._subscribe($,()=>{i&&i()})]};if(u&&Ee()){for(;e._update(ie,n()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,l]=_();try{await i}catch{return}finally{l()}}s.scrollTo({[t?"left":"top"]:k(n(),t),behavior:"smooth"})}else for(;;){const[i,l]=_();try{s[f]=k(n(),t),e._update(ce),await i}catch{return}finally{l()}}};return{_observe(n){s=n,r=ve(e,n,t,()=>k(n[f],t),(u,_,i)=>{if(i){const l=n.style,d=l[a];l[a]="hidden",Z(()=>{l[a]=d})}_?(n[f]=e._getScrollOffset()+u,o&&o()):n[f]+=u})},_dispose(){r&&r._dispose()},_scrollTo(n){c(()=>n)},_scrollBy(n){n+=e._getScrollOffset(),c(()=>n)},_scrollToIndex(n,{align:u,smooth:_,offset:i=0}={}){if(n=re(n,0,e._getItemsLength()-1),u==="nearest"){const l=e._getItemOffset(n),d=e._getScrollOffset();if(l<d)u="start";else if(l+e._getItemSize(n)>d+e._getViewportSize())u="end";else return}c(()=>i+e._getStartSpacerSize()+e._getItemOffset(n)+(u==="end"?e._getItemSize(n)-e._getViewportSize():u==="center"?(e._getItemSize(n)-e._getViewportSize())/2:0),_)},_fixScrollJump:()=>{r&&r._fixScrollJump()}}},Fe=(e,t)=>{let s,r,o;const f=(c,n,u,_,i=0)=>{const l=_?"offsetLeft":"offsetTop",d=i+(_&&ze()?u.innerWidth-c[l]-c.offsetWidth:c[l]),m=c.offsetParent;return c===n||!m?d:f(m,n,u,_,d)},a=async(c,n)=>{if(!s){ge(()=>a(c,n));return}o&&o();const u=()=>{let i;return[new Promise((l,d)=>{i=l,o=d,Le(e)&&Z(d,150)}),e._subscribe($,()=>{i&&i()})]},_=x(P(s));if(n&&Ee()){for(;e._update(ie,c()),!!e._hasUnmeasuredItemsInFrozenRange();){const[i,l]=u();try{await i}catch{return}finally{l()}}_.scroll({[t?"left":"top"]:k(c(),t),behavior:"smooth"})}else for(;;){const[i,l]=u();try{_.scroll({[t?"left":"top"]:k(c(),t)}),e._update(ce),await i}catch{return}finally{l()}}};return{_observe(c){s=c;const n=t?"scrollX":"scrollY",u=P(c),_=x(u),i=u.body;r=ve(e,_,t,()=>k(_[n],t),(l,d)=>{d?_.scroll({[t?"left":"top"]:e._getScrollOffset()+l}):_.scrollBy(t?l:0,t?0:l)},()=>f(c,i,_,t))},_dispose(){r&&r._dispose(),s=void 0},_fixScrollJump:()=>{r&&r._fixScrollJump()},_scrollToIndex(c,{align:n,smooth:u,offset:_=0}={}){if(!s)return;if(c=re(c,0,e._getItemsLength()-1),n==="nearest"){const d=e._getItemOffset(c),m=e._getScrollOffset();if(d<m)n="start";else if(d+e._getItemSize(c)>m+e._getViewportSize())n="end";else return}const i=P(s),l=x(i);a(()=>{const d=f(s,i.body,l,t),m=l.innerHeight-i.documentElement.clientHeight,g=l.innerHeight-i.documentElement.clientWidth,S=n==="end"||n==="center"?t?g:m:0;return _+d+e._getItemOffset(c)+(n==="end"?e._getItemSize(c)-(e._getViewportSize()-S):n==="center"?(e._getItemSize(c)-(e._getViewportSize()-S))/2:0)},u)}}},Ye=(e,t)=>{const s=Se(e,!1),r=Se(t,!0);return{_observe(o){s._observe(o),r._observe(o)},_dispose(){s._dispose(),r._dispose()},_scrollTo(o,f){s._scrollTo(f),r._scrollTo(o)},_scrollBy(o,f){s._scrollBy(f),r._scrollBy(o)},_scrollToIndex(o,f){s._scrollToIndex(f),r._scrollToIndex(o)},_fixScrollJump(){s._fixScrollJump(),r._fixScrollJump()}}},le=e=>{let t;return{_observe(s){(t||(t=new(x(P(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},qe=(e,t)=>{let s;const r=t?"width":"height",o=new WeakMap,f=le(a=>{const c=[];for(const{target:n,contentRect:u}of a)if(n.offsetParent)if(n===s)e._update(B,u[r]);else{const _=o.get(n);_!=V&&c.push([_,u[r]])}c.length&&e._update(K,c)});return{_observeRoot(a){f._observe(s=a)},_observeItem:(a,c)=>(o.set(a,c),f._observe(a),()=>{o.delete(a),f._unobserve(a)}),_dispose:f._dispose}},Ge=(e,t)=>{const s=t?"width":"height",r=t?"innerWidth":"innerHeight",o=new WeakMap,f=le(c=>{const n=[];for(const{target:u,contentRect:_}of c){if(!u.offsetParent)continue;const i=o.get(u);i!=V&&n.push([i,_[s]])}n.length&&e._update(K,n)});let a;return{_observeRoot(c){const n=x(P(c)),u=()=>{e._update(B,n[r])};n.addEventListener("resize",u),u(),a=()=>{n.removeEventListener("resize",u)}},_observeItem:(c,n)=>(o.set(c,n),f._observe(c),()=>{o.delete(c),f._unobserve(c)}),_dispose(){a&&a(),f._dispose()}}},Xe=(e,t)=>{let s;const r="height",o="width",f=new WeakMap,a=new Set,c=new Set,n=new Map,u=(i,l)=>`${i}-${l}`,_=le(i=>{const l=new Set,d=new Set;for(const{target:m,contentRect:g}of i)if(m.offsetParent)if(m===s)e._update(B,g[r]),t._update(B,g[o]);else{const S=f.get(m);if(S){const[p,z]=S,D=u(p,z),I=n.get(D),C=[g[r],g[o]];let v,R;I?(I[0]!==C[0]&&(v=!0),I[1]!==C[1]&&(R=!0)):v=R=!0,v&&l.add(p),R&&d.add(z),(v||R)&&n.set(D,C)}}if(l.size){const m=[];l.forEach(g=>{let S=0;c.forEach(p=>{const z=n.get(u(g,p));z&&(S=h(S,z[0]))}),S&&m.push([g,S])}),e._update(K,m)}if(d.size){const m=[];d.forEach(g=>{let S=0;a.forEach(p=>{const z=n.get(u(p,g));z&&(S=h(S,z[1]))}),S&&m.push([g,S])}),t._update(K,m)}});return{_observeRoot(i){_._observe(s=i)},_observeItem(i,l,d){return f.set(i,[l,d]),a.add(l),c.add(d),_._observe(i),()=>{f.delete(i),_._unobserve(i)}},_dispose:_._dispose}},Ze=Ie?X.useLayoutEffect:X.useEffect,pe="current",Re=(e,t)=>{if(Array.isArray(e))for(const s of e)Re(s,t);else e==null||typeof e=="boolean"||t.push(e)},$e=e=>{const t=[];return Re(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},je=e=>{const t=X.useRef();return t[pe]||(t[pe]=e())},He=e=>X.useReducer(e._getStateVersion,void 0,e._getStateVersion)[1];export{We as A,J as U,je as a,He as b,Be as c,Xe as d,Ye as e,we as f,Ke as g,Ue as h,ze as i,Pe as j,qe as k,Se as l,ge as m,Qe as n,Ge as o,Fe as p,$e as q,pe as r,ye as s,Ze as u};
