import{j as O}from"./jsx-runtime-DR9Q75dM.js";import{r as i}from"./index-DRjF_FHU.js";import{b as A,a as F,A as K,j as J,u as L,r,U as M,c as Q,d as W,m as X,g as Y,s as Z,e as ee,k as te,l as se,n as re}from"./useLatestRef-xAIQLCCh.js";import{u as oe,L as le}from"./useChildren-hayhccfg.js";import{r as ie}from"./index-DU7l7UOc.js";import{u as ne}from"./useMergeRefs-Drgf10yf.js";const ae=i.forwardRef(({children:x,count:y,domRef:N,overscan:C,itemSize:S,shift:H,horizontal:k,keepMounted:p,cache:j,startMargin:g=0,ssrCount:$,as:c="div",item:w="div",scrollRef:I,onScroll:U,onScrollEnd:D},P)=>{c=c;const[q,u]=oe(x,y),E=i.useRef(null),_=i.useRef(!!$),h=A(U),b=A(D),[e,f,o,d]=F(()=>{const t=!!k,s=ee(u,S,C,$,j,!S);return[s,te(s,t),se(s,t),t]});u!==e.$getItemsLength()&&e.$update(K,[u,H]),g!==e.$getStartSpacerSize()&&e.$update(J,g);const[G,z]=i.useReducer(e.$getStateVersion,void 0,e.$getStateVersion),[v,T]=e.$getRange(),B=e.$isScrolling(),R=e.$getTotalSize(),n=[],m=t=>{const s=q(t);return O.jsx(le,{_resizer:f.$observeItem,_index:t,_offset:e.$getItemOffset(t),_hide:e.$isUnmeasuredItem(t),_as:w,_children:s,_isHorizontal:d,_isSSR:_[r]},re(s,t))};L(()=>{_[r]=!1;const t=e.$subscribe(M,a=>{a?ie.flushSync(z):z()}),s=e.$subscribe(Q,()=>{h[r]&&h[r](e.$getScrollOffset())}),l=e.$subscribe(W,()=>{b[r]&&b[r]()}),V=a=>{f.$observeRoot(a),o.$observe(a)};return I?X(()=>V(I[r])):V(E[r].parentElement),()=>{t(),s(),l(),f.$dispose(),o.$dispose()}},[]),L(()=>{o.$fixScrollJump()},[G]),i.useImperativeHandle(P,()=>({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return Y(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:o.$scrollToIndex,scrollTo:o.$scrollTo,scrollBy:o.$scrollBy}),[]);for(let t=v,s=T;t<=s;t++)n.push(m(t));if(p){const t=[],s=[];Z(p).forEach(l=>{l<v&&t.push(m(l)),l>T&&s.push(m(l))}),n.unshift(...t),n.push(...s)}return O.jsx(c,{ref:ne(E,N),style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?R:"100%",height:d?"100%":R,pointerEvents:B?"none":void 0},children:n})});ae.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{startMargin:{defaultValue:{value:"0",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ae as V};
