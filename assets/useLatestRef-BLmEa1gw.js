import{r as q}from"./iframe-CvEKG1rB.js";const M=null,{min:N,max:b,abs:de,floor:he}=Math,ne=(e,t,s)=>N(s,b(t,e)),we=e=>[...e].sort((t,s)=>t-s),Se=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},U=()=>{let e;return[new Promise(s=>{e=s}),e]},oe=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},J=-1,W=(e,t,s)=>{const o=s?"unshift":"push";for(let r=0;r<t;r++)e[o](J);return e},pe=(e,t)=>{const s=e._sizes[t];return s===J?e._defaultItemSize:s},Ce=(e,t,s)=>{const o=e._sizes[t]===J;return e._sizes[t]=s,e._computedOffsetIndex=N(t,e._computedOffsetIndex),o},K=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=pe(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},A=(e,t,s=0,o=e._length-1)=>{for(;s<=o;){const r=he((s+o)/2);if(K(e,r)<=t){if(K(e,r+1)>t)return r;s=r+1}else o=r-1}return ne(s,0,e._length-1)},ye=(e,t,s,o)=>{if(o=N(o,e._length-1),K(e,o)<=t){const r=A(e,s,o);return[A(e,t,o,r),r]}else{const r=A(e,t,void 0,o);return[r,A(e,s,r)]}},Ae=(e,t)=>{let s=0;const o=[];e._sizes.forEach((n,i)=>{n!==J&&(o.push(n),i<t&&s++)}),e._computedOffsetIndex=-1;const r=we(o),u=r.length,d=u/2|0,l=u%2===0?(r[d-1]+r[d])/2:r[d],c=e._defaultItemSize;return((e._defaultItemSize=l)-c)*b(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?W(s[0].slice(0,N(e,s[0].length)),b(0,e-s[0].length)):W([],e),_length:e,_computedOffsetIndex:-1,_offsets:W([],e+1)}),Ne=e=>[e._sizes.slice(),e._defaultItemSize],ae=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:N(t-1,e._computedOffsetIndex),e._length=t,o>0?(W(e._offsets,o),W(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((r,u)=>r-(u===J?e._defaultItemSize:u),0))},ge=typeof window<"u",Ie=()=>document.documentElement,x=e=>e.ownerDocument,P=e=>e.defaultView,ze=oe(()=>ge?getComputedStyle(Ie()).direction==="rtl":!1),Oe=oe(()=>/iP(hone|od|ad)/.test(navigator.userAgent)?!0:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>0),Ve=oe(()=>"scrollBehavior"in Ie().style),Me=2147483647,V=0,me=1,_e=2,D=0,j=1,Q=2,H=1,be=2,k=3,B=4,Je=5,Ee=6,ee=7,Le=8,y=1,te=2,De=4,We=8,Ke=e=>b(e.$getTotalSize(),e.$getViewportSize()),Be=(e,t=40,s=0,o,r=!1)=>{let u=!!s,d=1,l=0,c=0,n=0,i=0,f=0,_=0,m=V,a=D,S=M,I=[0,u?b(s-1,0):-1],z=0;const $=ke(e,t,o),R=new Set,h=()=>n-c,T=()=>h()+f+i,ie=(g,p)=>ye($,g,p,I[0]),le=()=>K($,$._length),fe=g=>K($,g)-f,X=g=>pe($,g),ue=(g,p=J)=>$._sizes[g]===p,Z=g=>{g&&(Oe()&&m!==V||S&&a===j?f+=g:i+=g)};return{$dispose:()=>{R.clear()},$getStateVersion:()=>d,$getCacheSnapshot:()=>Ne($),$getRange:(g=200)=>{if(!l||u)return I;let p,v;if(_)[p,v]=I;else{let w=b(0,T()),O=w+l;r||(g=b(0,g),m!==me&&(w-=g),m!==_e&&(O+=g)),[p,v]=I=ie(b(0,w),b(0,O)),S&&(p=N(p,S[0]),v=b(v,S[1]))}return[b(p,0),N(v,$._length-1)]},$findStartIndex:()=>A($,T()),$findEndIndex:()=>A($,T()+l),$isUnmeasuredItem:ue,$getItemOffset:fe,$getItemSize:X,$getItemsLength:()=>$._length,$getScrollOffset:()=>n,$isScrolling:()=>m!==V,$getViewportSize:()=>l,$getStartSpacerSize:()=>c,$getTotalSize:le,_flushJump:()=>(_=i,i=0,[_,a===Q]),$subscribe:(g,p)=>{const v=[g,p];return R.add(v),()=>{R.delete(v)}},$update:(g,p)=>{let v,w,O=0;switch(g){case H:{if(p===n&&a===D)break;const C=_;_=0;const E=p-n,L=de(E);!(C&&L<de(C)+1)&&a===D&&(m=E<0?_e:me),u&&(u=!1),n=p,O=De;const G=h();G>=-l&&G<=le()&&(O+=y,w=L>l);break}case be:{O=We,m!==V&&(v=!0,O+=y),m=V,a=D,S=M;break}case k:{const C=p.filter(([E,L])=>!ue(E,L));if(!C.length)break;Z(C.reduce((E,[L,Y])=>((a===Q||(S&&a===j?L<S[0]:fe(L+(m===V&&a===D?1:0))<h()))&&(E+=Y-X(L)),E),0));for(const[E,L]of C){const Y=X(E),G=Ce($,E,L);r&&(z+=G?L:L-Y)}r&&l&&z>l&&(Z(Ae($,A($,T()))),r=!1),O=y+te,w=!0;break}case B:{l!==p&&(l||(w=!0),l=p,O=y+te);break}case Je:{p[1]?(Z(ae($,p[0],!0)),a=Q,O=y):(ae($,p[0]),O=y);break}case Ee:{c=p;break}case ee:{a=j;break}case Le:{S=ie(p,p+l),O=y;break}}O&&(d=(d&Me)+1,v&&f&&(i+=f,f=0),R.forEach(([C,E])=>{O&C&&E(w)}))}}},re=setTimeout,xe=(e,t)=>{let s;const o=()=>{s!=M&&clearTimeout(s)},r=()=>{o(),s=re(()=>{s=M,e()},t)};return r._cancel=o,r},F=(e,t)=>t&&ze()?-e:e,ve=(e,t,s,o,r,u)=>{const d=Date.now;let l=0,c=!1,n=!1,i=!1,f=!1;const _=xe(()=>{if(c||n){c=!1,_();return}i=!1,e.$update(be)},150),m=()=>{l=d(),i&&(f=!0),u&&e.$update(Ee,u()),e.$update(H,o()),_()},a=(z=>{if(c||!e.$isScrolling()||z.ctrlKey)return;const $=d()-l;150>$&&50<$&&(s?z.deltaX:z.deltaY)&&(c=!0)}),S=()=>{n=!0,i=f=!1},I=()=>{n=!1,Oe()&&(i=!0)};return t.addEventListener("scroll",m),t.addEventListener("wheel",a,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",I,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",m),t.removeEventListener("wheel",a),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",I),_._cancel()},_fixScrollJump:()=>{const[z,$]=e._flushJump();z&&(r(F(z,s),$,f),f=!1,$&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(H,o()))}}},Te=(e,t,s)=>{let o;return[async(r,u)=>{if(!await t())return;o&&o();const d=()=>{const[l,c]=U();return o=()=>{c(!1)},e.$getViewportSize()&&re(o,150),[l,e.$subscribe(te,()=>{c(!0)})]};if(u&&Ve())e.$update(Le,r()),Se(async()=>{for(;;){let l=!0;for(let[i,f]=e.$getRange();i<=f;i++)if(e.$isUnmeasuredItem(i)){l=!1;break}if(l)break;const[c,n]=d();try{if(!await c)return}finally{n()}}e.$update(ee),s(r(),u)});else for(;;){const[l,c]=d();try{if(e.$update(ee),s(r()),!await l)return}finally{c()}}},()=>{o&&o()}]},$e=(e,t)=>{let s,o,r=U();const u=t?"scrollLeft":"scrollTop",d=t?"overflowX":"overflowY",[l,c]=Te(e,()=>r[0],(n,i)=>{n=F(n,t),i?s.scrollTo({[t?"left":"top"]:n,behavior:"smooth"}):s[u]=n});return{$observe(n){s=n,o=ve(e,n,t,()=>F(n[u],t),(i,f,_)=>{if(_){const m=n.style,a=m[d];m[d]="hidden",re(()=>{m[d]=a})}n[u]=e.$getScrollOffset()+i,f&&c()}),r[1](!0)},$dispose(){o&&o._dispose(),r[1](!1),r=U()},$scrollTo(n){l(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),l(()=>n)},$scrollToIndex(n,{align:i,smooth:f,offset:_=0}={}){if(n=ne(n,0,e.$getItemsLength()-1),i==="nearest"){const m=e.$getItemOffset(n),a=e.$getScrollOffset();if(m<a)i="start";else if(m+e.$getItemSize(n)>a+e.$getViewportSize())i="end";else return}l(()=>_+e.$getStartSpacerSize()+e.$getItemOffset(n)+(i==="end"?e.$getItemSize(n)-e.$getViewportSize():i==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),f)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Fe=(e,t)=>{let s,o,r=U();const u=t?"left":"top",[d]=Te(e,()=>r[0],(c,n)=>{c=F(c,t);const i=P(x(s));n?i.scroll({[u]:c,behavior:"smooth"}):i.scroll({[u]:c})}),l=(c,n,i,f,_=0)=>{const m=f?"offsetLeft":"offsetTop",a=_+(f&&ze()?i.innerWidth-c[m]-c.offsetWidth:c[m]),S=c.offsetParent;return c===n||!S?a:l(S,n,i,f,a)};return{$observe(c){s=c;const n=t?"scrollX":"scrollY",i=x(c),f=P(i);o=ve(e,f,t,()=>F(f[n],t),(_,m)=>{m?f.scroll({[u]:e.$getScrollOffset()+_}):f.scrollBy({[u]:_})},()=>l(c,i.body,f,t)),r[1](!0)},$dispose(){o&&o._dispose(),s=void 0,r[1](!1),r=U()},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(c,{align:n,smooth:i,offset:f=0}={}){if(!s)return;if(c=ne(c,0,e.$getItemsLength()-1),n==="nearest"){const I=e.$getItemOffset(c),z=e.$getScrollOffset();if(I<z)n="start";else if(I+e.$getItemSize(c)>z+e.$getViewportSize())n="end";else return}const _=x(s),m=P(_),a=_.documentElement,S=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);d(()=>f+l(s,_.body,m,t)+e.$getItemOffset(c)+(n==="end"?e.$getItemSize(c)-(e.$getViewportSize()-S()):n==="center"?(e.$getItemSize(c)-(e.$getViewportSize()-S()))/2:0),i)}}},Ye=(e,t)=>{const s=$e(e,!1),o=$e(t,!0);return{$observe(r){s.$observe(r),o.$observe(r)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(r,u){s.$scrollTo(u),o.$scrollTo(r)},$scrollBy(r,u){s.$scrollBy(u),o.$scrollBy(r)},$scrollToIndex(r,u){s.$scrollToIndex(u),o.$scrollToIndex(r)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},ce=e=>{let t;return{_observe(s){(t||(t=new(P(x(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ge=(e,t)=>{let s;const o=t?"width":"height",r=new WeakMap,u=ce(d=>{const l=[];for(const{target:c,contentRect:n}of d)if(c.offsetParent)if(c===s)e.$update(B,n[o]);else{const i=r.get(c);i!=M&&l.push([i,n[o]])}l.length&&e.$update(k,l)});return{$observeRoot(d){u._observe(s=d)},$observeItem:(d,l)=>(r.set(d,l),u._observe(d),()=>{r.delete(d),u._unobserve(d)}),$dispose:u._dispose}},qe=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,u=ce(l=>{const c=[];for(const{target:n,contentRect:i}of l){if(!n.offsetParent)continue;const f=r.get(n);f!=M&&c.push([f,i[s]])}c.length&&e.$update(k,c)});let d;return{$observeRoot(l){const c=P(x(l)),n=()=>{e.$update(B,c[o])};c.addEventListener("resize",n),Se(n),d=()=>{c.removeEventListener("resize",n)}},$observeItem:(l,c)=>(r.set(l,c),u._observe(l),()=>{r.delete(l),u._unobserve(l)}),$dispose(){d&&d(),u._dispose()}}},Xe=(e,t)=>{let s;const o=new WeakMap,r=new Set,u=new Set,d=new Map,l=(n,i)=>`${n}-${i}`,c=ce(n=>{const i=new Set,f=new Set;for(const{target:_,contentRect:{width:m,height:a}}of n)if(_.offsetParent)if(_===s)e.$update(B,a),t.$update(B,m);else{const S=o.get(_);if(S){const[I,z]=S,$=l(I,z),R=d.get($);let h,T;R?(R[0]!==a&&(h=!0),R[1]!==m&&(T=!0)):h=T=!0,h&&i.add(I),T&&f.add(z),(h||T)&&d.set($,[a,m])}}if(i.size){const _=[];i.forEach(m=>{let a=0;u.forEach(S=>{const I=d.get(l(m,S));I&&(a=b(a,I[0]))}),a&&_.push([m,a])}),e.$update(k,_)}if(f.size){const _=[];f.forEach(m=>{let a=0;r.forEach(S=>{const I=d.get(l(S,m));I&&(a=b(a,I[1]))}),a&&_.push([m,a])}),t.$update(k,_)}});return{$observeRoot(n){c._observe(s=n)},$observeItem(n,i,f){return o.set(n,[i,f]),r.add(i),u.add(f),c._observe(n),()=>{o.delete(n),c._unobserve(n)}},$resizeCols(n){for(const[i]of n)for(let f=0;f<e.$getItemsLength();f++)d.delete(l(f,i));t.$update(k,n)},$resizeRows(n){for(const[i]of n)for(let f=0;f<t.$getItemsLength();f++)d.delete(l(i,f));e.$update(k,n)},$dispose:c._dispose}},Pe=ge?q.useLayoutEffect:q.useEffect,se="current",Re=(e,t)=>{if(Array.isArray(e))for(const s of e)Re(s,t);else e==null||typeof e=="boolean"||t.push(e)},Ze=e=>{const t=[];return Re(e,t),t},je=(e,t)=>{const s=e.key;return s??"_"+t},Qe=e=>{const t=q.useRef(null);return t[se]||(t[se]=e())},He=e=>{const t=q.useRef(e);return Pe(()=>{t[se]=e},[e]),t};export{Je as A,y as U,Qe as a,Ee as b,Pe as c,De as d,We as e,Be as f,Ke as g,Ge as h,$e as i,je as j,qe as k,Fe as l,Se as m,ze as n,Ze as o,Xe as p,Ye as q,se as r,we as s,He as u};
