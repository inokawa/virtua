import{j as O}from"./jsx-runtime-DR9Q75dM.js";import{r as x}from"./index-DRjF_FHU.js";import{r as rt}from"./index-uWwxbAOW.js";import{V as q}from"./VList-CgnuYgT1.js";import"./Virtualizer-BhVEk_pv.js";import"./useRerender-D4gg_Yo3.js";import"./useChildren-D7-c9seN.js";var ot=function(){var s=function(r,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])},s(r,t)};return function(r,t){s(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),d=function(){return d=Object.assign||function(s){for(var r,t=1,i=arguments.length;t<i;t++){r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(s[e]=r[e])}return s},d.apply(this,arguments)},U={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},X={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},N={width:"20px",height:"20px",position:"absolute"},nt={top:d(d({},U),{top:"-5px"}),right:d(d({},X),{left:void 0,right:"-5px"}),bottom:d(d({},U),{top:void 0,bottom:"-5px"}),left:d(d({},X),{left:"-5px"}),topRight:d(d({},N),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:d(d({},N),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:d(d({},N),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:d(d({},N),{left:"-10px",top:"-10px",cursor:"nw-resize"})},at=function(s){ot(r,s);function r(){var t=s!==null&&s.apply(this,arguments)||this;return t.onMouseDown=function(i){t.props.onResizeStart(i,t.props.direction)},t.onTouchStart=function(i){t.props.onResizeStart(i,t.props.direction)},t}return r.prototype.render=function(){return x.createElement("div",{className:this.props.className||"",style:d(d({position:"absolute",userSelect:"none"},nt[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},r}(x.PureComponent),ht=function(){var s=function(r,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])},s(r,t)};return function(r,t){s(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),z=function(){return z=Object.assign||function(s){for(var r,t=1,i=arguments.length;t<i;t++){r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(s[e]=r[e])}return s},z.apply(this,arguments)},pt={width:"auto",height:"auto"},L=function(s,r,t){return Math.max(Math.min(s,t),r)},Y=function(s,r,t){var i=Math.round(s/r);return i*r+t*(i-1)},_=function(s,r){return new RegExp(s,"i").test(r)},C=function(s){return!!(s.touches&&s.touches.length)},lt=function(s){return!!((s.clientX||s.clientX===0)&&(s.clientY||s.clientY===0))},G=function(s,r,t){t===void 0&&(t=0);var i=r.reduce(function(n,a,o){return Math.abs(a-s)<Math.abs(r[n]-s)?o:n},0),e=Math.abs(r[i]-s);return t===0||e<t?r[i]:s},k=function(s){return s=s.toString(),s==="auto"||s.endsWith("px")||s.endsWith("%")||s.endsWith("vh")||s.endsWith("vw")||s.endsWith("vmax")||s.endsWith("vmin")?s:s+"px"},A=function(s,r,t,i){if(s&&typeof s=="string"){if(s.endsWith("px"))return Number(s.replace("px",""));if(s.endsWith("%")){var e=Number(s.replace("%",""))/100;return r*e}if(s.endsWith("vw")){var e=Number(s.replace("vw",""))/100;return t*e}if(s.endsWith("vh")){var e=Number(s.replace("vh",""))/100;return i*e}}return s},ut=function(s,r,t,i,e,n,a){return i=A(i,s.width,r,t),e=A(e,s.height,r,t),n=A(n,s.width,r,t),a=A(a,s.height,r,t),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof e>"u"?void 0:Number(e),minWidth:typeof n>"u"?void 0:Number(n),minHeight:typeof a>"u"?void 0:Number(a)}},dt=function(s){return Array.isArray(s)?s:[s,s]},ft=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],I="__resizable_base__",J=function(s){ht(r,s);function r(t){var i,e,n,a,o=s.call(this,t)||this;return o.ratio=1,o.resizable=null,o.parentLeft=0,o.parentTop=0,o.resizableLeft=0,o.resizableRight=0,o.resizableTop=0,o.resizableBottom=0,o.targetLeft=0,o.targetTop=0,o.appendBase=function(){if(!o.resizable||!o.window)return null;var p=o.parentNode;if(!p)return null;var h=o.window.document.createElement("div");return h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.transform="scale(0, 0)",h.style.left="0",h.style.flex="0 0 100%",h.classList?h.classList.add(I):h.className+=I,p.appendChild(h),h},o.removeBase=function(p){var h=o.parentNode;h&&h.removeChild(p)},o.state={isResizing:!1,width:(e=(i=o.propsSize)===null||i===void 0?void 0:i.width)!==null&&e!==void 0?e:"auto",height:(a=(n=o.propsSize)===null||n===void 0?void 0:n.height)!==null&&a!==void 0?a:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},o.onResizeStart=o.onResizeStart.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.onMouseUp=o.onMouseUp.bind(o),o}return Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||pt},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){var t=0,i=0;if(this.resizable&&this.window){var e=this.resizable.offsetWidth,n=this.resizable.offsetHeight,a=this.resizable.style.position;a!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:e,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:n,this.resizable.style.position=a}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sizeStyle",{get:function(){var t=this,i=this.props.size,e=function(o){var p;if(typeof t.state[o]>"u"||t.state[o]==="auto")return"auto";if(t.propsSize&&t.propsSize[o]&&(!((p=t.propsSize[o])===null||p===void 0)&&p.toString().endsWith("%"))){if(t.state[o].toString().endsWith("%"))return t.state[o].toString();var h=t.getParentSize(),l=Number(t.state[o].toString().replace("px","")),f=l/h[o]*100;return f+"%"}return k(t.state[o])},n=i&&typeof i.width<"u"&&!this.state.isResizing?k(i.width):e("width"),a=i&&typeof i.height<"u"&&!this.state.isResizing?k(i.height):e("height");return{width:n,height:a}},enumerable:!1,configurable:!0}),r.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,e=this.parentNode.style.flexWrap;e!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var n={width:t.offsetWidth,height:t.offsetHeight};return i&&(this.parentNode.style.flexWrap=e),this.removeBase(t),n},r.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},r.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},r.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},r.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},r.prototype.createSizeForCssProperty=function(t,i){var e=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===t&&(typeof e>"u"||e==="auto")?"auto":t},r.prototype.calculateNewMaxFromBoundary=function(t,i){var e=this.props.boundsByDirection,n=this.state.direction,a=e&&_("left",n),o=e&&_("top",n),p,h;if(this.props.bounds==="parent"){var l=this.parentNode;l&&(p=a?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),h=o?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(p=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=o?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(p=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=o?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return p&&Number.isFinite(p)&&(t=t&&t<p?t:p),h&&Number.isFinite(h)&&(i=i&&i<h?i:h),{maxWidth:t,maxHeight:i}},r.prototype.calculateNewSizeFromDirection=function(t,i){var e=this.props.scale||1,n=dt(this.props.resizeRatio||1),a=n[0],o=n[1],p=this.state,h=p.direction,l=p.original,f=this.props,u=f.lockAspectRatio,S=f.lockAspectRatioExtraHeight,b=f.lockAspectRatioExtraWidth,c=l.width,w=l.height,m=S||0,y=b||0;return _("right",h)&&(c=l.width+(t-l.x)*a/e,u&&(w=(c-y)/this.ratio+m)),_("left",h)&&(c=l.width-(t-l.x)*a/e,u&&(w=(c-y)/this.ratio+m)),_("bottom",h)&&(w=l.height+(i-l.y)*o/e,u&&(c=(w-m)*this.ratio+y)),_("top",h)&&(w=l.height-(i-l.y)*o/e,u&&(c=(w-m)*this.ratio+y)),{newWidth:c,newHeight:w}},r.prototype.calculateNewSizeFromAspectRatio=function(t,i,e,n){var a=this.props,o=a.lockAspectRatio,p=a.lockAspectRatioExtraHeight,h=a.lockAspectRatioExtraWidth,l=typeof n.width>"u"?10:n.width,f=typeof e.width>"u"||e.width<0?t:e.width,u=typeof n.height>"u"?10:n.height,S=typeof e.height>"u"||e.height<0?i:e.height,b=p||0,c=h||0;if(o){var w=(u-b)*this.ratio+c,m=(S-b)*this.ratio+c,y=(l-c)/this.ratio+b,g=(f-c)/this.ratio+b,v=Math.max(l,w),W=Math.min(f,m),E=Math.max(u,y),M=Math.min(S,g);t=L(t,v,W),i=L(i,E,M)}else t=L(t,l,f),i=L(i,u,S);return{newWidth:t,newHeight:i}},r.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var e=i.getBoundingClientRect();this.parentLeft=e.left*t,this.parentTop=e.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left*t,this.targetTop=n.top*t}if(this.resizable){var a=this.resizable.getBoundingClientRect(),o=a.left,p=a.top,h=a.right,l=a.bottom;this.resizableLeft=o*t,this.resizableRight=h*t,this.resizableTop=p*t,this.resizableBottom=l*t}},r.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var e=0,n=0;if(t.nativeEvent&&lt(t.nativeEvent)?(e=t.nativeEvent.clientX,n=t.nativeEvent.clientY):t.nativeEvent&&C(t.nativeEvent)&&(e=t.nativeEvent.touches[0].clientX,n=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var a=this.props.onResizeStart(t,i,this.resizable);if(a===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var o,p=this.window.getComputedStyle(this.resizable);if(p.flexBasis!=="auto"){var h=this.parentNode;if(h){var l=this.window.getComputedStyle(h).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",o=p.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var f={original:{x:e,y:n,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:z(z({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:i,flexBasis:o};this.setState(f)}},r.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&C(t))try{t.preventDefault(),t.stopPropagation()}catch{}var e=this.props,n=e.maxWidth,a=e.maxHeight,o=e.minWidth,p=e.minHeight,h=C(t)?t.touches[0].clientX:t.clientX,l=C(t)?t.touches[0].clientY:t.clientY,f=this.state,u=f.direction,S=f.original,b=f.width,c=f.height,w=this.getParentSize(),m=ut(w,this.window.innerWidth,this.window.innerHeight,n,a,o,p);n=m.maxWidth,a=m.maxHeight,o=m.minWidth,p=m.minHeight;var y=this.calculateNewSizeFromDirection(h,l),g=y.newHeight,v=y.newWidth,W=this.calculateNewMaxFromBoundary(n,a);this.props.snap&&this.props.snap.x&&(v=G(v,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(g=G(g,this.props.snap.y,this.props.snapGap));var E=this.calculateNewSizeFromAspectRatio(v,g,{width:W.maxWidth,height:W.maxHeight},{width:o,height:p});if(v=E.newWidth,g=E.newHeight,this.props.grid){var M=Y(v,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),T=Y(g,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),B=this.props.snapGap||0,K=B===0||Math.abs(M-v)<=B?M:v,Q=B===0||Math.abs(T-g)<=B?T:g;v=K,g=Q}var tt={width:v-S.width,height:g-S.height};if(b&&typeof b=="string"){if(b.endsWith("%")){var P=v/w.width*100;v=P+"%"}else if(b.endsWith("vw")){var j=v/this.window.innerWidth*100;v=j+"vw"}else if(b.endsWith("vh")){var D=v/this.window.innerHeight*100;v=D+"vh"}}if(c&&typeof c=="string"){if(c.endsWith("%")){var P=g/w.height*100;g=P+"%"}else if(c.endsWith("vw")){var j=g/this.window.innerWidth*100;g=j+"vw"}else if(c.endsWith("vh")){var D=g/this.window.innerHeight*100;g=D+"vh"}}var R={width:this.createSizeForCssProperty(v,"width"),height:this.createSizeForCssProperty(g,"height")};this.flexDir==="row"?R.flexBasis=R.width:this.flexDir==="column"&&(R.flexBasis=R.height);var et=this.state.width!==R.width,it=this.state.height!==R.height,st=this.state.flexBasis!==R.flexBasis,F=et||it||st;F&&rt.flushSync(function(){i.setState(R)}),this.props.onResize&&F&&this.props.onResize(t,u,this.resizable,tt)}},r.prototype.onMouseUp=function(t){var i,e,n=this.state,a=n.isResizing,o=n.direction,p=n.original;if(!(!a||!this.resizable)){var h={width:this.size.width-p.width,height:this.size.height-p.height};this.props.onResizeStop&&this.props.onResizeStop(t,o,this.resizable,h),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(e=this.props.size.height)!==null&&e!==void 0?e:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:z(z({},this.state.backgroundStyle),{cursor:"auto"})})}},r.prototype.updateSize=function(t){var i,e;this.setState({width:(i=t.width)!==null&&i!==void 0?i:"auto",height:(e=t.height)!==null&&e!==void 0?e:"auto"})},r.prototype.renderResizer=function(t){var i=this,e=this.props,n=e.enable,a=e.handleStyles,o=e.handleClasses,p=e.handleWrapperStyle,h=e.handleWrapperClass,l=e.handleComponent;if(!n)return null;var f=t.filter(function(u){return n[u]!==!1}).map(function(u){return n[u]!==!1?x.createElement(at,{key:u,direction:u,onResizeStart:i.onResizeStart,replaceStyles:a&&a[u],className:o&&o[u]},l&&l[u]?l[u]:null):null});return x.createElement("div",{className:h,style:p},f)},r.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(a,o){return ft.indexOf(o)!==-1||(a[o]=t.props[o]),a},{}),e=z(z(z({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(e.flexBasis=this.state.flexBasis);var n=this.props.as||"div";return x.createElement(n,z({style:e,className:this.props.className},i,{ref:function(a){a&&(t.resizable=a)}}),this.state.isResizing&&x.createElement("div",{style:this.state.backgroundStyle}),this.renderResizer(["topLeft","top","topRight","left"]),this.props.children,this.renderResizer(["right","bottomLeft","bottom","bottomRight"]))},r.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},r}(x.PureComponent);const _t={component:q},ct={height:50,borderBottom:"solid 4px #ccc",background:"#fff"},gt={top:!1,bottom:!0,right:!1,left:!1,topRight:!1,topLeft:!1,bottomRight:!1,bottomLeft:!1},vt=({id:s,height:r,onResize:t})=>O.jsx(J,{size:{height:r,width:"100%"},enable:gt,style:ct,onResizeStop:(i,e,n,a)=>{t(s,a.height)},children:s}),H={name:"With re-resizable",render:()=>{const[s,r]=x.useState(()=>Array.from({length:1e3},()=>50)),t=x.useCallback((i,e)=>{r(n=>{const a=[...n];return a[i]+=e,a})},[]);return O.jsx(J,{defaultSize:{width:400,height:400},style:{border:"solid 4px #ccc"},children:O.jsx(q,{style:{width:"100%",height:"100%"},children:Array.from({length:1e3},(i,e)=>O.jsx(vt,{id:e,height:s[e],onResize:t},e))})})}};var V,$,Z;H.parameters={...H.parameters,docs:{...(V=H.parameters)==null?void 0:V.docs,source:{originalSource:`{
  name: "With re-resizable",
  render: () => {
    const [heights, setHeights] = useState(() => Array.from({
      length: 1000
    }, () => 50));
    const onResize = useCallback((id: number, height: number) => {
      setHeights(p => {
        const s = [...p];
        s[id] += height;
        return s;
      });
    }, []);
    return <Resizable defaultSize={{
      width: 400,
      height: 400
    }} style={{
      border: "solid 4px #ccc"
    }}>
        <VList style={{
        width: "100%",
        height: "100%"
      }}>
          {Array.from({
          length: 1000
        }, (_, i) => <ResizableItem key={i} id={i} height={heights[i]} onResize={onResize} />)}
        </VList>
      </Resizable>;
  }
}`,...(Z=($=H.parameters)==null?void 0:$.docs)==null?void 0:Z.source}}};const Wt=["Default"];export{H as Default,Wt as __namedExportsOrder,_t as default};
