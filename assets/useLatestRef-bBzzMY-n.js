import{r as X}from"./iframe-5pQJk-CT.js";const N=null,{min:k,max:E,abs:ae,floor:Re}=Math,re=(e,t,s)=>k(s,E(t,e)),he=e=>[...e].sort((t,s)=>t-s),we=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},x=()=>{let e;return[new Promise(s=>{e=s}),e]},ie=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},M=-1,D=(e,t,s)=>{const o=s?"unshift":"push";for(let i=0;i<t;i++)e[o](M);return e},q=(e,t)=>{const s=e._sizes[t];return s===M?e._defaultItemSize:s},Ce=(e,t,s)=>{const o=e._sizes[t]===M;return e._sizes[t]=s,e._computedOffsetIndex=k(t,e._computedOffsetIndex),o},Z=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=q(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},ye=e=>e._length?Z(e,e._length-1)+q(e,e._length-1):0,y=(e,t,s=0,o=e._length-1)=>{for(;s<=o;){const i=Re((s+o)/2),f=Z(e,i);if(f<=t){if(f+q(e,i)>t)return i;s=i+1}else o=i-1}return re(s,0,e._length-1)},Ae=(e,t,s,o)=>{if(o=k(o,e._length-1),Z(e,o)<=t){const i=y(e,t+s,o);return[y(e,t,o,i),i]}else{const i=y(e,t,void 0,o);return[i,y(e,t+s,i)]}},Ne=(e,t)=>{let s=0;const o=[];e._sizes.forEach((n,c)=>{n!==M&&(o.push(n),c<t&&s++)}),e._computedOffsetIndex=-1;const i=he(o),f=i.length,d=f/2|0,u=f%2===0?(i[d-1]+i[d])/2:i[d],r=e._defaultItemSize;return((e._defaultItemSize=u)-r)*E(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?D(s[0].slice(0,k(e,s[0].length)),E(0,e-s[0].length)):D([],e),_length:e,_computedOffsetIndex:-1,_offsets:D([],e)}),Ve=e=>[e._sizes.slice(),e._defaultItemSize],me=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:k(t-1,e._computedOffsetIndex),e._length=t,o>0?(D(e._offsets,o),D(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((i,f)=>i-(f===M?e._defaultItemSize:f),0))},pe=typeof window<"u",ge=()=>document.documentElement,W=e=>e.ownerDocument,P=e=>e.defaultView,ze=ie(()=>pe?getComputedStyle(ge()).direction==="rtl":!1),Ie=ie(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Me=ie(()=>"scrollBehavior"in ge().style),Je=2147483647,V=0,_e=1,Se=2,G=0,H=1,ee=2,te=1,be=2,A=3,U=4,De=5,Oe=6,se=7,Ee=8,C=1,ne=2,We=4,Pe=8,Be=e=>E(e.$getTotalSize(),e.$getViewportSize()),Fe=(e,t=40,s=4,o=0,i,f=!1)=>{let d=!!o,u=1,r=0,n=0,c=0,l=0,m=0,_=0,a=V,S=G,$=d?[0,E(o-1,0)]:N,I=[0,0],L=0;const g=ke(e,t,i),w=new Set,R=()=>c-n,v=()=>R()+m+l,fe=p=>Ae(g,p,r,I[0]),ue=()=>ye(g),de=p=>Z(g,p)-m,B=p=>q(g,p),j=p=>{p&&(Ie()&&a!==V||$&&S===H?m+=p:l+=p)};return{$getStateVersion:()=>u,$getCacheSnapshot:()=>Ve(g),$getRange:()=>{let p,z;return _?[p,z]=I:([p,z]=I=fe(E(0,v())),$&&(p=k(p,$[0]),z=E(z,$[1]))),a!==_e&&(p-=E(0,s)),a!==Se&&(z+=E(0,s)),[E(p,0),k(z,g._length-1)]},$findStartIndex:()=>y(g,v()),$findEndIndex:()=>y(g,v()+r),$isUnmeasuredItem:p=>g._sizes[p]===M,$getItemOffset:de,$getItemSize:B,$getItemsLength:()=>g._length,$getScrollOffset:()=>c,$isScrolling:()=>a!==V,$getViewportSize:()=>r,$getStartSpacerSize:()=>n,$getTotalSize:ue,_flushJump:()=>(_=l,l=0,[_,S===ee]),$subscribe:(p,z)=>{const J=[p,z];return w.add(J),()=>{w.delete(J)}},$update:(p,z)=>{let J,Q,T=0;switch(p){case te:{const h=_;_=0;const O=z-c,b=ae(O);!(h&&b<ae(h)+1)&&S===G&&(a=O<0?Se:_e),d&&($=N,d=!1),c=z,T=We;const Y=R();Y>=-r&&Y<=ue()&&(T+=C,Q=b>r);break}case be:{T=Pe,a!==V&&(J=!0,T+=C),a=V,S=G,$=N;break}case A:{const h=z.filter(([O,b])=>g._sizes[O]!==b);if(!h.length)break;j(h.reduce((O,[b,F])=>((S===ee||($&&S===H?b<$[0]:de(b)+(a===V&&S===G?B(b):0)<R()))&&(O+=F-B(b)),O),0));for(const[O,b]of h){const F=B(O),Y=Ce(g,O,b);f&&(L+=Y?b:b-F)}f&&r&&L>r&&(j(Ne(g,y(g,v()))),f=!1),T=C+ne,Q=!0;break}case U:{r!==z&&(r=z,T=C+ne);break}case De:{z[1]?(j(me(g,z[0],!0)),S=ee,T=C):(me(g,z[0]),T=C);break}case Oe:{n=z;break}case se:{S=H;break}case Ee:{$=fe(z),T=C;break}}T&&(u=(u&Je)+1,J&&m&&(l+=m,m=0),w.forEach(([h,O])=>{T&h&&O(Q)}))}}},ce=setTimeout,xe=(e,t)=>{let s;const o=()=>{s!=N&&clearTimeout(s)},i=()=>{o(),s=ce(()=>{s=N,e()},t)};return i._cancel=o,i},K=(e,t)=>t&&ze()?-e:e,Le=(e,t,s,o,i,f)=>{const d=Date.now;let u=0,r=!1,n=!1,c=!1,l=!1;const m=xe(()=>{if(r||n){r=!1,m();return}c=!1,e.$update(be)},150),_=()=>{u=d(),c&&(l=!0),f&&e.$update(Oe,f()),e.$update(te,o()),m()},a=(I=>{if(r||!e.$isScrolling()||I.ctrlKey)return;const L=d()-u;150>L&&50<L&&(s?I.deltaX:I.deltaY)&&(r=!0)}),S=()=>{n=!0,c=l=!1},$=()=>{n=!1,Ie()&&(c=!0)};return t.addEventListener("scroll",_),t.addEventListener("wheel",a,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",$,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",_),t.removeEventListener("wheel",a),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",$),m._cancel()},_fixScrollJump:()=>{const[I,L]=e._flushJump();I&&(i(K(I,s),L,l),l=!1,L&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(te,o()))}}},Te=(e,t,s)=>{let o;return[async(i,f)=>{if(!await t())return;o&&o();const d=()=>{const[u,r]=x();return o=()=>{r(!1)},e.$getViewportSize()&&ce(o,150),[u,e.$subscribe(ne,()=>{r(!0)})]};if(f&&Me())e.$update(Ee,i()),we(async()=>{for(;;){let u=!0;for(let[c,l]=e.$getRange();c<=l;c++)if(e.$isUnmeasuredItem(c)){u=!1;break}if(u)break;const[r,n]=d();try{if(!await r)return}finally{n()}}e.$update(se),s(i(),f)});else for(;;){const[u,r]=d();try{if(e.$update(se),s(i()),!await u)return}finally{r()}}},()=>{o&&o()}]},$e=(e,t)=>{let s,o,i=x();const f=t?"scrollLeft":"scrollTop",d=t?"overflowX":"overflowY",[u,r]=Te(e,()=>i[0],(n,c)=>{n=K(n,t),c?s.scrollTo({[t?"left":"top"]:n,behavior:"smooth"}):s[f]=n});return{$observe(n){s=n,o=Le(e,n,t,()=>K(n[f],t),(c,l,m)=>{if(m){const _=n.style,a=_[d];_[d]="hidden",ce(()=>{_[d]=a})}n[f]=e.$getScrollOffset()+c,l&&r()}),i[1](!0)},$dispose(){o&&o._dispose(),i[1](!1),i=x()},$scrollTo(n){u(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),u(()=>n)},$scrollToIndex(n,{align:c,smooth:l,offset:m=0}={}){if(n=re(n,0,e.$getItemsLength()-1),c==="nearest"){const _=e.$getItemOffset(n),a=e.$getScrollOffset();if(_<a)c="start";else if(_+e.$getItemSize(n)>a+e.$getViewportSize())c="end";else return}u(()=>m+e.$getStartSpacerSize()+e.$getItemOffset(n)+(c==="end"?e.$getItemSize(n)-e.$getViewportSize():c==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),l)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Ye=(e,t)=>{let s,o,i=x();const f=t?"left":"top",[d]=Te(e,()=>i[0],(r,n)=>{r=K(r,t);const c=P(W(s));n?c.scroll({[f]:r,behavior:"smooth"}):c.scroll({[f]:r})}),u=(r,n,c,l,m=0)=>{const _=l?"offsetLeft":"offsetTop",a=m+(l&&ze()?c.innerWidth-r[_]-r.offsetWidth:r[_]),S=r.offsetParent;return r===n||!S?a:u(S,n,c,l,a)};return{$observe(r){s=r;const n=t?"scrollX":"scrollY",c=W(r),l=P(c);o=Le(e,l,t,()=>K(l[n],t),m=>{l.scroll({[f]:e.$getScrollOffset()+m})},()=>u(r,c.body,l,t)),i[1](!0)},$dispose(){o&&o._dispose(),s=void 0,i[1](!1),i=x()},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(r,{align:n,smooth:c,offset:l=0}={}){if(!s)return;if(r=re(r,0,e.$getItemsLength()-1),n==="nearest"){const $=e.$getItemOffset(r),I=e.$getScrollOffset();if($<I)n="start";else if($+e.$getItemSize(r)>I+e.$getViewportSize())n="end";else return}const m=W(s),_=P(m),a=m.documentElement,S=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);d(()=>l+u(s,m.body,_,t)+e.$getItemOffset(r)+(n==="end"?e.$getItemSize(r)-(e.$getViewportSize()-S()):n==="center"?(e.$getItemSize(r)-(e.$getViewportSize()-S()))/2:0),c)}}},Ge=(e,t)=>{const s=$e(e,!1),o=$e(t,!0);return{$observe(i){s.$observe(i),o.$observe(i)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(i,f){s.$scrollTo(f),o.$scrollTo(i)},$scrollBy(i,f){s.$scrollBy(f),o.$scrollBy(i)},$scrollToIndex(i,f){s.$scrollToIndex(f),o.$scrollToIndex(i)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},le=e=>{let t;return{_observe(s){(t||(t=new(P(W(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Xe=(e,t)=>{let s;const o=t?"width":"height",i=new WeakMap,f=le(d=>{const u=[];for(const{target:r,contentRect:n}of d)if(r.offsetParent)if(r===s)e.$update(U,n[o]);else{const c=i.get(r);c!=N&&u.push([c,n[o]])}u.length&&e.$update(A,u)});return{$observeRoot(d){f._observe(s=d)},$observeItem:(d,u)=>(i.set(d,u),f._observe(d),()=>{i.delete(d),f._unobserve(d)}),$dispose:f._dispose}},qe=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",i=new WeakMap,f=le(u=>{const r=[];for(const{target:n,contentRect:c}of u){if(!n.offsetParent)continue;const l=i.get(n);l!=N&&r.push([l,c[s]])}r.length&&e.$update(A,r)});let d;return{$observeRoot(u){const r=P(W(u)),n=()=>{e.$update(U,r[o])};r.addEventListener("resize",n),n(),d=()=>{r.removeEventListener("resize",n)}},$observeItem:(u,r)=>(i.set(u,r),f._observe(u),()=>{i.delete(u),f._unobserve(u)}),$dispose(){d&&d(),f._dispose()}}},Ze=(e,t)=>{let s;const o=new WeakMap,i=new Set,f=new Set,d=new Map,u=(n,c)=>`${n}-${c}`,r=le(n=>{const c=new Set,l=new Set;for(const{target:m,contentRect:{width:_,height:a}}of n)if(m.offsetParent)if(m===s)e.$update(U,a),t.$update(U,_);else{const S=o.get(m);if(S){const[$,I]=S,L=u($,I),g=d.get(L),w=[a,_];let R,v;g?(g[0]!==w[0]&&(R=!0),g[1]!==w[1]&&(v=!0)):R=v=!0,R&&c.add($),v&&l.add(I),(R||v)&&d.set(L,w)}}if(c.size){const m=[];c.forEach(_=>{let a=0;f.forEach(S=>{const $=d.get(u(_,S));$&&(a=E(a,$[0]))}),a&&m.push([_,a])}),e.$update(A,m)}if(l.size){const m=[];l.forEach(_=>{let a=0;i.forEach(S=>{const $=d.get(u(S,_));$&&(a=E(a,$[1]))}),a&&m.push([_,a])}),t.$update(A,m)}});return{$observeRoot(n){r._observe(s=n)},$observeItem(n,c,l){return o.set(n,[c,l]),i.add(c),f.add(l),r._observe(n),()=>{o.delete(n),r._unobserve(n)}},$resizeCols(n){for(const[c]of n)for(let l=0;l<e.$getItemsLength();l++)d.delete(u(l,c));t.$update(A,n)},$resizeRows(n){for(const[c]of n)for(let l=0;l<t.$getItemsLength();l++)d.delete(u(c,l));e.$update(A,n)},$dispose:r._dispose}},Ue=pe?X.useLayoutEffect:X.useEffect,oe="current",ve=(e,t)=>{if(Array.isArray(e))for(const s of e)ve(s,t);else e==null||typeof e=="boolean"||t.push(e)},je=e=>{const t=[];return ve(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},He=e=>{const t=X.useRef(null);return t[oe]||(t[oe]=e())},et=e=>{const t=X.useRef(e);return Ue(()=>{t[oe]=e},[e]),t};export{De as A,C as U,et as a,Ue as b,We as c,Pe as d,Fe as e,Ze as f,Be as g,Ge as h,ze as i,Oe as j,Xe as k,$e as l,we as m,Qe as n,qe as o,Ye as p,je as q,oe as r,he as s,He as u};
