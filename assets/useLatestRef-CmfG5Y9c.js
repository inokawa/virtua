import{r as Z}from"./iframe-DKlhiiLR.js";const N=null,{min:M,max:w,abs:me,floor:Te}=Math,ce=(e,t,s)=>M(s,w(t,e)),ye=e=>[...e].sort((t,s)=>t-s),ge=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},J=()=>{let e;return[new Promise(s=>{e=s}),e]},le=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},W=-1,U=(e,t,s)=>{const n=s?"unshift":"push";for(let i=0;i<t;i++)e[n](W);return e},H=(e,t)=>{const s=e._sizes[t];return s===W?e._defaultItemSize:s},Ce=(e,t,s)=>{const n=e._sizes[t]===W;return e._sizes[t]=s,e._computedOffsetIndex=M(t,e._computedOffsetIndex),n},ee=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=H(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Ae=e=>e._length?ee(e,e._length-1)+H(e,e._length-1):0,A=(e,t,s=0,n=e._length-1)=>{for(;s<=n;){const i=Te((s+n)/2),u=ee(e,i);if(u<=t){if(u+H(e,i)>t)return i;s=i+1}else n=i-1}return ce(s,0,e._length-1)},ke=(e,t,s,n)=>{if(n=M(n,e._length-1),ee(e,n)<=t){const i=A(e,t+s,n);return[A(e,t,n,i),i]}else{const i=A(e,t,void 0,n);return[i,A(e,t+s,i)]}},Ne=(e,t)=>{let s=0;const n=[];e._sizes.forEach((r,d)=>{r!==W&&(n.push(r),d<t&&s++)}),e._computedOffsetIndex=-1;const i=ye(n),u=i.length,_=u/2|0,$=u%2===0?(i[_-1]+i[_])/2:i[_],o=e._defaultItemSize;return((e._defaultItemSize=$)-o)*w(t-s,0)},Ve=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?U(s[0].slice(0,M(e,s[0].length)),w(0,e-s[0].length)):U([],e),_length:e,_computedOffsetIndex:-1,_offsets:U([],e)}),Me=e=>[e._sizes.slice(),e._defaultItemSize],_e=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:M(t-1,e._computedOffsetIndex),e._length=t,n>0?(U(e._offsets,n),U(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((i,u)=>i-(u===W?e._defaultItemSize:u),0))},Ie=typeof window<"u",be=()=>document.documentElement,x=e=>e.ownerDocument,K=e=>e.defaultView,ze=le(()=>Ie?getComputedStyle(be()).direction==="rtl":!1),Oe=le(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ee=le(()=>"scrollBehavior"in be().style),De=2147483647,D=0,$e=1,pe=2,q=0,ne=1,oe=2,re=1,we=2,k=3,B=4,Je=5,Le=6,F=7,fe=8,C=1,j=2,We=4,Pe=8,Be=e=>w(e.$getTotalSize(),e.$getViewportSize()),Re=e=>!!e.$getViewportSize(),Fe=(e,t=40,s=4,n=0,i,u=!1)=>{let _=!!n,$=1,o=0,r=0,d=0,c=0,f=0,l=0,m=D,a=q,p=_?[0,w(n-1,0)]:N,g=[0,0],z=0;const I=Ve(e,t,i),h=new Set,T=()=>d-r,R=()=>T()+f+c,y=S=>ke(I,S,o,g[0]),de=()=>Ae(I),ae=S=>ee(I,S)-f,Y=S=>H(I,S),te=S=>{S&&(Oe()&&m!==D||p&&a===ne?f+=S:c+=S)};return{$getStateVersion:()=>$,$getCacheSnapshot:()=>Me(I),$getRange:()=>{let S,b;return l?[S,b]=g:([S,b]=g=y(w(0,R())),p&&(S=M(S,p[0]),b=w(b,p[1]))),m!==$e&&(S-=w(0,s)),m!==pe&&(b+=w(0,s)),[w(S,0),M(b,I._length-1)]},$findStartIndex:()=>A(I,R()),$findEndIndex:()=>A(I,R()+o),$isUnmeasuredItem:S=>I._sizes[S]===W,$getItemOffset:ae,$getItemSize:Y,$getItemsLength:()=>I._length,$getScrollOffset:()=>d,$isScrolling:()=>m!==D,$getViewportSize:()=>o,$getStartSpacerSize:()=>r,$getTotalSize:de,_flushJump:()=>(l=c,c=0,[l,a===oe]),$subscribe:(S,b)=>{const P=[S,b];return h.add(P),()=>{h.delete(P)}},$update:(S,b)=>{let P,se,L=0;switch(S){case re:{const v=l;l=0;const E=b-d,O=me(E);!(v&&O<me(v)+1)&&a===q&&(m=E<0?pe:$e),_&&(p=N,_=!1),d=b,L=We;const X=T();X>=-o&&X<=de()&&(L+=C,se=O>o);break}case we:{L=Pe,m!==D&&(P=!0,L+=C),m=D,a=q,p=N;break}case k:{const v=b.filter(([E,O])=>I._sizes[E]!==O);if(!v.length)break;te(v.reduce((E,[O,G])=>((a===oe||(p&&a===ne?O<p[0]:ae(O)+(m===D&&a===q?Y(O):0)<T()))&&(E+=G-Y(O)),E),0));for(const[E,O]of v){const G=Y(E),X=Ce(I,E,O);u&&(z+=X?O:O-G)}u&&o&&z>o&&(te(Ne(I,A(I,R()))),u=!1),L=C+j,se=!0;break}case B:{o!==b&&(o=b,L=C+j);break}case Je:{b[1]?(te(_e(I,b[0],!0)),a=oe,L=C):(_e(I,b[0]),L=C);break}case Le:{r=b;break}case F:{a=ne;break}case fe:{p=y(b),L=C;break}}L&&($=($&De)+1,P&&f&&(c+=f,f=0),h.forEach(([v,E])=>{L&v&&E(se)}))}}},Q=setTimeout,Ue=(e,t)=>{let s;const n=()=>{s!=N&&clearTimeout(s)},i=()=>{n(),s=Q(()=>{s=N,e()},t)};return i._cancel=n,i},V=(e,t)=>t&&ze()?-e:e,ve=(e,t,s,n,i,u)=>{const _=Date.now;let $=0,o=!1,r=!1,d=!1,c=!1;const f=Ue(()=>{if(o||r){o=!1,f();return}d=!1,e.$update(we)},150),l=()=>{$=_(),d&&(c=!0),u&&e.$update(Le,u()),e.$update(re,n()),f()},m=(g=>{if(o||!e.$isScrolling()||g.ctrlKey)return;const z=_()-$;150>z&&50<z&&(s?g.deltaX:g.deltaY)&&(o=!0)}),a=()=>{r=!0,d=c=!1},p=()=>{r=!1,Oe()&&(d=!0)};return t.addEventListener("scroll",l),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",a,{passive:!0}),t.addEventListener("touchend",p,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",l),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",a),t.removeEventListener("touchend",p),f._cancel()},_fixScrollJump:()=>{const[g,z]=e._flushJump();g&&(i(V(g,s),z,c),c=!1,z&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(re,n()))}}},Se=(e,t)=>{let s,n,i,u=J();const _=t?"scrollLeft":"scrollTop",$=t?"overflowX":"overflowY",o=async(r,d)=>{if(!await u[0])return;i&&i();const c=()=>{const[f,l]=J();return i=()=>{l(!1)},Re(e)&&Q(i,150),[f,e.$subscribe(j,()=>{l(!0)})]};if(d&&Ee())e.$update(fe,r()),ge(async()=>{for(;;){let f=!0;for(let[a,p]=e.$getRange();a<=p;a++)if(e.$isUnmeasuredItem(a)){f=!1;break}if(f)break;const[l,m]=c();try{if(!await l)return}finally{m()}}e.$update(F),s.scrollTo({[t?"left":"top"]:V(r(),t),behavior:"smooth"})});else for(;;){const[f,l]=c();try{if(e.$update(F),s[_]=V(r(),t),!await f)return}finally{l()}}};return{$observe(r){s=r,n=ve(e,r,t,()=>V(r[_],t),(d,c,f)=>{if(f){const l=r.style,m=l[$];l[$]="hidden",Q(()=>{l[$]=m})}r[_]=e.$getScrollOffset()+d,c&&i&&i()}),u[1](!0)},$dispose(){n&&n._dispose(),u[1](!1),u=J()},$scrollTo(r){o(()=>r)},$scrollBy(r){r+=e.$getScrollOffset(),o(()=>r)},$scrollToIndex(r,{align:d,smooth:c,offset:f=0}={}){if(r=ce(r,0,e.$getItemsLength()-1),d==="nearest"){const l=e.$getItemOffset(r),m=e.$getScrollOffset();if(l<m)d="start";else if(l+e.$getItemSize(r)>m+e.$getViewportSize())d="end";else return}o(()=>f+e.$getStartSpacerSize()+e.$getItemOffset(r)+(d==="end"?e.$getItemSize(r)-e.$getViewportSize():d==="center"?(e.$getItemSize(r)-e.$getViewportSize())/2:0),c)},$fixScrollJump:()=>{n&&n._fixScrollJump()}}},Ye=(e,t)=>{let s,n,i,u=J();const _=(o,r,d,c,f=0)=>{const l=c?"offsetLeft":"offsetTop",m=f+(c&&ze()?d.innerWidth-o[l]-o.offsetWidth:o[l]),a=o.offsetParent;return o===r||!a?m:_(a,r,d,c,m)},$=async(o,r)=>{if(!await u[0])return;i&&i();const d=()=>{const[f,l]=J();return i=()=>{l(!1)},Re(e)&&Q(i,150),[f,e.$subscribe(j,()=>{l(!0)})]},c=K(x(s));if(r&&Ee())e.$update(fe,o()),ge(async()=>{for(;;){let f=!0;for(let[a,p]=e.$getRange();a<=p;a++)if(e.$isUnmeasuredItem(a)){f=!1;break}if(f)break;const[l,m]=d();try{if(!await l)return}finally{m()}}e.$update(F),c.scroll({[t?"left":"top"]:V(o(),t),behavior:"smooth"})});else for(;;){const[f,l]=d();try{if(e.$update(F),c.scroll({[t?"left":"top"]:V(o(),t)}),!await f)return}finally{l()}}};return{$observe(o){s=o;const r=t?"scrollX":"scrollY",d=x(o),c=K(d),f=d.body;n=ve(e,c,t,()=>V(c[r],t),l=>{c.scroll({[t?"left":"top"]:e.$getScrollOffset()+l})},()=>_(o,f,c,t)),u[1](!0)},$dispose(){n&&n._dispose(),s=void 0,u[1](!1),u=J()},$fixScrollJump:()=>{n&&n._fixScrollJump()},$scrollToIndex(o,{align:r,smooth:d,offset:c=0}={}){if(!s)return;if(o=ce(o,0,e.$getItemsLength()-1),r==="nearest"){const p=e.$getItemOffset(o),g=e.$getScrollOffset();if(p<g)r="start";else if(p+e.$getItemSize(o)>g+e.$getViewportSize())r="end";else return}const f=x(s),l=K(f),m=f.documentElement,a=()=>e.$getViewportSize()-(t?m.clientWidth:m.clientHeight);$(()=>c+_(s,f.body,l,t)+e.$getItemOffset(o)+(r==="end"?e.$getItemSize(o)-(e.$getViewportSize()-a()):r==="center"?(e.$getItemSize(o)-(e.$getViewportSize()-a()))/2:0),d)}}},Ge=(e,t)=>{const s=Se(e,!1),n=Se(t,!0);return{$observe(i){s.$observe(i),n.$observe(i)},$dispose(){s.$dispose(),n.$dispose()},$scrollTo(i,u){s.$scrollTo(u),n.$scrollTo(i)},$scrollBy(i,u){s.$scrollBy(u),n.$scrollBy(i)},$scrollToIndex(i,u){s.$scrollToIndex(u),n.$scrollToIndex(i)},$fixScrollJump(){s.$fixScrollJump(),n.$fixScrollJump()}}},ue=e=>{let t;return{_observe(s){(t||(t=new(K(x(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Xe=(e,t)=>{let s;const n=t?"width":"height",i=new WeakMap,u=ue(_=>{const $=[];for(const{target:o,contentRect:r}of _)if(o.offsetParent)if(o===s)e.$update(B,r[n]);else{const d=i.get(o);d!=N&&$.push([d,r[n]])}$.length&&e.$update(k,$)});return{$observeRoot(_){u._observe(s=_)},$observeItem:(_,$)=>(i.set(_,$),u._observe(_),()=>{i.delete(_),u._unobserve(_)}),$dispose:u._dispose}},qe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",i=new WeakMap,u=ue($=>{const o=[];for(const{target:r,contentRect:d}of $){if(!r.offsetParent)continue;const c=i.get(r);c!=N&&o.push([c,d[s]])}o.length&&e.$update(k,o)});let _;return{$observeRoot($){const o=K(x($)),r=()=>{e.$update(B,o[n])};o.addEventListener("resize",r),r(),_=()=>{o.removeEventListener("resize",r)}},$observeItem:($,o)=>(i.set($,o),u._observe($),()=>{i.delete($),u._unobserve($)}),$dispose(){_&&_(),u._dispose()}}},Ze=(e,t)=>{let s;const n="height",i="width",u=new WeakMap,_=new Set,$=new Set,o=new Map,r=(c,f)=>`${c}-${f}`,d=ue(c=>{const f=new Set,l=new Set;for(const{target:m,contentRect:a}of c)if(m.offsetParent)if(m===s)e.$update(B,a[n]),t.$update(B,a[i]);else{const p=u.get(m);if(p){const[g,z]=p,I=r(g,z),h=o.get(I),T=[a[n],a[i]];let R,y;h?(h[0]!==T[0]&&(R=!0),h[1]!==T[1]&&(y=!0)):R=y=!0,R&&f.add(g),y&&l.add(z),(R||y)&&o.set(I,T)}}if(f.size){const m=[];f.forEach(a=>{let p=0;$.forEach(g=>{const z=o.get(r(a,g));z&&(p=w(p,z[0]))}),p&&m.push([a,p])}),e.$update(k,m)}if(l.size){const m=[];l.forEach(a=>{let p=0;_.forEach(g=>{const z=o.get(r(g,a));z&&(p=w(p,z[1]))}),p&&m.push([a,p])}),t.$update(k,m)}});return{$observeRoot(c){d._observe(s=c)},$observeItem(c,f,l){return u.set(c,[f,l]),_.add(f),$.add(l),d._observe(c),()=>{u.delete(c),d._unobserve(c)}},$resizeCols(c){for(const[f]of c)for(let l=0;l<e.$getItemsLength();l++)o.delete(r(l,f));t.$update(k,c)},$resizeRows(c){for(const[f]of c)for(let l=0;l<t.$getItemsLength();l++)o.delete(r(f,l));e.$update(k,c)},$dispose:d._dispose}},xe=Ie?Z.useLayoutEffect:Z.useEffect,ie="current",he=(e,t)=>{if(Array.isArray(e))for(const s of e)he(s,t);else e==null||typeof e=="boolean"||t.push(e)},je=e=>{const t=[];return he(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},He=e=>{const t=Z.useRef(null);return t[ie]||(t[ie]=e())},et=e=>{const t=Z.useRef(e);return xe(()=>{t[ie]=e},[e]),t};export{Je as A,C as U,et as a,xe as b,We as c,Pe as d,Fe as e,Ze as f,Be as g,Ge as h,ze as i,Le as j,Xe as k,Se as l,ge as m,Qe as n,qe as o,Ye as p,je as q,ie as r,ye as s,He as u};
