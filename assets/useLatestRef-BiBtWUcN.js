import{r as q}from"./iframe-DIJf7BxR.js";const k=null,{min:V,max:E,abs:ae,floor:Re}=Math,oe=(e,t,s)=>V(s,E(t,e)),he=e=>[...e].sort((t,s)=>t-s),we=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},x=()=>{let e;return[new Promise(s=>{e=s}),e]},re=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},J=-1,D=(e,t,s)=>{const o=s?"unshift":"push";for(let r=0;r<t;r++)e[o](J);return e},X=(e,t)=>{const s=e._sizes[t];return s===J?e._defaultItemSize:s},Ce=(e,t,s)=>{const o=e._sizes[t]===J;return e._sizes[t]=s,e._computedOffsetIndex=V(t,e._computedOffsetIndex),o},Z=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,o=e._offsets[s];for(;s<t;)o+=X(e,s),e._offsets[++s]=o;return e._computedOffsetIndex=t,o},ye=e=>e._length?Z(e,e._length-1)+X(e,e._length-1):0,A=(e,t,s=0,o=e._length-1)=>{for(;s<=o;){const r=Re((s+o)/2),u=Z(e,r);if(u<=t){if(u+X(e,r)>t)return r;s=r+1}else o=r-1}return oe(s,0,e._length-1)},Ae=(e,t,s,o)=>{if(o=V(o,e._length-1),Z(e,o)<=t){const r=A(e,s,o);return[A(e,t,o,r),r]}else{const r=A(e,t,void 0,o);return[r,A(e,s,r)]}},Ne=(e,t)=>{let s=0;const o=[];e._sizes.forEach((n,l)=>{n!==J&&(o.push(n),l<t&&s++)}),e._computedOffsetIndex=-1;const r=he(o),u=r.length,d=u/2|0,c=u%2===0?(r[d-1]+r[d])/2:r[d],i=e._defaultItemSize;return((e._defaultItemSize=c)-i)*E(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s&&s[0]?D(s[0].slice(0,V(e,s[0].length)),E(0,e-s[0].length)):D([],e),_length:e,_computedOffsetIndex:-1,_offsets:D([],e)}),Ve=e=>[e._sizes.slice(),e._defaultItemSize],me=(e,t,s)=>{const o=t-e._length;return e._computedOffsetIndex=s?-1:V(t-1,e._computedOffsetIndex),e._length=t,o>0?(D(e._offsets,o),D(e._sizes,o,s),e._defaultItemSize*o):(e._offsets.splice(o),(s?e._sizes.splice(0,-o):e._sizes.splice(o)).reduce((r,u)=>r-(u===J?e._defaultItemSize:u),0))},pe=typeof window<"u",ge=()=>document.documentElement,W=e=>e.ownerDocument,P=e=>e.defaultView,Ie=re(()=>pe?getComputedStyle(ge()).direction==="rtl":!1),ze=re(()=>/iP(hone|od|ad)/.test(navigator.userAgent)?!0:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>0),Me=re(()=>"scrollBehavior"in ge().style),Je=2147483647,M=0,_e=1,Se=2,G=0,Q=1,H=2,ee=1,Oe=2,N=3,U=4,De=5,be=6,te=7,Ee=8,y=1,se=2,We=4,Pe=8,Be=e=>E(e.$getTotalSize(),e.$getViewportSize()),Fe=(e,t=40,s=0,o,r=!1)=>{let u=!!s,d=1,c=0,i=0,n=0,l=0,f=0,_=0,m=M,a=G,S=u?[0,E(s-1,0)]:k,I=[0,0],z=0;const $=ke(e,t,o),w=new Set,R=()=>n-i,T=()=>R()+f+l,ce=(g,p)=>Ae($,g,p,I[0]),fe=()=>ye($),ue=g=>Z($,g)-f,B=g=>X($,g),de=(g,p=J)=>$._sizes[g]===p,j=g=>{g&&(ze()&&m!==M||S&&a===Q?f+=g:l+=g)};return{$getStateVersion:()=>d,$getCacheSnapshot:()=>Ve($),$getRange:(g=200)=>{let p,v;if(_)[p,v]=I;else{g=E(0,g);let C=E(0,T()),O=C+c;m!==_e&&(C-=g),m!==Se&&(O+=g),[p,v]=I=ce(E(0,C),E(0,O)),S&&(p=V(p,S[0]),v=E(v,S[1]))}return[E(p,0),V(v,$._length-1)]},$findStartIndex:()=>A($,T()),$findEndIndex:()=>A($,T()+c),$isUnmeasuredItem:de,$getItemOffset:ue,$getItemSize:B,$getItemsLength:()=>$._length,$getScrollOffset:()=>n,$isScrolling:()=>m!==M,$getViewportSize:()=>c,$getStartSpacerSize:()=>i,$getTotalSize:fe,_flushJump:()=>(_=l,l=0,[_,a===H]),$subscribe:(g,p)=>{const v=[g,p];return w.add(v),()=>{w.delete(v)}},$update:(g,p)=>{let v,C,O=0;switch(g){case ee:{const h=_;_=0;const L=p-n,b=ae(L);!(h&&b<ae(h)+1)&&a===G&&(m=L<0?Se:_e),u&&(S=k,u=!1),n=p,O=We;const Y=R();Y>=-c&&Y<=fe()&&(O+=y,C=b>c);break}case Oe:{O=Pe,m!==M&&(v=!0,O+=y),m=M,a=G,S=k;break}case N:{const h=p.filter(([L,b])=>!de(L,b));if(!h.length)break;j(h.reduce((L,[b,F])=>((a===H||(S&&a===Q?b<S[0]:ue(b)+(m===M&&a===G?B(b):0)<R()))&&(L+=F-B(b)),L),0));for(const[L,b]of h){const F=B(L),Y=Ce($,L,b);r&&(z+=Y?b:b-F)}r&&c&&z>c&&(j(Ne($,A($,T()))),r=!1),O=y+se,C=!0;break}case U:{c!==p&&(c=p,O=y+se);break}case De:{p[1]?(j(me($,p[0],!0)),a=H,O=y):(me($,p[0]),O=y);break}case be:{i=p;break}case te:{a=Q;break}case Ee:{S=ce(p,p+c),O=y;break}}O&&(d=(d&Je)+1,v&&f&&(l+=f,f=0),w.forEach(([h,L])=>{O&h&&L(C)}))}}},ie=setTimeout,xe=(e,t)=>{let s;const o=()=>{s!=k&&clearTimeout(s)},r=()=>{o(),s=ie(()=>{s=k,e()},t)};return r._cancel=o,r},K=(e,t)=>t&&Ie()?-e:e,Le=(e,t,s,o,r,u)=>{const d=Date.now;let c=0,i=!1,n=!1,l=!1,f=!1;const _=xe(()=>{if(i||n){i=!1,_();return}l=!1,e.$update(Oe)},150),m=()=>{c=d(),l&&(f=!0),u&&e.$update(be,u()),e.$update(ee,o()),_()},a=(z=>{if(i||!e.$isScrolling()||z.ctrlKey)return;const $=d()-c;150>$&&50<$&&(s?z.deltaX:z.deltaY)&&(i=!0)}),S=()=>{n=!0,l=f=!1},I=()=>{n=!1,ze()&&(l=!0)};return t.addEventListener("scroll",m),t.addEventListener("wheel",a,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",I,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",m),t.removeEventListener("wheel",a),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",I),_._cancel()},_fixScrollJump:()=>{const[z,$]=e._flushJump();z&&(r(K(z,s),$,f),f=!1,$&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(ee,o()))}}},ve=(e,t,s)=>{let o;return[async(r,u)=>{if(!await t())return;o&&o();const d=()=>{const[c,i]=x();return o=()=>{i(!1)},e.$getViewportSize()&&ie(o,150),[c,e.$subscribe(se,()=>{i(!0)})]};if(u&&Me())e.$update(Ee,r()),we(async()=>{for(;;){let c=!0;for(let[l,f]=e.$getRange();l<=f;l++)if(e.$isUnmeasuredItem(l)){c=!1;break}if(c)break;const[i,n]=d();try{if(!await i)return}finally{n()}}e.$update(te),s(r(),u)});else for(;;){const[c,i]=d();try{if(e.$update(te),s(r()),!await c)return}finally{i()}}},()=>{o&&o()}]},$e=(e,t)=>{let s,o,r=x();const u=t?"scrollLeft":"scrollTop",d=t?"overflowX":"overflowY",[c,i]=ve(e,()=>r[0],(n,l)=>{n=K(n,t),l?s.scrollTo({[t?"left":"top"]:n,behavior:"smooth"}):s[u]=n});return{$observe(n){s=n,o=Le(e,n,t,()=>K(n[u],t),(l,f,_)=>{if(_){const m=n.style,a=m[d];m[d]="hidden",ie(()=>{m[d]=a})}n[u]=e.$getScrollOffset()+l,f&&i()}),r[1](!0)},$dispose(){o&&o._dispose(),r[1](!1),r=x()},$scrollTo(n){c(()=>n)},$scrollBy(n){n+=e.$getScrollOffset(),c(()=>n)},$scrollToIndex(n,{align:l,smooth:f,offset:_=0}={}){if(n=oe(n,0,e.$getItemsLength()-1),l==="nearest"){const m=e.$getItemOffset(n),a=e.$getScrollOffset();if(m<a)l="start";else if(m+e.$getItemSize(n)>a+e.$getViewportSize())l="end";else return}c(()=>_+e.$getStartSpacerSize()+e.$getItemOffset(n)+(l==="end"?e.$getItemSize(n)-e.$getViewportSize():l==="center"?(e.$getItemSize(n)-e.$getViewportSize())/2:0),f)},$fixScrollJump:()=>{o&&o._fixScrollJump()}}},Ye=(e,t)=>{let s,o,r=x();const u=t?"left":"top",[d]=ve(e,()=>r[0],(i,n)=>{i=K(i,t);const l=P(W(s));n?l.scroll({[u]:i,behavior:"smooth"}):l.scroll({[u]:i})}),c=(i,n,l,f,_=0)=>{const m=f?"offsetLeft":"offsetTop",a=_+(f&&Ie()?l.innerWidth-i[m]-i.offsetWidth:i[m]),S=i.offsetParent;return i===n||!S?a:c(S,n,l,f,a)};return{$observe(i){s=i;const n=t?"scrollX":"scrollY",l=W(i),f=P(l);o=Le(e,f,t,()=>K(f[n],t),(_,m)=>{m?f.scroll({[u]:e.$getScrollOffset()+_}):f.scrollBy({[u]:_})},()=>c(i,l.body,f,t)),r[1](!0)},$dispose(){o&&o._dispose(),s=void 0,r[1](!1),r=x()},$fixScrollJump:()=>{o&&o._fixScrollJump()},$scrollToIndex(i,{align:n,smooth:l,offset:f=0}={}){if(!s)return;if(i=oe(i,0,e.$getItemsLength()-1),n==="nearest"){const I=e.$getItemOffset(i),z=e.$getScrollOffset();if(I<z)n="start";else if(I+e.$getItemSize(i)>z+e.$getViewportSize())n="end";else return}const _=W(s),m=P(_),a=_.documentElement,S=()=>e.$getViewportSize()-(t?a.clientWidth:a.clientHeight);d(()=>f+c(s,_.body,m,t)+e.$getItemOffset(i)+(n==="end"?e.$getItemSize(i)-(e.$getViewportSize()-S()):n==="center"?(e.$getItemSize(i)-(e.$getViewportSize()-S()))/2:0),l)}}},Ge=(e,t)=>{const s=$e(e,!1),o=$e(t,!0);return{$observe(r){s.$observe(r),o.$observe(r)},$dispose(){s.$dispose(),o.$dispose()},$scrollTo(r,u){s.$scrollTo(u),o.$scrollTo(r)},$scrollBy(r,u){s.$scrollBy(u),o.$scrollBy(r)},$scrollToIndex(r,u){s.$scrollToIndex(u),o.$scrollToIndex(r)},$fixScrollJump(){s.$fixScrollJump(),o.$fixScrollJump()}}},le=e=>{let t;return{_observe(s){(t||(t=new(P(W(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},qe=(e,t)=>{let s;const o=t?"width":"height",r=new WeakMap,u=le(d=>{const c=[];for(const{target:i,contentRect:n}of d)if(i.offsetParent)if(i===s)e.$update(U,n[o]);else{const l=r.get(i);l!=k&&c.push([l,n[o]])}c.length&&e.$update(N,c)});return{$observeRoot(d){u._observe(s=d)},$observeItem:(d,c)=>(r.set(d,c),u._observe(d),()=>{r.delete(d),u._unobserve(d)}),$dispose:u._dispose}},Xe=(e,t)=>{const s=t?"width":"height",o=t?"innerWidth":"innerHeight",r=new WeakMap,u=le(c=>{const i=[];for(const{target:n,contentRect:l}of c){if(!n.offsetParent)continue;const f=r.get(n);f!=k&&i.push([f,l[s]])}i.length&&e.$update(N,i)});let d;return{$observeRoot(c){const i=P(W(c)),n=()=>{e.$update(U,i[o])};i.addEventListener("resize",n),n(),d=()=>{i.removeEventListener("resize",n)}},$observeItem:(c,i)=>(r.set(c,i),u._observe(c),()=>{r.delete(c),u._unobserve(c)}),$dispose(){d&&d(),u._dispose()}}},Ze=(e,t)=>{let s;const o=new WeakMap,r=new Set,u=new Set,d=new Map,c=(n,l)=>`${n}-${l}`,i=le(n=>{const l=new Set,f=new Set;for(const{target:_,contentRect:{width:m,height:a}}of n)if(_.offsetParent)if(_===s)e.$update(U,a),t.$update(U,m);else{const S=o.get(_);if(S){const[I,z]=S,$=c(I,z),w=d.get($);let R,T;w?(w[0]!==a&&(R=!0),w[1]!==m&&(T=!0)):R=T=!0,R&&l.add(I),T&&f.add(z),(R||T)&&d.set($,[a,m])}}if(l.size){const _=[];l.forEach(m=>{let a=0;u.forEach(S=>{const I=d.get(c(m,S));I&&(a=E(a,I[0]))}),a&&_.push([m,a])}),e.$update(N,_)}if(f.size){const _=[];f.forEach(m=>{let a=0;r.forEach(S=>{const I=d.get(c(S,m));I&&(a=E(a,I[1]))}),a&&_.push([m,a])}),t.$update(N,_)}});return{$observeRoot(n){i._observe(s=n)},$observeItem(n,l,f){return o.set(n,[l,f]),r.add(l),u.add(f),i._observe(n),()=>{o.delete(n),i._unobserve(n)}},$resizeCols(n){for(const[l]of n)for(let f=0;f<e.$getItemsLength();f++)d.delete(c(f,l));t.$update(N,n)},$resizeRows(n){for(const[l]of n)for(let f=0;f<t.$getItemsLength();f++)d.delete(c(l,f));e.$update(N,n)},$dispose:i._dispose}},Ue=pe?q.useLayoutEffect:q.useEffect,ne="current",Te=(e,t)=>{if(Array.isArray(e))for(const s of e)Te(s,t);else e==null||typeof e=="boolean"||t.push(e)},je=e=>{const t=[];return Te(e,t),t},Qe=(e,t)=>{const s=e.key;return s??"_"+t},He=e=>{const t=q.useRef(null);return t[ne]||(t[ne]=e())},et=e=>{const t=q.useRef(e);return Ue(()=>{t[ne]=e},[e]),t};export{De as A,y as U,et as a,Ue as b,We as c,Pe as d,Fe as e,Ze as f,Be as g,Ge as h,Ie as i,be as j,qe as k,$e as l,we as m,Qe as n,Xe as o,Ye as p,je as q,ne as r,he as s,He as u};
