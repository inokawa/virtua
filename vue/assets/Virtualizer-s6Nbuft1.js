import{d as C,b,m as c,q as V,s as L,v as d,e as $,i as j}from"./vue.esm-bundler-lSza16jR.js";import{c as H,U,a as w,b as B,m as D,g as M,d as p,L as G,e as P,f as k,i as q,A as F,h as J}from"./_plugin-vue_export-helper-N49W2v34.js";function K(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!j(t)}const Q={data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"}},Y=C({props:Q,emits:["scroll","scrollEnd"],setup(t,{emit:f,expose:E,slots:z}){let S=!!t.ssrCount;const l=t.horizontal,m=b(),e=H(t.data.length,t.itemSize,t.overscan,t.ssrCount,void 0,!t.itemSize),u=P(e,l),r=k(e,l),o=b(e.$getStateVersion()),v=e.$subscribe(U,()=>{o.value=e.$getStateVersion()}),T=e.$subscribe(w,()=>{f("scroll",e.$getScrollOffset())}),I=e.$subscribe(B,()=>{f("scrollEnd")}),h=c(n=>{o.value;const s=e.$getRange();return n&&q(n,s)?n:s}),x=c(()=>o.value&&e.$isScrolling()),O=c(()=>o.value&&e.$getTotalSize()),R=c(()=>o.value&&e.$getJumpCount());return V(()=>{S=!1,D(()=>{const n=s=>{u.$observeRoot(s),r.$observe(s)};t.scrollRef?n(t.scrollRef):n(m.value.parentElement)})}),L(()=>{v(),T(),I(),u.$dispose(),r.$dispose()}),d(()=>t.data.length,n=>{e.$update(F,[n,t.shift])}),d(()=>t.startMargin,n=>{e.$update(J,n)},{immediate:!0}),d([R],()=>{r.$fixScrollJump()},{flush:"post"}),E({get scrollOffset(){return e.$getScrollOffset()},get scrollSize(){return M(e)},get viewportSize(){return e.$getViewportSize()},findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:r.$scrollToIndex,scrollTo:r.$scrollTo,scrollBy:r.$scrollBy}),()=>{const n=t.as,s=t.item,[y,N]=h.value,g=O.value,a=[];for(let i=y,A=N;i<=A;i++){const _=z.default({item:t.data[i],index:i})[0];a.push($(G,{key:p(_,i),_rerender:o,_store:e,_resizer:u.$observeItem,_index:i,_children:_,_isHorizontal:l,_isSSR:S,_as:s},null,8,["_rerender","_store","_resizer","_index","_children","_isHorizontal","_isSSR","_as"]))}return $(n,{ref:m,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:l?g+"px":"100%",height:l?"100%":g+"px",pointerEvents:x.value?"none":void 0}},K(a)?a:{default:()=>[a],_:2},8,["style"])}}});export{Y as V};
