import{d as ve,r as Le,k as fe,q as Ee,c as we,s as he,i as ye}from"./iframe-CNk3FaEB.js";const T=null,{min:h,max:L,abs:de,floor:Re}=Math,te=(e,t,s)=>h(s,L(t,e)),Te=e=>[...e].sort((t,s)=>t-s),qe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},A=()=>{let e;return[new Promise(s=>{e=s}),e]},se=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},V=-1,M=(e,t,s)=>{const r=s?"unshift":"push";for(let i=0;i<t;i++)e[r](V);return e},j=(e,t)=>{const s=e._sizes[t];return s===V?e._defaultItemSize:s},Ce=(e,t,s)=>{const r=e._sizes[t]===V;return e._sizes[t]=s,e._computedOffsetIndex=h(t,e._computedOffsetIndex),r},Y=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,r=e._offsets[s];for(;s<t;)r+=j(e,s),e._offsets[++s]=r;return e._computedOffsetIndex=t,r},Ve=e=>e._length?Y(e,e._length-1)+j(e,e._length-1):0,R=(e,t,s=0,r=e._length-1)=>{for(;s<=r;){const i=Re((s+r)/2),l=Y(e,i);if(l<=t){if(l+j(e,i)>t)return i;s=i+1}else r=i-1}return te(s,0,e._length-1)},Ne=(e,t,s,r)=>{if(r=h(r,e._length-1),Y(e,r)<=t){const i=R(e,t+s,r);return[R(e,t,r,i),i]}else{const i=R(e,t,void 0,r);return[i,R(e,t+s,i)]}},Ae=(e,t)=>{let s=0;const r=[];e._sizes.forEach((o,c)=>{o!==V&&(r.push(o),c<t&&s++)}),e._computedOffsetIndex=-1;const i=Te(r),l=i.length,u=l/2|0,_=l%2===0?(i[u-1]+i[u])/2:i[u],n=e._defaultItemSize;return((e._defaultItemSize=_)-n)*L(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:t,_sizes:s&&s[0]?M(s[0].slice(0,h(e,s[0].length)),L(0,e-s[0].length)):M([],e),_length:e,_computedOffsetIndex:-1,_offsets:M([],e)}),Me=e=>[e._sizes.slice(),e._defaultItemSize],ae=(e,t,s)=>{const r=t-e._length;return e._computedOffsetIndex=s?-1:h(t-1,e._computedOffsetIndex),e._length=t,r>0?(M(e._offsets,r),M(e._sizes,r,s),e._defaultItemSize*r):(e._offsets.splice(r),(s?e._sizes.splice(0,-r):e._sizes.splice(r)).reduce((i,l)=>i-(l===V?e._defaultItemSize:l),0))},De=typeof window<"u",Se=()=>document.documentElement,D=e=>e.ownerDocument,P=e=>e.defaultView,ne=se(()=>De?getComputedStyle(Se()).direction==="rtl":!1),pe=se(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),ge=se(()=>"scrollBehavior"in Se().style),Pe=2147483647,N=0,_e=1,me=2,F=0,Ue=1,H=2,ee=1,$e=2,re=3,oe=4,Je=5,Ie=6,ie=7,le=8,y=1,K=2,We=4,xe=8,je=e=>L(e.$getTotalSize(),e.$getViewportSize()),be=e=>!!e.$getViewportSize(),Ye=(e,t=40,s=4,r=0,i,l=!1)=>{let u=!!r,_=1,n=0,o=0,c=0,f=0,a=0,d=0,m=N,I=F,$=u?[0,L(r-1,0)]:T,b=[0,0],E=0;const g=ke(e,t,i),X=new Set,U=()=>c-o,J=()=>U()+a+f,ce=S=>Ne(g,S,n,b[0]),G=()=>Ve(g),ue=S=>Y(g,S)-a,W=S=>j(g,S),Z=S=>{S&&(pe()&&m!==N?a+=S:f+=S)};return{$getStateVersion:()=>_,$getCacheSnapshot:()=>Me(g),$getRange:()=>{let S,p;return d?[S,p]=b:([S,p]=b=ce(L(0,J())),$&&(S=h(S,$[0]),p=L(p,$[1]))),m!==_e&&(S-=L(0,s)),m!==me&&(p+=L(0,s)),[L(S,0),h(p,g._length-1)]},$findStartIndex:()=>R(g,J()),$findEndIndex:()=>R(g,J()+n),$isUnmeasuredItem:S=>g._sizes[S]===V,_hasUnmeasuredItemsInFrozenRange:()=>$?g._sizes.slice(L(0,$[0]-1),h(g._length-1,$[1]+1)+1).includes(V):!1,$getItemOffset:ue,$getItemSize:W,$getItemsLength:()=>g._length,$getScrollOffset:()=>c,$isScrolling:()=>m!==N,$getViewportSize:()=>n,$getStartSpacerSize:()=>o,$getTotalSize:G,_flushJump:()=>(d=f,f=0,[d,I===H||U()+n>=G()]),$subscribe:(S,p)=>{const k=[S,p];return X.add(k),()=>{X.delete(k)}},$update:(S,p)=>{let k,Q,v=0;switch(S){case ee:{const w=d;d=0;const z=p-c,O=de(z);!(w&&O<de(w)+1)&&I===F&&(m=z<0?me:_e),u&&($=T,u=!1),c=p,v=We;const B=U();B>=-n&&B<=G()&&(v+=y,Q=O>n);break}case $e:{v=xe,m!==N&&(k=!0,v+=y),m=N,I=F,$=T;break}case re:{const w=p.filter(([z,O])=>g._sizes[z]!==O);if(!w.length)break;Z(w.reduce((z,[O,x])=>((I===H||($?!u&&O<$[0]:ue(O)+(m===N&&I===F?W(O):0)<U()))&&(z+=x-W(O)),z),0));for(const[z,O]of w){const x=W(z),B=Ce(g,z,O);l&&(E+=B?O:O-x)}l&&n&&E>n&&(Z(Ae(g,R(g,J()))),l=!1),v=y+K,Q=!0;break}case oe:{n!==p&&(n=p,v=y+K);break}case Je:{p[1]?(Z(ae(g,p[0],!0)),I=H,v=y):(ae(g,p[0]),v=y);break}case Ie:{o=p;break}case ie:{I=Ue;break}case le:{$=ce(p),v=y;break}}v&&(_=(_&Pe)+1,k&&a&&(f+=a,a=0),X.forEach(([w,z])=>{v&w&&z(Q)}))}}},q=setTimeout,Be=(e,t)=>{let s;const r=()=>{s!=T&&clearTimeout(s)},i=()=>{r(),s=q(()=>{s=T,e()},t)};return i._cancel=r,i},C=(e,t)=>t&&ne()?-e:e,Oe=(e,t,s,r,i,l)=>{const u=Date.now;let _=0,n=!1,o=!1,c=!1,f=!1;const a=Be(()=>{if(n||o){n=!1,a();return}c=!1,e.$update($e)},150),d=()=>{_=u(),c&&(f=!0),l&&e.$update(Ie,l()),e.$update(ee,r()),a()},m=b=>{if(n||!e.$isScrolling()||b.ctrlKey)return;const E=u()-_;150>E&&50<E&&(s?b.deltaX:b.deltaY)&&(n=!0)},I=()=>{o=!0,c=f=!1},$=()=>{o=!1,pe()&&(c=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",I,{passive:!0}),t.addEventListener("touchend",$,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",I),t.removeEventListener("touchend",$),a._cancel()},_fixScrollJump:()=>{const[b,E]=e._flushJump();b&&(i(C(b,s),E,f),f=!1,E&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(ee,r()))}}},Xe=(e,t)=>{let s,r,i,l=A();const u=t?"scrollLeft":"scrollTop",_=t?"overflowX":"overflowY",n=async(o,c)=>{if(!await l[0])return;i&&i();const f=()=>{const[a,d]=A();return i=()=>{d(!1)},be(e)&&q(i,150),[a,e.$subscribe(K,()=>{d(!0)})]};if(c&&ge()){for(;e.$update(le,o()),!!e._hasUnmeasuredItemsInFrozenRange();){const[a,d]=f();try{if(!await a)return}finally{d()}}s.scrollTo({[t?"left":"top"]:C(o(),t),behavior:"smooth"})}else for(;;){const[a,d]=f();try{if(s[u]=C(o(),t),e.$update(ie),!await a)return}finally{d()}}};return{$observe(o){s=o,r=Oe(e,o,t,()=>C(o[u],t),(c,f,a)=>{if(a){const d=o.style,m=d[_];d[_]="hidden",q(()=>{d[_]=m})}f?(o[u]=e.$getScrollOffset()+c,i&&i()):o[u]+=c}),l[1](!0)},$dispose(){r&&r._dispose(),l[1](!1),l=A()},$scrollTo(o){n(()=>o)},$scrollBy(o){o+=e.$getScrollOffset(),n(()=>o)},$scrollToIndex(o,{align:c,smooth:f,offset:a=0}={}){if(o=te(o,0,e.$getItemsLength()-1),c==="nearest"){const d=e.$getItemOffset(o),m=e.$getScrollOffset();if(d<m)c="start";else if(d+e.$getItemSize(o)>m+e.$getViewportSize())c="end";else return}n(()=>a+e.$getStartSpacerSize()+e.$getItemOffset(o)+(c==="end"?e.$getItemSize(o)-e.$getViewportSize():c==="center"?(e.$getItemSize(o)-e.$getViewportSize())/2:0),f)},$fixScrollJump:()=>{r&&r._fixScrollJump()}}},Ge=(e,t)=>{let s,r,i,l=A();const u=(n,o,c,f,a=0)=>{const d=f?"offsetLeft":"offsetTop",m=a+(f&&ne()?c.innerWidth-n[d]-n.offsetWidth:n[d]),I=n.offsetParent;return n===o||!I?m:u(I,o,c,f,m)},_=async(n,o)=>{if(!await l[0])return;i&&i();const c=()=>{const[a,d]=A();return i=()=>{d(!1)},be(e)&&q(i,150),[a,e.$subscribe(K,()=>{d(!0)})]},f=P(D(s));if(o&&ge()){for(;e.$update(le,n()),!!e._hasUnmeasuredItemsInFrozenRange();){const[a,d]=c();try{if(!await a)return}finally{d()}}f.scroll({[t?"left":"top"]:C(n(),t),behavior:"smooth"})}else for(;;){const[a,d]=c();try{if(f.scroll({[t?"left":"top"]:C(n(),t)}),e.$update(ie),!await a)return}finally{d()}}};return{$observe(n){s=n;const o=t?"scrollX":"scrollY",c=D(n),f=P(c),a=c.body;r=Oe(e,f,t,()=>C(f[o],t),(d,m)=>{m?f.scroll({[t?"left":"top"]:e.$getScrollOffset()+d}):f.scrollBy(t?d:0,t?0:d)},()=>u(n,a,f,t)),l[1](!0)},$dispose(){r&&r._dispose(),s=void 0,l[1](!1),l=A()},$fixScrollJump:()=>{r&&r._fixScrollJump()},$scrollToIndex(n,{align:o,smooth:c,offset:f=0}={}){if(!s)return;if(n=te(n,0,e.$getItemsLength()-1),o==="nearest"){const $=e.$getItemOffset(n),b=e.$getScrollOffset();if($<b)o="start";else if($+e.$getItemSize(n)>b+e.$getViewportSize())o="end";else return}const a=D(s),d=P(a),m=a.documentElement,I=()=>e.$getViewportSize()-(t?m.clientWidth:m.clientHeight);_(()=>f+u(s,a.body,d,t)+e.$getItemOffset(n)+(o==="end"?e.$getItemSize(n)-(e.$getViewportSize()-I()):o==="center"?(e.$getItemSize(n)-(e.$getViewportSize()-I()))/2:0),c)}}},ze=e=>{let t;return{_observe(s){(t||(t=new(P(D(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ze=(e,t)=>{let s;const r=t?"width":"height",i=new WeakMap,l=ze(u=>{const _=[];for(const{target:n,contentRect:o}of u)if(n.offsetParent)if(n===s)e.$update(oe,o[r]);else{const c=i.get(n);c!=T&&_.push([c,o[r]])}_.length&&e.$update(re,_)});return{$observeRoot(u){l._observe(s=u)},$observeItem:(u,_)=>(i.set(u,_),l._observe(u),()=>{i.delete(u),l._unobserve(u)}),$dispose:l._dispose}},Qe=(e,t)=>{const s=t?"width":"height",r=t?"innerWidth":"innerHeight",i=new WeakMap,l=ze(_=>{const n=[];for(const{target:o,contentRect:c}of _){if(!o.offsetParent)continue;const f=i.get(o);f!=T&&n.push([f,c[s]])}n.length&&e.$update(re,n)});let u;return{$observeRoot(_){const n=P(D(_)),o=()=>{e.$update(oe,n[r])};n.addEventListener("resize",o),o(),u=()=>{n.removeEventListener("resize",o)}},$observeItem:(_,n)=>(i.set(_,n),l._observe(_),()=>{i.delete(_),l._unobserve(_)}),$dispose(){u&&u(),l._dispose()}}};function Fe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ye(e)}const He=ve({props:{_stateVersion:{type:Object,required:!0},_store:{type:Object,required:!0},_children:{type:Object,required:!0},_resizer:{type:Function,required:!0},_index:{type:Number,required:!0},_isHorizontal:{type:Boolean},_isSSR:{type:Boolean},_as:{type:String,required:!0},_itemProps:Object},setup(e){const t=Le(),s=fe(()=>e._stateVersion.value&&e._store.$getItemOffset(e._index)),r=fe(()=>e._stateVersion.value&&e._store.$isUnmeasuredItem(e._index));return Ee(()=>t.value&&e._index,(i,l,u)=>{u(e._resizer(t.value,e._index))},{flush:"post"}),()=>{const{_children:i,_isHorizontal:l,_isSSR:u,_as:_}=e,n=r.value,{style:o,...c}=e._itemProps??{},f={contain:"layout style",position:n&&u?void 0:"absolute",[l?"height":"width"]:"100%",[l?"top":"left"]:"0px",[l?ne()?"right":"left":"top"]:s.value+"px",visibility:!n||u?"visible":"hidden",...o};return l&&(f.display="inline-flex"),we(_,he({ref:t,style:f},c),Fe(i)?i:{default:()=>[i],_:2},16,["style"])}}}),et=(e,t)=>{const s=e.key;return s??"_"+t},tt=(e,t)=>e[0]===t[0]&&e[1]===t[1],st=(e,t)=>{const s=e.__vccOpts||e;for(const[r,i]of t)s[r]=i;return s};export{Je as A,He as L,y as U,st as _,Xe as a,We as b,Ye as c,xe as d,Ze as e,et as f,je as g,Ie as h,tt as i,Ge as j,Qe as k,qe as m,Te as s};
