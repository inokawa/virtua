import{d as $,r as x,c as p,o as w,a as A,w as b,b as S,i as N,k as z,l as D,m as L,u as E,n as y,p as R,t as k}from"./iframe-5j4fF8nJ.js";import{c as B,j as O,U,b as j,d as H,i as W,k as P,f as G,L as M,A as q,_ as J}from"./_plugin-vue_export-helper-CpMhoxdn.js";import"./preload-helper-PPVm8Dsz.js";function K(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!N(t)}const F={data:{type:Array,required:!0},bufferSize:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,as:{type:String,default:"div"},item:{type:String,default:"div"}},v=$({props:F,emits:["scroll","scrollEnd"],setup(t,{emit:r,slots:m,expose:_}){const o=t.horizontal,i=x(),e=B(t.data.length,t.itemSize,void 0,void 0,!t.itemSize),f=P(e,o),l=O(e,o),s=x(e.$getStateVersion());e.$subscribe(U,()=>{s.value=e.$getStateVersion()}),e.$subscribe(j,()=>{r("scroll")}),e.$subscribe(H,()=>{r("scrollEnd")});const V=p(n=>{s.value;const c=e.$getRange(t.bufferSize);return n&&W(n,c)?n:c}),T=p(()=>s.value&&e.$isScrolling()),I=p(()=>s.value&&e.$getTotalSize());return w(()=>{const n=i.value;n&&(f.$observeRoot(n),l.$observe(n))}),A(()=>{e.$dispose(),f.$dispose(),l.$dispose()}),b(()=>t.data.length,n=>{e.$update(q,[n,t.shift])}),b([s],()=>{l.$fixScrollJump()},{flush:"post"}),_({findStartIndex:e.$findStartIndex,findEndIndex:e.$findEndIndex,scrollToIndex:l.$scrollToIndex}),()=>{const n=t.as,c=t.item,g=I.value,d=[];for(let[a,C]=V.value;a<=C;a++){const h=m.default({item:t.data[a],index:a})[0];d.push(S(M,{key:G(h,a),_stateVersion:s,_store:e,_resizer:f.$observeItem,_index:a,_children:h,_isHorizontal:o,_as:c},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_as"]))}return S(n,{ref:i,style:{contain:"size style",overflowAnchor:"none",flex:"none",position:"relative",width:o?g+"px":"100%",height:o?"100%":g+"px",pointerEvents:T.value?"none":void 0}},K(d)?d:{default:()=>[d],_:2},8,["style"])}}}),Q={style:{padding:"200px 100px"}},X={style:{border:"solid 1px gray"}},Y=$({__name:"WindowVirtualizer",setup(t){const r=[20,40,180,77],m=Array.from({length:1e3}).map((_,o)=>r[o%4]);return(_,o)=>(y(),z("div",Q,[D("div",X,[S(E(v),{data:E(m)},{default:L(({item:i,index:e})=>[(y(),z("div",{key:e,style:R({height:i+"px",background:"white",borderBottom:"solid 1px #ccc"})},k(e),5))]),_:1},8,["data"])])]))}}),Z=J(Y,[["__scopeId","data-v-16b9c0e0"]]),oe={component:v},u={render:()=>({components:{Component:Z},template:"<Component />"})};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...u.parameters?.docs?.source}}};const se=["Default"];export{u as Default,se as __namedExportsOrder,oe as default};
