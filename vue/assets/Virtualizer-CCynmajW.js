import{d as N,b as E,m as A,q as x,s as c,e as T,i as L}from"./vue.esm-bundler-6P8ENG_2.js";import{c as V,U as D,a as U,b as H,m as j,g as w,d as B,e as M,L as p,f as G,h as P,S as k,A as q,i as F}from"./_plugin-vue_export-helper-BK6-U4V6.js";function J(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!L(t)}const K={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"}},X=N({props:K,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:_,expose:z,slots:O}){let S=!!t.ssrCount;const i=t.horizontal,g=E(),e=V(t.data.length,t.itemSize??40,t.ssrCount,void 0,!t.itemSize),u=G(e,i),o=P(e,i),l=E(e._getStateVersion()),R=e._subscribe(D,()=>{l.value=e._getStateVersion()}),v=e._subscribe(U,()=>{_("scroll",e._getScrollOffset())}),I=e._subscribe(H,()=>{_("scrollEnd")});return A(()=>{S=!1,j(()=>{const s=n=>{u._observeRoot(n),o._observe(n)};t.scrollRef?s(t.scrollRef):s(g.value.parentElement)})}),x(()=>{R(),v(),I(),u._dispose(),o._dispose()}),c(()=>t.data.length,s=>{e._update(q,[s,t.shift])}),c(()=>t.startMargin,s=>{e._update(F,s)},{immediate:!0}),c([l,e._getJumpCount],([,s],[,n])=>{s!==n&&o._fixScrollJump()},{flush:"post"}),c([l,e._getRange],([,[s,n]],[,[d,f]])=>{d===s&&f===n||_("rangeChange",s,n)},{flush:"post"}),z({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return w(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),()=>{l.value;const s=t.as,n=t.item,d=t.data.length,[f,y]=e._getRange(),m=e._getScrollDirection(),b=e._getTotalSize(),a=[];for(let[r,C]=B(f,y,t.overscan,m,d);r<=C;r++){const h=O.default({item:t.data[r],index:r})[0];a.push(T(p,{key:M(h,r),_resizer:u._observeItem,_index:r,_offset:e._getItemOffset(r),_hide:e._isUnmeasuredItem(r),_children:h,_isHorizontal:i,_isSSR:S,_as:n},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR","_as"]))}return T(s,{ref:g,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:i?b+"px":"100%",height:i?"100%":b+"px",pointerEvents:m!==k?"none":void 0}},J(a)?a:{default:()=>[a],_:2},8,["style"])}}});export{X as V};
