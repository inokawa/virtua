import{d as ve,r as Le,k as fe,q as Ee,c as he,s as Te,i as we}from"./iframe-WY9fO4Lu.js";const R=null,{min:C,max:L,abs:de,floor:Re}=Math,te=(e,t,s)=>C(s,L(t,e)),ye=e=>[...e].sort((t,s)=>t-s),Ce=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},D=()=>{let e;return[new Promise(s=>{e=s}),e]},se=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},V=-1,B=(e,t,s)=>{const n=s?"unshift":"push";for(let i=0;i<t;i++)e[n](V);return e},K=(e,t)=>{const s=e._sizes[t];return s===V?e._defaultItemSize:s},Ve=(e,t,s)=>{const n=e._sizes[t]===V;return e._sizes[t]=s,e._computedOffsetIndex=C(t,e._computedOffsetIndex),n},j=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=K(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Ne=e=>e._length?j(e,e._length-1)+K(e,e._length-1):0,w=(e,t,s=0,n=e._length-1)=>{for(;s<=n;){const i=Re((s+n)/2),c=j(e,i);if(c<=t){if(c+K(e,i)>t)return i;s=i+1}else n=i-1}return te(s,0,e._length-1)},Ae=(e,t,s,n)=>{if(n=C(n,e._length-1),j(e,n)<=t){const i=w(e,t+s,n);return[w(e,t,n,i),i]}else{const i=w(e,t,void 0,n);return[i,w(e,t+s,i)]}},ke=(e,t)=>{let s=0;const n=[];e._sizes.forEach((o,l)=>{o!==V&&(n.push(o),l<t&&s++)}),e._computedOffsetIndex=-1;const i=ye(n),c=i.length,f=c/2|0,u=c%2===0?(i[f-1]+i[f])/2:i[f],r=e._defaultItemSize;return((e._defaultItemSize=u)-r)*L(t-s,0)},De=(e,t,s)=>({_defaultItemSize:t,_sizes:B([],e),_length:e,_computedOffsetIndex:-1,_offsets:B([],e)}),Me=e=>[e._sizes.slice(),e._defaultItemSize],ae=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:C(t-1,e._computedOffsetIndex),e._length=t,n>0?(B(e._offsets,n),B(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((i,c)=>i-(c===V?e._defaultItemSize:c),0))},Pe=typeof window<"u",Se=()=>document.documentElement,A=e=>e.ownerDocument,k=e=>e.defaultView,ne=se(()=>Pe?getComputedStyle(Se()).direction==="rtl":!1),pe=se(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Je=se(()=>"scrollBehavior"in Se().style),Ue=2147483647,y=0,_e=1,me=2,x=0,G=1,Z=2,Q=1,ge=2,re=3,oe=4,We=5,$e=6,H=7,Oe=8,T=1,ee=2,xe=4,Be=8,Fe=e=>L(e.$getTotalSize(),e.$getViewportSize()),Ye=(e,t=40,s=4,n=0,i,c=!1)=>{let f=!!n,u=1,r=0,o=0,l=0,d=0,a=0,_=0,m=y,g=x,O=f?[0,L(n-1,0)]:R,I=[0,0],E=0;const $=De(e,t),q=new Set,F=()=>l-o,P=()=>F()+a+d,le=S=>Ae($,S,r,I[0]),ce=()=>Ne($),ue=S=>j($,S)-a,J=S=>K($,S),Y=S=>{S&&(pe()&&m!==y||O&&g===G?a+=S:d+=S)};return{$getStateVersion:()=>u,$getCacheSnapshot:()=>Me($),$getRange:()=>{let S,p;return _?[S,p]=I:([S,p]=I=le(L(0,P())),O&&(S=C(S,O[0]),p=L(p,O[1]))),m!==_e&&(S-=L(0,s)),m!==me&&(p+=L(0,s)),[L(S,0),C(p,$._length-1)]},$findStartIndex:()=>w($,P()),$findEndIndex:()=>w($,P()+r),$isUnmeasuredItem:S=>$._sizes[S]===V,$getItemOffset:ue,$getItemSize:J,$getItemsLength:()=>$._length,$getScrollOffset:()=>l,$isScrolling:()=>m!==y,$getViewportSize:()=>r,$getStartSpacerSize:()=>o,$getTotalSize:ce,_flushJump:()=>(_=d,d=0,[_,g===Z]),$subscribe:(S,p)=>{const N=[S,p];return q.add(N),()=>{q.delete(N)}},$update:(S,p)=>{let N,X,v=0;switch(S){case Q:{const h=_;_=0;const z=p-l,b=de(z);!(h&&b<de(h)+1)&&g===x&&(m=z<0?me:_e),f&&(O=R,f=!1),l=p,v=xe;const W=F();W>=-r&&W<=ce()&&(v+=T,X=b>r);break}case ge:{v=Be,m!==y&&(N=!0,v+=T),m=y,g=x,O=R;break}case re:{const h=p.filter(([z,b])=>$._sizes[z]!==b);if(!h.length)break;Y(h.reduce((z,[b,U])=>((g===Z||(O&&g===G?b<O[0]:ue(b)+(m===y&&g===x?J(b):0)<F()))&&(z+=U-J(b)),z),0));for(const[z,b]of h){const U=J(z),W=Ve($,z,b);c&&(E+=W?b:b-U)}c&&r&&E>r&&(Y(ke($,w($,P()))),c=!1),v=T+ee,X=!0;break}case oe:{r!==p&&(r=p,v=T+ee);break}case We:{p[1]?(Y(ae($,p[0],!0)),g=Z,v=T):(ae($,p[0]),v=T);break}case $e:{o=p;break}case H:{g=G;break}case Oe:{O=le(p),v=T;break}}v&&(u=(u&Ue)+1,N&&a&&(d+=a,a=0),q.forEach(([h,z])=>{v&h&&z(X)}))}}},ie=setTimeout,Ke=(e,t)=>{let s;const n=()=>{s!=R&&clearTimeout(s)},i=()=>{n(),s=ie(()=>{s=R,e()},t)};return i._cancel=n,i},M=(e,t)=>t&&ne()?-e:e,Ie=(e,t,s,n,i,c)=>{const f=Date.now;let u=0,r=!1,o=!1,l=!1,d=!1;const a=Ke(()=>{if(r||o){r=!1,a();return}l=!1,e.$update(ge)},150),_=()=>{u=f(),l&&(d=!0),c&&e.$update($e,c()),e.$update(Q,n()),a()},m=(I=>{if(r||!e.$isScrolling()||I.ctrlKey)return;const E=f()-u;150>E&&50<E&&(s?I.deltaX:I.deltaY)&&(r=!0)}),g=()=>{o=!0,l=d=!1},O=()=>{o=!1,pe()&&(l=!0)};return t.addEventListener("scroll",_),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",g,{passive:!0}),t.addEventListener("touchend",O,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",_),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",O),a._cancel()},_fixScrollJump:()=>{const[I,E]=e._flushJump();I&&(i(M(I,s),E,d),d=!1,E&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(Q,n()))}}},be=(e,t,s)=>{let n;return[async(i,c)=>{if(!await t())return;n&&n();const f=()=>{const[u,r]=D();return n=()=>{r(!1)},e.$getViewportSize()&&ie(n,150),[u,e.$subscribe(ee,()=>{r(!0)})]};if(c&&Je())e.$update(Oe,i()),Ce(async()=>{for(;;){let u=!0;for(let[l,d]=e.$getRange();l<=d;l++)if(e.$isUnmeasuredItem(l)){u=!1;break}if(u)break;const[r,o]=f();try{if(!await r)return}finally{o()}}e.$update(H),s(i(),c)});else for(;;){const[u,r]=f();try{if(e.$update(H),s(i()),!await u)return}finally{r()}}},()=>{n&&n()}]},Xe=(e,t)=>{let s,n,i=D();const c=t?"scrollLeft":"scrollTop",f=t?"overflowX":"overflowY",[u,r]=be(e,()=>i[0],(o,l)=>{o=M(o,t),l?s.scrollTo({[t?"left":"top"]:o,behavior:"smooth"}):s[c]=o});return{$observe(o){s=o,n=Ie(e,o,t,()=>M(o[c],t),(l,d,a)=>{if(a){const _=o.style,m=_[f];_[f]="hidden",ie(()=>{_[f]=m})}o[c]=e.$getScrollOffset()+l,d&&r()}),i[1](!0)},$dispose(){n&&n._dispose(),i[1](!1),i=D()},$scrollTo(o){u(()=>o)},$scrollBy(o){o+=e.$getScrollOffset(),u(()=>o)},$scrollToIndex(o,{align:l,smooth:d,offset:a=0}={}){if(o=te(o,0,e.$getItemsLength()-1),l==="nearest"){const _=e.$getItemOffset(o),m=e.$getScrollOffset();if(_<m)l="start";else if(_+e.$getItemSize(o)>m+e.$getViewportSize())l="end";else return}u(()=>a+e.$getStartSpacerSize()+e.$getItemOffset(o)+(l==="end"?e.$getItemSize(o)-e.$getViewportSize():l==="center"?(e.$getItemSize(o)-e.$getViewportSize())/2:0),d)},$fixScrollJump:()=>{n&&n._fixScrollJump()}}},Ge=(e,t)=>{let s,n,i=D();const c=t?"left":"top",[f]=be(e,()=>i[0],(r,o)=>{r=M(r,t);const l=k(A(s));o?l.scroll({[c]:r,behavior:"smooth"}):l.scroll({[c]:r})}),u=(r,o,l,d,a=0)=>{const _=d?"offsetLeft":"offsetTop",m=a+(d&&ne()?l.innerWidth-r[_]-r.offsetWidth:r[_]),g=r.offsetParent;return r===o||!g?m:u(g,o,l,d,m)};return{$observe(r){s=r;const o=t?"scrollX":"scrollY",l=A(r),d=k(l),a=l.body;n=Ie(e,d,t,()=>M(d[o],t),_=>{d.scroll({[c]:e.$getScrollOffset()+_})},()=>u(r,a,d,t)),i[1](!0)},$dispose(){n&&n._dispose(),s=void 0,i[1](!1),i=D()},$fixScrollJump:()=>{n&&n._fixScrollJump()},$scrollToIndex(r,{align:o,smooth:l,offset:d=0}={}){if(!s)return;if(r=te(r,0,e.$getItemsLength()-1),o==="nearest"){const O=e.$getItemOffset(r),I=e.$getScrollOffset();if(O<I)o="start";else if(O+e.$getItemSize(r)>I+e.$getViewportSize())o="end";else return}const a=A(s),_=k(a),m=a.documentElement,g=()=>e.$getViewportSize()-(t?m.clientWidth:m.clientHeight);f(()=>d+u(s,a.body,_,t)+e.$getItemOffset(r)+(o==="end"?e.$getItemSize(r)-(e.$getViewportSize()-g()):o==="center"?(e.$getItemSize(r)-(e.$getViewportSize()-g()))/2:0),l)}}},ze=e=>{let t;return{_observe(s){(t||(t=new(k(A(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ze=(e,t)=>{let s;const n=t?"width":"height",i=new WeakMap,c=ze(f=>{const u=[];for(const{target:r,contentRect:o}of f)if(r.offsetParent)if(r===s)e.$update(oe,o[n]);else{const l=i.get(r);l!=R&&u.push([l,o[n]])}u.length&&e.$update(re,u)});return{$observeRoot(f){c._observe(s=f)},$observeItem:(f,u)=>(i.set(f,u),c._observe(f),()=>{i.delete(f),c._unobserve(f)}),$dispose:c._dispose}},Qe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",i=new WeakMap,c=ze(u=>{const r=[];for(const{target:o,contentRect:l}of u){if(!o.offsetParent)continue;const d=i.get(o);d!=R&&r.push([d,l[s]])}r.length&&e.$update(re,r)});let f;return{$observeRoot(u){const r=k(A(u)),o=()=>{e.$update(oe,r[n])};r.addEventListener("resize",o),o(),f=()=>{r.removeEventListener("resize",o)}},$observeItem:(u,r)=>(i.set(u,r),c._observe(u),()=>{i.delete(u),c._unobserve(u)}),$dispose(){f&&f(),c._dispose()}}};function je(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!we(e)}const He=ve({props:{_stateVersion:{type:Object,required:!0},_store:{type:Object,required:!0},_children:{type:Object,required:!0},_resizer:{type:Function,required:!0},_index:{type:Number,required:!0},_isHorizontal:{type:Boolean},_isSSR:{type:Boolean},_as:{type:String,required:!0},_itemProps:Object},setup(e){const t=Le(),s=fe(()=>e._stateVersion.value&&e._store.$getItemOffset(e._index)),n=fe(()=>e._stateVersion.value&&e._store.$isUnmeasuredItem(e._index));return Ee(()=>t.value&&e._index,(i,c,f)=>{f(e._resizer(t.value,e._index))},{flush:"post"}),()=>{const{_children:i,_isHorizontal:c,_isSSR:f,_as:u}=e,r=n.value,{style:o,...l}=e._itemProps??{},d={contain:"layout style",position:r&&f?void 0:"absolute",[c?"height":"width"]:"100%",[c?"top":"left"]:"0px",[c?ne()?"right":"left":"top"]:s.value+"px",visibility:!r||f?"visible":"hidden",...o};return c&&(d.display="inline-flex"),he(u,Te({ref:t,style:d},l),je(i)?i:{default:()=>[i],_:2},16,["style"])}}}),et=(e,t)=>{const s=e.key;return s??"_"+t},tt=(e,t)=>e[0]===t[0]&&e[1]===t[1],st=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s};export{We as A,He as L,T as U,st as _,Xe as a,xe as b,Ye as c,Be as d,Ze as e,et as f,Fe as g,$e as h,tt as i,Ge as j,Qe as k,Ce as m,ye as s};
