import{d as ve,r as Le,k as fe,q as he,c as Ee,s as we,i as ye}from"./iframe-BmpXDGC6.js";const T=null,{min:w,max:h,abs:de,floor:Re}=Math,te=(e,t,s)=>w(s,h(t,e)),Te=e=>[...e].sort((t,s)=>t-s),Ke=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},F=()=>{let e,t;return[new Promise((n,r)=>{e=n,t=r}),e,t]},se=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},V=-1,k=(e,t,s)=>{const n=s?"unshift":"push";for(let r=0;r<t;r++)e[n](V);return e},q=(e,t)=>{const s=e._sizes[t];return s===V?e._defaultItemSize:s},Ce=(e,t,s)=>{const n=e._sizes[t]===V;return e._sizes[t]=s,e._computedOffsetIndex=w(t,e._computedOffsetIndex),n},Y=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=q(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Ve=e=>e._length?Y(e,e._length-1)+q(e,e._length-1):0,R=(e,t,s=0,n=e._length-1)=>{for(;s<=n;){const r=Re((s+n)/2),d=Y(e,r);if(d<=t){if(d+q(e,r)>t)return r;s=r+1}else n=r-1}return te(s,0,e._length-1)},Ne=(e,t,s,n)=>{if(n=w(n,e._length-1),Y(e,n)<=t){const r=R(e,t+s,n);return[R(e,t,n,r),r]}else{const r=R(e,t,void 0,n);return[r,R(e,t+s,r)]}},Ae=(e,t)=>{let s=0;const n=[];e._sizes.forEach((p,i)=>{p!==V&&(n.push(p),i<t&&s++)}),e._computedOffsetIndex=-1;const r=Te(n),d=r.length,a=d/2|0,S=d%2===0?(r[a-1]+r[a])/2:r[a],l=e._defaultItemSize;return((e._defaultItemSize=S)-l)*h(t-s,0)},ke=(e,t,s)=>({_defaultItemSize:t,_sizes:s&&s[0]?k(s[0].slice(0,w(e,s[0].length)),h(0,e-s[0].length)):k([],e),_length:e,_computedOffsetIndex:-1,_offsets:k([],e)}),Me=e=>[e._sizes.slice(),e._defaultItemSize],ae=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:w(t-1,e._computedOffsetIndex),e._length=t,n>0?(k(e._offsets,n),k(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((r,d)=>r-(d===V?e._defaultItemSize:d),0))},De=typeof window<"u",Se=()=>document.documentElement,M=e=>e.ownerDocument,D=e=>e.defaultView,ne=se(()=>De?getComputedStyle(Se()).direction==="rtl":!1),pe=se(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),ge=se(()=>"scrollBehavior"in Se().style),Pe=2147483647,N=0,_e=1,me=2,B=0,Ue=1,H=2,ee=1,Ie=2,re=3,oe=4,Je=5,$e=6,ie=7,le=8,y=1,j=2,We=4,xe=8,qe=e=>h(e.$getTotalSize(),e.$getViewportSize()),be=e=>!!e.$getViewportSize(),Ye=(e,t=40,s=4,n=0,r,d=!1)=>{let a=!!n,S=1,l=0,p=0,i=0,o=0,_=0,m=0,f=N,c=B,u=a?[0,h(n-1,0)]:T,b=[0,0],v=0;const I=ke(e,t,r),X=new Set,P=()=>i-p,U=()=>P()+_+o,ce=g=>Ne(I,g,l,b[0]),G=()=>Ve(I),ue=g=>Y(I,g)-_,J=g=>q(I,g),Z=g=>{g&&(pe()&&f!==N?_+=g:o+=g)};return{$getStateVersion:()=>S,$getCacheSnapshot:()=>Me(I),$getRange:()=>{let g,$;return m?[g,$]=b:([g,$]=b=ce(h(0,U())),u&&(g=w(g,u[0]),$=h($,u[1]))),f!==_e&&(g-=h(0,s)),f!==me&&($+=h(0,s)),[h(g,0),w($,I._length-1)]},$findStartIndex:()=>R(I,U()),$findEndIndex:()=>R(I,U()+l),$isUnmeasuredItem:g=>I._sizes[g]===V,_hasUnmeasuredItemsInFrozenRange:()=>u?I._sizes.slice(h(0,u[0]-1),w(I._length-1,u[1]+1)+1).includes(V):!1,$getItemOffset:ue,$getItemSize:J,$getItemsLength:()=>I._length,$getScrollOffset:()=>i,$isScrolling:()=>f!==N,$getViewportSize:()=>l,$getStartSpacerSize:()=>p,$getTotalSize:G,_flushJump:()=>(m=o,o=0,[m,c===H||P()+l>=G()]),$subscribe:(g,$)=>{const A=[g,$];return X.add(A),()=>{X.delete(A)}},$update:(g,$)=>{let A,Q,L=0;switch(g){case ee:{const E=m;m=0;const z=$-i,O=de(z);!(E&&O<de(E)+1)&&c===B&&(f=z<0?me:_e),a&&(u=T,a=!1),i=$,L=We;const x=P();x>=-l&&x<=G()&&(L+=y,Q=O>l);break}case Ie:{L=xe,f!==N&&(A=!0,L+=y),f=N,c=B,u=T;break}case re:{const E=$.filter(([z,O])=>I._sizes[z]!==O);if(!E.length)break;Z(E.reduce((z,[O,W])=>((c===H||(u?!a&&O<u[0]:ue(O)+(f===N&&c===B?J(O):0)<P()))&&(z+=W-J(O)),z),0));for(const[z,O]of E){const W=J(z),x=Ce(I,z,O);d&&(v+=x?O:O-W)}d&&l&&v>l&&(Z(Ae(I,R(I,U()))),d=!1),L=y+j,Q=!0;break}case oe:{l!==$&&(l=$,L=y+j);break}case Je:{$[1]?(Z(ae(I,$[0],!0)),c=H,L=y):(ae(I,$[0]),L=y);break}case $e:{p=$;break}case ie:{c=Ue;break}case le:{u=ce($),L=y;break}}L&&(S=(S&Pe)+1,A&&_&&(o+=_,_=0),X.forEach(([E,z])=>{L&E&&z(Q)}))}}},K=setTimeout,Be=(e,t)=>{let s;const n=()=>{s!=T&&clearTimeout(s)},r=()=>{n(),s=K(()=>{s=T,e()},t)};return r._cancel=n,r},C=(e,t)=>t&&ne()?-e:e,Oe=(e,t,s,n,r,d)=>{const a=Date.now;let S=0,l=!1,p=!1,i=!1,o=!1;const _=Be(()=>{if(l||p){l=!1,_();return}i=!1,e.$update(Ie)},150),m=()=>{S=a(),i&&(o=!0),d&&e.$update($e,d()),e.$update(ee,n()),_()},f=b=>{if(l||!e.$isScrolling()||b.ctrlKey)return;const v=a()-S;150>v&&50<v&&(s?b.deltaX:b.deltaY)&&(l=!0)},c=()=>{p=!0,i=o=!1},u=()=>{p=!1,pe()&&(i=!0)};return t.addEventListener("scroll",m),t.addEventListener("wheel",f,{passive:!0}),t.addEventListener("touchstart",c,{passive:!0}),t.addEventListener("touchend",u,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",m),t.removeEventListener("wheel",f),t.removeEventListener("touchstart",c),t.removeEventListener("touchend",u),_._cancel()},_fixScrollJump:()=>{const[b,v]=e._flushJump();b&&(r(C(b,s),v,o),o=!1,v&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(ee,n()))}}},Xe=(e,t)=>{let s,n,r;const[d,a,S]=F(),l=t?"scrollLeft":"scrollTop",p=t?"overflowX":"overflowY",i=async(o,_)=>{await d,r&&r();const m=()=>{const[f,c,u]=F();return r=u,be(e)&&K(u,150),[f,e.$subscribe(j,()=>{c()})]};if(_&&ge()){for(;e.$update(le,o()),!!e._hasUnmeasuredItemsInFrozenRange();){const[f,c]=m();try{await f}catch{return}finally{c()}}s.scrollTo({[t?"left":"top"]:C(o(),t),behavior:"smooth"})}else for(;;){const[f,c]=m();try{s[l]=C(o(),t),e.$update(ie),await f}catch{return}finally{c()}}};return{$observe(o){s=o,n=Oe(e,o,t,()=>C(o[l],t),(_,m,f)=>{if(f){const c=o.style,u=c[p];c[p]="hidden",K(()=>{c[p]=u})}m?(o[l]=e.$getScrollOffset()+_,r&&r()):o[l]+=_}),a()},$dispose(){n&&n._dispose(),S()},$scrollTo(o){i(()=>o)},$scrollBy(o){o+=e.$getScrollOffset(),i(()=>o)},$scrollToIndex(o,{align:_,smooth:m,offset:f=0}={}){if(o=te(o,0,e.$getItemsLength()-1),_==="nearest"){const c=e.$getItemOffset(o),u=e.$getScrollOffset();if(c<u)_="start";else if(c+e.$getItemSize(o)>u+e.$getViewportSize())_="end";else return}i(()=>f+e.$getStartSpacerSize()+e.$getItemOffset(o)+(_==="end"?e.$getItemSize(o)-e.$getViewportSize():_==="center"?(e.$getItemSize(o)-e.$getViewportSize())/2:0),m)},$fixScrollJump:()=>{n&&n._fixScrollJump()}}},Ge=(e,t)=>{let s,n,r;const[d,a,S]=F(),l=(i,o,_,m,f=0)=>{const c=m?"offsetLeft":"offsetTop",u=f+(m&&ne()?_.innerWidth-i[c]-i.offsetWidth:i[c]),b=i.offsetParent;return i===o||!b?u:l(b,o,_,m,u)},p=async(i,o)=>{await d,r&&r();const _=()=>{const[f,c,u]=F();return r=u,be(e)&&K(u,150),[f,e.$subscribe(j,()=>{c()})]},m=D(M(s));if(o&&ge()){for(;e.$update(le,i()),!!e._hasUnmeasuredItemsInFrozenRange();){const[f,c]=_();try{await f}catch{return}finally{c()}}m.scroll({[t?"left":"top"]:C(i(),t),behavior:"smooth"})}else for(;;){const[f,c]=_();try{m.scroll({[t?"left":"top"]:C(i(),t)}),e.$update(ie),await f}catch{return}finally{c()}}};return{$observe(i){s=i;const o=t?"scrollX":"scrollY",_=M(i),m=D(_),f=_.body;n=Oe(e,m,t,()=>C(m[o],t),(c,u)=>{u?m.scroll({[t?"left":"top"]:e.$getScrollOffset()+c}):m.scrollBy(t?c:0,t?0:c)},()=>l(i,f,m,t)),a()},$dispose(){n&&n._dispose(),s=void 0,S()},$fixScrollJump:()=>{n&&n._fixScrollJump()},$scrollToIndex(i,{align:o,smooth:_,offset:m=0}={}){if(!s)return;if(i=te(i,0,e.$getItemsLength()-1),o==="nearest"){const v=e.$getItemOffset(i),I=e.$getScrollOffset();if(v<I)o="start";else if(v+e.$getItemSize(i)>I+e.$getViewportSize())o="end";else return}const f=M(s),c=D(f),u=f.documentElement,b=()=>e.$getViewportSize()-(t?u.clientWidth:u.clientHeight);p(()=>m+l(s,f.body,c,t)+e.$getItemOffset(i)+(o==="end"?e.$getItemSize(i)-(e.$getViewportSize()-b()):o==="center"?(e.$getItemSize(i)-(e.$getViewportSize()-b()))/2:0),_)}}},ze=e=>{let t;return{_observe(s){(t||(t=new(D(M(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ze=(e,t)=>{let s;const n=t?"width":"height",r=new WeakMap,d=ze(a=>{const S=[];for(const{target:l,contentRect:p}of a)if(l.offsetParent)if(l===s)e.$update(oe,p[n]);else{const i=r.get(l);i!=T&&S.push([i,p[n]])}S.length&&e.$update(re,S)});return{$observeRoot(a){d._observe(s=a)},$observeItem:(a,S)=>(r.set(a,S),d._observe(a),()=>{r.delete(a),d._unobserve(a)}),$dispose:d._dispose}},Qe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,d=ze(S=>{const l=[];for(const{target:p,contentRect:i}of S){if(!p.offsetParent)continue;const o=r.get(p);o!=T&&l.push([o,i[s]])}l.length&&e.$update(re,l)});let a;return{$observeRoot(S){const l=D(M(S)),p=()=>{e.$update(oe,l[n])};l.addEventListener("resize",p),p(),a=()=>{l.removeEventListener("resize",p)}},$observeItem:(S,l)=>(r.set(S,l),d._observe(S),()=>{r.delete(S),d._unobserve(S)}),$dispose(){a&&a(),d._dispose()}}};function Fe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ye(e)}const He=ve({props:{_stateVersion:{type:Object,required:!0},_store:{type:Object,required:!0},_children:{type:Object,required:!0},_resizer:{type:Function,required:!0},_index:{type:Number,required:!0},_isHorizontal:{type:Boolean},_isSSR:{type:Boolean},_as:{type:String,required:!0},_itemProps:Object},setup(e){const t=Le(),s=fe(()=>e._stateVersion.value&&e._store.$getItemOffset(e._index)),n=fe(()=>e._stateVersion.value&&e._store.$isUnmeasuredItem(e._index));return he(()=>t.value&&e._index,(r,d,a)=>{a(e._resizer(t.value,e._index))},{flush:"post"}),()=>{const{_children:r,_isHorizontal:d,_isSSR:a,_as:S}=e,l=n.value,{style:p,...i}=e._itemProps??{},o={contain:"layout style",position:l&&a?void 0:"absolute",[d?"height":"width"]:"100%",[d?"top":"left"]:"0px",[d?ne()?"right":"left":"top"]:s.value+"px",visibility:!l||a?"visible":"hidden",...p};return d&&(o.display="inline-flex"),Ee(S,we({ref:t,style:o},i),Fe(r)?r:{default:()=>[r],_:2},16,["style"])}}}),et=(e,t)=>{const s=e.key;return s??"_"+t},tt=(e,t)=>e[0]===t[0]&&e[1]===t[1],st=(e,t)=>{const s=e.__vccOpts||e;for(const[n,r]of t)s[n]=r;return s};export{Je as A,He as L,y as U,st as _,Xe as a,We as b,Ye as c,xe as d,Ze as e,et as f,qe as g,$e as h,tt as i,Ge as j,Qe as k,Ke as m,Te as s};
