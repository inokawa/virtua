import{d as V,r as z,k as d,l as C,m as L,q as f,c as I,i as w}from"./iframe-DnPHXzhp.js";import{c as M,a as P,U as j,b as k,d as H,m as U,e as B,g as D,s as p,f as F,L as G,i as q,A as J,h as K}from"./_plugin-vue_export-helper-Bwg-s6WO.js";function Q(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!w(e)}const W={data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},Z=V({props:W,emits:["scroll","scrollEnd"],setup(e,{emit:S,expose:T,slots:h}){let m=!!e.ssrCount;const a=e.horizontal,_=z(),t=M(e.data.length,e.itemSize,e.overscan,e.ssrCount,void 0,!e.itemSize),u=B(t,a),i=P(t,a),l=z(t.$getStateVersion()),v=t.$subscribe(j,()=>{l.value=t.$getStateVersion()}),x=t.$subscribe(k,()=>{S("scroll",t.$getScrollOffset())}),y=t.$subscribe(H,()=>{S("scrollEnd")}),O=d(s=>{l.value;const r=t.$getRange();return s&&q(s,r)?s:r}),R=d(()=>l.value&&t.$isScrolling()),A=d(()=>l.value&&t.$getTotalSize());return C(()=>{m=!1,U(()=>{const s=r=>{u.$observeRoot(r),i.$observe(r)};e.scrollRef?s(e.scrollRef):s(_.value.parentElement)})}),L(()=>{v(),x(),y(),u.$dispose(),i.$dispose()}),f(()=>e.data.length,s=>{t.$update(J,[s,e.shift])}),f(()=>e.startMargin,s=>{t.$update(K,s)},{immediate:!0}),f([l],()=>{i.$fixScrollJump()},{flush:"post"}),T({get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return D(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:i.$scrollToIndex,scrollTo:i.$scrollTo,scrollBy:i.$scrollBy}),()=>{const s=e.as,r=e.item,[g,$]=O.value,b=A.value,c=[],E=n=>{const o=h.default({item:e.data[n],index:n})[0];return I(G,{key:F(o,n),_stateVersion:l,_store:t,_resizer:u.$observeItem,_index:n,_children:o,_isHorizontal:a,_isSSR:m,_as:r,_itemProps:e.itemProps?.({item:e.data[n],index:n})},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_isSSR","_as","_itemProps"])};if(e.keepMounted){const n=new Set(e.keepMounted);for(let o=g,N=$;o<=N;o++)n.add(o);p([...n]).forEach(o=>{c.push(E(o))})}else for(let n=g,o=$;n<=o;n++)c.push(E(n));return I(s,{ref:_,style:{contain:"size paint style",overflowAnchor:"none",overflow:"clip",flex:"none",position:"relative",width:a?b+"px":"100%",height:a?"100%":b+"px",pointerEvents:R.value?"none":void 0}},Q(c)?c:{default:()=>[c],_:2},8,["style"])}}});export{Z as V};
