import{d as V,b as I,m as d,q as L,s as M,v as S,e as z,i as P}from"./vue.esm-bundler-CLFsV--v.js";import{c as j,U as H,a as U,b as k,m as w,g as B,s as D,d as F,e as G,f as q,L as J,i as K,A as Q,h as W}from"./_plugin-vue_export-helper-DC9ETIY0.js";function X(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!P(e)}const Y={data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},ee=V({props:Y,emits:["scroll","scrollEnd"],setup(e,{emit:g,expose:v,slots:T}){let _=!!e.ssrCount;const u=e.horizontal,b=I(),t=j(e.data.length,e.itemSize,e.overscan,e.ssrCount,void 0,!e.itemSize),f=F(t,u),l=G(t,u),a=I(t.$getStateVersion()),x=t.$subscribe(H,()=>{a.value=t.$getStateVersion()}),y=t.$subscribe(U,()=>{g("scroll",t.$getScrollOffset())}),O=t.$subscribe(k,()=>{g("scrollEnd")}),R=d(s=>{a.value;const r=t.$getRange();return s&&K(s,r)?s:r}),A=d(()=>a.value&&t.$isScrolling()),N=d(()=>a.value&&t.$getTotalSize()),C=d(()=>a.value&&t.$getJumpCount());return L(()=>{_=!1,w(()=>{const s=r=>{f.$observeRoot(r),l.$observe(r)};e.scrollRef?s(e.scrollRef):s(b.value.parentElement)})}),M(()=>{x(),y(),O(),f.$dispose(),l.$dispose()}),S(()=>e.data.length,s=>{t.$update(Q,[s,e.shift])}),S(()=>e.startMargin,s=>{t.$update(W,s)},{immediate:!0}),S([C],()=>{l.$fixScrollJump()},{flush:"post"}),v({get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return B(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:l.$scrollToIndex,scrollTo:l.$scrollTo,scrollBy:l.$scrollBy}),()=>{const s=e.as,r=e.item,[$,E]=R.value,h=N.value,c=[];function m(n){var i;const o=T.default({item:e.data[n],index:n})[0];return z(J,{key:q(o,n),_rerender:a,_store:t,_resizer:f.$observeItem,_index:n,_children:o,_isHorizontal:u,_isSSR:_,_as:r,_itemProps:(i=e.itemProps)==null?void 0:i.call(e,{item:e.data[n],index:n})},null,8,["_rerender","_store","_resizer","_index","_children","_isHorizontal","_isSSR","_as","_itemProps"])}for(let n=$,o=E;n<=o;n++)c.push(m(n));if(e.keepMounted){const n=[],o=[];D(e.keepMounted).forEach(i=>{i<$&&n.push(m(i)),i>E&&o.push(m(i))}),c.unshift(...n),c.push(...o)}return z(s,{ref:b,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:u?h+"px":"100%",height:u?"100%":h+"px",pointerEvents:A.value?"none":void 0}},X(c)?c:{default:()=>[c],_:2},8,["style"])}}});export{ee as V};
