import{d as N,b as E,m as A,q as x,s as c,e as T,i as L}from"./vue.esm-bundler-BnsM77Ao.js";import{c as V,U as D,a as U,b as H,m as j,g as w,d as B,e as M,L as p,S as G,f as P,h as k,A as q,i as F}from"./_plugin-vue_export-helper-CoBZzB35.js";function J(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!L(t)}const K={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"}},X=N({props:K,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:_,expose:z,slots:O}){let S=!!t.ssrCount;const l=t.horizontal,g=E(),e=V(t.data.length,t.itemSize??40,t.ssrCount,void 0,!t.itemSize),u=P(e,l),o=k(e,l),i=E(e._getStateVersion()),R=e._subscribe(D,()=>{i.value=e._getStateVersion()}),v=e._subscribe(U,()=>{_("scroll",e._getScrollOffset())}),I=e._subscribe(H,()=>{_("scrollEnd")});return A(()=>{S=!1,j(()=>{const s=r=>{u._observeRoot(r),o._observe(r)};t.scrollRef?s(t.scrollRef):s(g.value.parentElement)})}),x(()=>{R(),v(),I(),u._dispose(),o._dispose()}),c(()=>t.data.length,s=>{e._update(q,[s,t.shift])}),c(()=>t.startMargin,s=>{e._update(F,s)},{immediate:!0}),c([i,e._getJumpCount],([,s],[,r])=>{s!==r&&o._fixScrollJump()},{flush:"post"}),c([i,e._getRange],([,[s,r]],[,[f,d]])=>{f===s&&d===r||_("rangeChange",s,r)},{flush:"post"}),z({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return w(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),()=>{i.value;const s=t.as,r=t.item,f=t.data.length,[d,y]=e._getRange(),m=e._getScrollDirection(),b=e._getTotalSize(),a=[];for(let[n,C]=B(d,y,t.overscan,m,f);n<=C;n++){const h=O.default(t.data[n])[0];a.push(T(p,{key:M(h,n),_resizer:u._observeItem,_index:n,_offset:e._getItemOffset(n),_hide:e._isUnmeasuredItem(n),_children:h,_isHorizontal:l,_isSSR:S,_as:r},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR","_as"]))}return T(s,{ref:g,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:l?b+"px":"100%",height:l?"100%":b+"px",pointerEvents:m!==G?"none":"auto"}},J(a)?a:{default:()=>[a],_:2},8,["style"])}}});export{X as V};
