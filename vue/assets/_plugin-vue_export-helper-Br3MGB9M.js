import{d as Ee,r as he,k as de,q as we,c as ye,s as Re,i as Te}from"./iframe-CdyQTP-K.js";const R=null,{min:N,max:L,abs:ae,floor:Ce}=Math,se=(e,t,s)=>N(s,L(t,e)),Ve=e=>[...e].sort((t,s)=>t-s),pe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},V=()=>{let e;return[new Promise(s=>{e=s}),e]},ne=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},A=-1,K=(e,t,s)=>{const n=s?"unshift":"push";for(let i=0;i<t;i++)e[n](A);return e},F=(e,t)=>{const s=e._sizes[t];return s===A?e._defaultItemSize:s},Ne=(e,t,s)=>{const n=e._sizes[t]===A;return e._sizes[t]=s,e._computedOffsetIndex=N(t,e._computedOffsetIndex),n},Y=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=F(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Ae=e=>e._length?Y(e,e._length-1)+F(e,e._length-1):0,y=(e,t,s=0,n=e._length-1)=>{for(;s<=n;){const i=Ce((s+n)/2),l=Y(e,i);if(l<=t){if(l+F(e,i)>t)return i;s=i+1}else n=i-1}return se(s,0,e._length-1)},ke=(e,t,s,n)=>{if(n=N(n,e._length-1),Y(e,n)<=t){const i=y(e,t+s,n);return[y(e,t,n,i),i]}else{const i=y(e,t,void 0,n);return[i,y(e,t+s,i)]}},Me=(e,t)=>{let s=0;const n=[];e._sizes.forEach((o,c)=>{o!==A&&(n.push(o),c<t&&s++)}),e._computedOffsetIndex=-1;const i=Ve(n),l=i.length,f=l/2|0,_=l%2===0?(i[f-1]+i[f])/2:i[f],r=e._defaultItemSize;return((e._defaultItemSize=_)-r)*L(t-s,0)},De=(e,t,s)=>({_defaultItemSize:t,_sizes:K([],e),_length:e,_computedOffsetIndex:-1,_offsets:K([],e)}),Pe=e=>[e._sizes.slice(),e._defaultItemSize],_e=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:N(t-1,e._computedOffsetIndex),e._length=t,n>0?(K(e._offsets,n),K(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((i,l)=>i-(l===A?e._defaultItemSize:l),0))},Je=typeof window<"u",$e=()=>document.documentElement,M=e=>e.ownerDocument,D=e=>e.defaultView,re=ne(()=>Je?getComputedStyle($e()).direction==="rtl":!1),ge=ne(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),be=ne(()=>"scrollBehavior"in $e().style),Ue=2147483647,C=0,me=1,Se=2,B=0,H=1,ee=2,te=1,Ie=2,oe=3,ie=4,We=5,Oe=6,P=7,le=8,w=1,j=2,xe=4,Be=8,Fe=e=>L(e.$getTotalSize(),e.$getViewportSize()),ze=e=>!!e.$getViewportSize(),Ye=(e,t=40,s=4,n=0,i,l=!1)=>{let f=!!n,_=1,r=0,o=0,c=0,u=0,d=0,a=0,m=C,S=B,$=f?[0,L(n-1,0)]:R,I=[0,0],E=0;const b=De(e,t),X=new Set,G=()=>c-o,J=()=>G()+d+u,ce=p=>ke(b,p,r,I[0]),ue=()=>Ae(b),fe=p=>Y(b,p)-d,U=p=>F(b,p),Z=p=>{p&&(ge()&&m!==C||$&&S===H?d+=p:u+=p)};return{$getStateVersion:()=>_,$getCacheSnapshot:()=>Pe(b),$getRange:()=>{let p,g;return a?[p,g]=I:([p,g]=I=ce(L(0,J())),$&&(p=N(p,$[0]),g=L(g,$[1]))),m!==me&&(p-=L(0,s)),m!==Se&&(g+=L(0,s)),[L(p,0),N(g,b._length-1)]},$findStartIndex:()=>y(b,J()),$findEndIndex:()=>y(b,J()+r),$isUnmeasuredItem:p=>b._sizes[p]===A,$getItemOffset:fe,$getItemSize:U,$getItemsLength:()=>b._length,$getScrollOffset:()=>c,$isScrolling:()=>m!==C,$getViewportSize:()=>r,$getStartSpacerSize:()=>o,$getTotalSize:ue,_flushJump:()=>(a=u,u=0,[a,S===ee]),$subscribe:(p,g)=>{const k=[p,g];return X.add(k),()=>{X.delete(k)}},$update:(p,g)=>{let k,Q,v=0;switch(p){case te:{const h=a;a=0;const z=g-c,O=ae(z);!(h&&O<ae(h)+1)&&S===B&&(m=z<0?Se:me),f&&($=R,f=!1),c=g,v=xe;const x=G();x>=-r&&x<=ue()&&(v+=w,Q=O>r);break}case Ie:{v=Be,m!==C&&(k=!0,v+=w),m=C,S=B,$=R;break}case oe:{const h=g.filter(([z,O])=>b._sizes[z]!==O);if(!h.length)break;Z(h.reduce((z,[O,W])=>((S===ee||($&&S===H?O<$[0]:fe(O)+(m===C&&S===B?U(O):0)<G()))&&(z+=W-U(O)),z),0));for(const[z,O]of h){const W=U(z),x=Ne(b,z,O);l&&(E+=x?O:O-W)}l&&r&&E>r&&(Z(Me(b,y(b,J()))),l=!1),v=w+j,Q=!0;break}case ie:{r!==g&&(r=g,v=w+j);break}case We:{g[1]?(Z(_e(b,g[0],!0)),S=ee,v=w):(_e(b,g[0]),v=w);break}case Oe:{o=g;break}case P:{S=H;break}case le:{$=ce(g),v=w;break}}v&&(_=(_&Ue)+1,k&&d&&(u+=d,d=0),X.forEach(([h,z])=>{v&h&&z(Q)}))}}},q=setTimeout,Ke=(e,t)=>{let s;const n=()=>{s!=R&&clearTimeout(s)},i=()=>{n(),s=q(()=>{s=R,e()},t)};return i._cancel=n,i},T=(e,t)=>t&&re()?-e:e,ve=(e,t,s,n,i,l)=>{const f=Date.now;let _=0,r=!1,o=!1,c=!1,u=!1;const d=Ke(()=>{if(r||o){r=!1,d();return}c=!1,e.$update(Ie)},150),a=()=>{_=f(),c&&(u=!0),l&&e.$update(Oe,l()),e.$update(te,n()),d()},m=(I=>{if(r||!e.$isScrolling()||I.ctrlKey)return;const E=f()-_;150>E&&50<E&&(s?I.deltaX:I.deltaY)&&(r=!0)}),S=()=>{o=!0,c=u=!1},$=()=>{o=!1,ge()&&(c=!0)};return t.addEventListener("scroll",a),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",S,{passive:!0}),t.addEventListener("touchend",$,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",a),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",S),t.removeEventListener("touchend",$),d._cancel()},_fixScrollJump:()=>{const[I,E]=e._flushJump();I&&(i(T(I,s),E,u),u=!1,E&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(te,n()))}}},Xe=(e,t)=>{let s,n,i,l=V();const f=t?"scrollLeft":"scrollTop",_=t?"overflowX":"overflowY",r=async(o,c)=>{if(!await l[0])return;i&&i();const u=()=>{const[d,a]=V();return i=()=>{a(!1)},ze(e)&&q(i,150),[d,e.$subscribe(j,()=>{a(!0)})]};if(c&&be())e.$update(le,o()),pe(async()=>{for(;;){let d=!0;for(let[S,$]=e.$getRange();S<=$;S++)if(e.$isUnmeasuredItem(S)){d=!1;break}if(d)break;const[a,m]=u();try{if(!await a)return}finally{m()}}e.$update(P),s.scrollTo({[t?"left":"top"]:T(o(),t),behavior:"smooth"})});else for(;;){const[d,a]=u();try{if(e.$update(P),s[f]=T(o(),t),!await d)return}finally{a()}}};return{$observe(o){s=o,n=ve(e,o,t,()=>T(o[f],t),(c,u,d)=>{if(d){const a=o.style,m=a[_];a[_]="hidden",q(()=>{a[_]=m})}o[f]=e.$getScrollOffset()+c,u&&i&&i()}),l[1](!0)},$dispose(){n&&n._dispose(),l[1](!1),l=V()},$scrollTo(o){r(()=>o)},$scrollBy(o){o+=e.$getScrollOffset(),r(()=>o)},$scrollToIndex(o,{align:c,smooth:u,offset:d=0}={}){if(o=se(o,0,e.$getItemsLength()-1),c==="nearest"){const a=e.$getItemOffset(o),m=e.$getScrollOffset();if(a<m)c="start";else if(a+e.$getItemSize(o)>m+e.$getViewportSize())c="end";else return}r(()=>d+e.$getStartSpacerSize()+e.$getItemOffset(o)+(c==="end"?e.$getItemSize(o)-e.$getViewportSize():c==="center"?(e.$getItemSize(o)-e.$getViewportSize())/2:0),u)},$fixScrollJump:()=>{n&&n._fixScrollJump()}}},Ge=(e,t)=>{let s,n,i,l=V();const f=(r,o,c,u,d=0)=>{const a=u?"offsetLeft":"offsetTop",m=d+(u&&re()?c.innerWidth-r[a]-r.offsetWidth:r[a]),S=r.offsetParent;return r===o||!S?m:f(S,o,c,u,m)},_=async(r,o)=>{if(!await l[0])return;i&&i();const c=()=>{const[d,a]=V();return i=()=>{a(!1)},ze(e)&&q(i,150),[d,e.$subscribe(j,()=>{a(!0)})]},u=D(M(s));if(o&&be())e.$update(le,r()),pe(async()=>{for(;;){let d=!0;for(let[S,$]=e.$getRange();S<=$;S++)if(e.$isUnmeasuredItem(S)){d=!1;break}if(d)break;const[a,m]=c();try{if(!await a)return}finally{m()}}e.$update(P),u.scroll({[t?"left":"top"]:T(r(),t),behavior:"smooth"})});else for(;;){const[d,a]=c();try{if(e.$update(P),u.scroll({[t?"left":"top"]:T(r(),t)}),!await d)return}finally{a()}}};return{$observe(r){s=r;const o=t?"scrollX":"scrollY",c=M(r),u=D(c),d=c.body;n=ve(e,u,t,()=>T(u[o],t),a=>{u.scroll({[t?"left":"top"]:e.$getScrollOffset()+a})},()=>f(r,d,u,t)),l[1](!0)},$dispose(){n&&n._dispose(),s=void 0,l[1](!1),l=V()},$fixScrollJump:()=>{n&&n._fixScrollJump()},$scrollToIndex(r,{align:o,smooth:c,offset:u=0}={}){if(!s)return;if(r=se(r,0,e.$getItemsLength()-1),o==="nearest"){const $=e.$getItemOffset(r),I=e.$getScrollOffset();if($<I)o="start";else if($+e.$getItemSize(r)>I+e.$getViewportSize())o="end";else return}const d=M(s),a=D(d),m=d.documentElement,S=()=>e.$getViewportSize()-(t?m.clientWidth:m.clientHeight);_(()=>u+f(s,d.body,a,t)+e.$getItemOffset(r)+(o==="end"?e.$getItemSize(r)-(e.$getViewportSize()-S()):o==="center"?(e.$getItemSize(r)-(e.$getViewportSize()-S()))/2:0),c)}}},Le=e=>{let t;return{_observe(s){(t||(t=new(D(M(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ze=(e,t)=>{let s;const n=t?"width":"height",i=new WeakMap,l=Le(f=>{const _=[];for(const{target:r,contentRect:o}of f)if(r.offsetParent)if(r===s)e.$update(ie,o[n]);else{const c=i.get(r);c!=R&&_.push([c,o[n]])}_.length&&e.$update(oe,_)});return{$observeRoot(f){l._observe(s=f)},$observeItem:(f,_)=>(i.set(f,_),l._observe(f),()=>{i.delete(f),l._unobserve(f)}),$dispose:l._dispose}},Qe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",i=new WeakMap,l=Le(_=>{const r=[];for(const{target:o,contentRect:c}of _){if(!o.offsetParent)continue;const u=i.get(o);u!=R&&r.push([u,c[s]])}r.length&&e.$update(oe,r)});let f;return{$observeRoot(_){const r=D(M(_)),o=()=>{e.$update(ie,r[n])};r.addEventListener("resize",o),o(),f=()=>{r.removeEventListener("resize",o)}},$observeItem:(_,r)=>(i.set(_,r),l._observe(_),()=>{i.delete(_),l._unobserve(_)}),$dispose(){f&&f(),l._dispose()}}};function je(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Te(e)}const He=Ee({props:{_stateVersion:{type:Object,required:!0},_store:{type:Object,required:!0},_children:{type:Object,required:!0},_resizer:{type:Function,required:!0},_index:{type:Number,required:!0},_isHorizontal:{type:Boolean},_isSSR:{type:Boolean},_as:{type:String,required:!0},_itemProps:Object},setup(e){const t=he(),s=de(()=>e._stateVersion.value&&e._store.$getItemOffset(e._index)),n=de(()=>e._stateVersion.value&&e._store.$isUnmeasuredItem(e._index));return we(()=>t.value&&e._index,(i,l,f)=>{f(e._resizer(t.value,e._index))},{flush:"post"}),()=>{const{_children:i,_isHorizontal:l,_isSSR:f,_as:_}=e,r=n.value,{style:o,...c}=e._itemProps??{},u={contain:"layout style",position:r&&f?void 0:"absolute",[l?"height":"width"]:"100%",[l?"top":"left"]:"0px",[l?re()?"right":"left":"top"]:s.value+"px",visibility:!r||f?"visible":"hidden",...o};return l&&(u.display="inline-flex"),ye(_,Re({ref:t,style:u},c),je(i)?i:{default:()=>[i],_:2},16,["style"])}}}),et=(e,t)=>{const s=e.key;return s??"_"+t},tt=(e,t)=>e[0]===t[0]&&e[1]===t[1],st=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s};export{We as A,He as L,w as U,st as _,Xe as a,xe as b,Ye as c,Be as d,Ze as e,et as f,Fe as g,Oe as h,tt as i,Ge as j,Qe as k,pe as m,Ve as s};
