import{d as A,r as E,k as d,l as N,m as V,q as f,c as z,i as C}from"./iframe-CBl-KSPi.js";import{c as L,a as w,U as M,b as P,d as j,m as k,e as H,g as U,s as B,f as D,L as p,i as F,A as G,h as q}from"./_plugin-vue_export-helper-DydYOWO5.js";function J(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!C(e)}const K={data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},X=A({props:K,emits:["scroll","scrollEnd"],setup(e,{emit:S,expose:T,slots:v}){let m=!!e.ssrCount;const a=e.horizontal,_=E(),t=L(e.data.length,e.itemSize,e.overscan,e.ssrCount,void 0,!e.itemSize),u=H(t,a),i=w(t,a),l=E(t.$getStateVersion()),h=t.$subscribe(M,()=>{l.value=t.$getStateVersion()}),I=t.$subscribe(P,()=>{S("scroll",t.$getScrollOffset())}),x=t.$subscribe(j,()=>{S("scrollEnd")}),g=d(n=>{l.value;const r=t.$getRange();return n&&F(n,r)?n:r}),y=d(()=>l.value&&t.$isScrolling()),O=d(()=>l.value&&t.$getTotalSize());return N(()=>{m=!1,k(()=>{const n=r=>{u.$observeRoot(r),i.$observe(r)};e.scrollRef?n(e.scrollRef):n(_.value.parentElement)})}),V(()=>{h(),I(),x(),u.$dispose(),i.$dispose()}),f(()=>e.data.length,n=>{t.$update(G,[n,e.shift])}),f(()=>e.startMargin,n=>{t.$update(q,n)},{immediate:!0}),f([l],()=>{i.$fixScrollJump()},{flush:"post"}),T({get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return U(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:i.$scrollToIndex,scrollTo:i.$scrollTo,scrollBy:i.$scrollBy}),()=>{const n=e.as,r=e.item,$=O.value,c=[],b=s=>{const o=v.default({item:e.data[s],index:s})[0];return z(p,{key:D(o,s),_stateVersion:l,_store:t,_resizer:u.$observeItem,_index:s,_children:o,_isHorizontal:a,_isSSR:m,_as:r,_itemProps:e.itemProps?.({item:e.data[s],index:s})},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_isSSR","_as","_itemProps"])};if(e.keepMounted){const s=new Set(e.keepMounted);for(let[o,R]=g.value;o<=R;o++)s.add(o);B([...s]).forEach(o=>{c.push(b(o))})}else for(let[s,o]=g.value;s<=o;s++)c.push(b(s));return z(n,{ref:_,style:{contain:"size paint style",overflowAnchor:"none",overflow:"clip",flex:"none",position:"relative",width:a?$+"px":"100%",height:a?"100%":$+"px",pointerEvents:y.value?"none":void 0}},J(c)?c:{default:()=>[c],_:2},8,["style"])}}});export{X as V};
