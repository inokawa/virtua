import{d as x,r as p,c as m,o as w,a as A,w as z,f as g,q as O,b as $,e as C,g as D,u as v,j as b,l as L,t as R}from"./iframe-CXq5RdpB.js";import{c as j,j as k,U as B,b as U,d as H,i as W,k as P,f as q,L as G,A as M}from"./utils-CRzgibXa.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";function K(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!O(t)}const F={data:{type:Array,required:!0},bufferSize:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,as:{type:String,default:"div"},item:{type:String,default:"div"},cache:Object},y=x({props:F,emits:["scroll","scrollEnd"],setup(t,{emit:r,slots:u,expose:f}){const s=t.horizontal,l=p(),e=j(t.data.length,t.itemSize,void 0,t.cache,!t.itemSize),_=P(e,s),a=k(e,s),n=p(e.$getStateVersion());e.$subscribe(B,()=>{n.value=e.$getStateVersion()}),e.$subscribe(U,()=>{r("scroll")}),e.$subscribe(H,()=>{r("scrollEnd")});const E=m(o=>{n.value;const c=e.$getRange(t.bufferSize);return o&&W(o,c)?o:c}),I=m(()=>n.value&&e.$isScrolling()),V=m(()=>n.value&&e.$getTotalSize());return w(()=>{const o=l.value;o&&(_.$observeRoot(o),a.$observe(o))}),A(()=>{e.$dispose(),_.$dispose(),a.$dispose()}),z(()=>t.data.length,o=>{e.$update(M,[o,t.shift])}),z([n],()=>{a.$fixScrollJump()},{flush:"post"}),f({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get viewportSize(){return e.$getViewportSize()},findItemIndex:e.$findItemIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:a.$scrollToIndex}),()=>{const o=t.as,c=t.item,S=V.value,N=a.$isNegative(),d=[];for(let[i,T]=E.value;i<=T;i++){const h=u.default({item:t.data[i],index:i})[0];d.push(g(G,{key:q(h,i),_stateVersion:n,_store:e,_resizer:_.$observeItem,_index:i,_children:h,_isHorizontal:s,_isNegative:N,_as:c},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_isNegative","_as"]))}return g(o,{ref:l,style:{contain:"size style",overflowAnchor:"none",flex:"none",position:"relative",width:s?S+"px":"100%",height:s?"100%":S+"px",pointerEvents:I.value?"none":void 0}},K(d)?d:{default:()=>[d],_:2},8,["style"])}}}),Q={style:{padding:"200px 100px"}},X={style:{border:"solid 1px gray"}},Y=x({__name:"WindowVirtualizer",setup(t){const r=[20,40,180,77],u=Array.from({length:1e3}).map((f,s)=>r[s%4]);return(f,s)=>(b(),$("div",Q,[C("div",X,[g(v(y),{data:v(u)},{default:D(({item:l,index:e})=>[(b(),$("div",{key:e,style:L({height:l+"px",background:"white",borderBottom:"solid 1px #ccc"})},R(e),5))]),_:1},8,["data"])])]))}}),Z=J(Y,[["__scopeId","data-v-601220e6"]]),se={component:y},ne={render:()=>({components:{Component:Z},template:"<Component />"})},ie=["Default"];export{ne as Default,ie as __namedExportsOrder,se as default};
