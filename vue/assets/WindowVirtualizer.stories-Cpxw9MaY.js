import{d as D,b as z,m as O,q as R,s as g,e as h,i as j,o as y,g as v,j as k,w as B,u as E,n as U,t as H}from"./vue.esm-bundler-BnsM77Ao.js";import{c as W,U as q,b as G,d as J,e as M,L as P,S as K,j as F,k as Q,A as X,_ as Y}from"./_plugin-vue_export-helper-AMRc5jfy.js";function Z(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!j(t)}const $={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,as:{type:String,default:"div"},item:{type:String,default:"div"}},V=D({props:$,emits:["scrollEnd","rangeChange"],setup(t,{emit:c,slots:u}){const o=t.horizontal,s=z(),e=W(t.data.length,t.itemSize??40,void 0,void 0,!t.itemSize),r=F(e,o),m=Q(e,o),d=z(e._getStateVersion()),A=e._subscribe(q,()=>{d.value=e._getStateVersion()}),N=e._subscribe(G,()=>{c("scrollEnd")});return O(()=>{const n=s.value;n&&(r._observeRoot(n),m._observe(n))}),R(()=>{A(),N(),r._dispose(),m._dispose()}),g(()=>t.data.length,n=>{e._update(X,[n,t.shift])}),g([d,e._getJumpCount],([,n],[,i])=>{n!==i&&m._fixScrollJump()},{flush:"post"}),g([d,e._getRange],([,[n,i]],[,[f,p]])=>{f===n&&p===i||c("rangeChange",n,i)},{flush:"post"}),()=>{d.value;const n=t.as,i=t.item,f=t.data.length,[p,T]=e._getRange(),S=e._getScrollDirection(),b=e._getTotalSize(),l=[];for(let[a,L]=J(p,T,t.overscan,S,f);a<=L;a++){const x=u.default(t.data[a])[0];l.push(h(P,{key:M(x,a),_resizer:r._observeItem,_index:a,_offset:e._getItemOffset(a),_hide:e._isUnmeasuredItem(a),_children:x,_isHorizontal:o,_as:i},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_as"]))}return h(n,{ref:s,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:o?b+"px":"100%",height:o?"100%":b+"px",pointerEvents:S!==K?"none":"auto"}},Z(l)?l:{default:()=>[l],_:2},8,["style"])}}}),ee={style:{padding:"200px 100px"}},te={style:{border:"solid 1px gray"}},ne=D({__name:"WindowVirtualizer",setup(t){const c=[20,40,180,77],u=s=>({index:s,size:c[s%4]+"px"}),o=Array.from({length:1e3}).map((s,e)=>u(e));return(s,e)=>(y(),v("div",ee,[k("div",te,[h(E(V),{data:E(o)},{default:B(r=>[(y(),v("div",{key:r.index,style:U({height:r.size,background:"white",borderBottom:"solid 1px #ccc"})},H(r.index),5))]),_:1},8,["data"])])]))}}),oe=Y(ne,[["__scopeId","data-v-2d3e870f"]]),ae={component:V},_={render:()=>({components:{Component:oe},template:"<Component />"})};var C,I,w;_.parameters={..._.parameters,docs:{...(C=_.parameters)==null?void 0:C.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...(w=(I=_.parameters)==null?void 0:I.docs)==null?void 0:w.source}}};const ie=["Default"];export{_ as Default,ie as __namedExportsOrder,ae as default};
