import{d as E,r as $,a as p,o as A,b as O,w as v,c as g,i as D,n as b,q as L,l as R,u as x,m as y,p as j,t as k}from"./iframe-Dg8W2hmf.js";import{c as B,j as U,U as H,b as W,d as P,i as q,k as G,f as K,L as M,A as J}from"./utils-Big_sKak.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./preload-helper-PPVm8Dsz.js";function Q(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!D(t)}const X={data:{type:Array,required:!0},bufferSize:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,as:{type:String,default:"div"},item:{type:String,default:"div"},cache:Object},I=E({props:X,emits:["scroll","scrollEnd"],setup(t,{emit:i,slots:m,expose:f}){const n=t.horizontal,c=$(),e=B(t.data.length,t.itemSize,void 0,t.cache,!t.itemSize),_=G(e,n),a=U(e,n),s=$(e.$getStateVersion());e.$subscribe(H,()=>{s.value=e.$getStateVersion()}),e.$subscribe(W,()=>{i("scroll")}),e.$subscribe(P,()=>{i("scrollEnd")});const V=p(o=>{s.value;const l=e.$getRange(t.bufferSize);return o&&q(o,l)?o:l}),N=p(()=>s.value&&e.$isScrolling()),T=p(()=>s.value&&e.$getTotalSize());return A(()=>{const o=c.value;o&&(_.$observeRoot(o),a.$observe(o))}),O(()=>{e.$dispose(),_.$dispose(),a.$dispose()}),v(()=>t.data.length,o=>{e.$update(J,[o,t.shift])}),v([s],()=>{a.$fixScrollJump()},{flush:"post"}),f({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get viewportSize(){return e.$getViewportSize()},findItemIndex:e.$findItemIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:a.$scrollToIndex}),()=>{const o=t.as,l=t.item,S=T.value,h=a.$isNegative(),w=!n&&h?"unshift":"push",d=[];for(let[r,C]=V.value;r<=C;r++){const z=m.default({item:t.data[r],index:r})[0];d[w](g(M,{key:K(z,r),_stateVersion:s,_store:e,_resizer:_.$observeItem,_index:r,_children:z,_isHorizontal:n,_isNegative:h,_as:l},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_isNegative","_as"]))}return g(o,{ref:c,style:{contain:"size style",overflowAnchor:"none",flex:"none",position:"relative",width:n?S+"px":"100%",height:n?"100%":S+"px",pointerEvents:N.value?"none":void 0}},Q(d)?d:{default:()=>[d],_:2},8,["style"])}}}),Y={style:{padding:"200px 100px"}},Z={style:{border:"solid 1px gray"}},ee=E({__name:"WindowVirtualizer",setup(t){const i=[20,40,180,77],m=Array.from({length:1e3}).map((f,n)=>i[n%4]);return(f,n)=>(y(),b("div",Y,[L("div",Z,[g(x(I),{data:x(m)},{default:R(({item:c,index:e})=>[(y(),b("div",{key:e,style:j({height:c+"px",background:"white",borderBottom:"solid 1px #ccc"})},k(e),5))]),_:1},8,["data"])])]))}}),te=F(ee,[["__scopeId","data-v-601220e6"]]),ae={component:I},u={render:()=>({components:{Component:te},template:"<Component />"})};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...u.parameters?.docs?.source}}};const ie=["Default"];export{u as Default,ie as __namedExportsOrder,ae as default};
