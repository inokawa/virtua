import{d as N,b as g,m as R,q as A,s as _,e as b,i as C}from"./vue.esm-bundler-6P8ENG_2.js";import{c as V,U as L,a as U,b as H,m as j,g as w,d as B,L as D,e as M,f as p,A as G,h as P}from"./_plugin-vue_export-helper-_83YhjbO.js";function k(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!C(t)}const q={data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"}},K=N({props:q,emits:["scroll","scrollEnd"],setup(t,{emit:d,expose:E,slots:z}){let u=!!t.ssrCount;const i=t.horizontal,f=g(),e=V(t.data.length,t.itemSize,t.overscan,t.ssrCount,void 0,!t.itemSize),a=M(e,i),r=p(e,i),c=g(e._getStateVersion()),I=e._subscribe(L,()=>{c.value=e._getStateVersion()}),T=e._subscribe(U,()=>{d("scroll",e._getScrollOffset())}),h=e._subscribe(H,()=>{d("scrollEnd")});return R(()=>{u=!1,j(()=>{const s=o=>{a._observeRoot(o),r._observe(o)};t.scrollRef?s(t.scrollRef):s(f.value.parentElement)})}),A(()=>{I(),T(),h(),a._dispose(),r._dispose()}),_(()=>t.data.length,s=>{e._update(G,[s,t.shift])}),_(()=>t.startMargin,s=>{e._update(P,s)},{immediate:!0}),_([c,e._getJumpCount],([,s],[,o])=>{s!==o&&r._fixScrollJump()},{flush:"post"}),E({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return w(e)},get viewportSize(){return e._getViewportSize()},findStartIndex:e._findStartIndex,findEndIndex:e._findEndIndex,getItemOffset:e._getItemOffset,getItemSize:e._getItemSize,scrollToIndex:r._scrollToIndex,scrollTo:r._scrollTo,scrollBy:r._scrollBy}),()=>{c.value;const s=t.as,o=t.item,[x,O]=e._getRange(),v=e._isScrolling(),S=e._getTotalSize(),l=[];for(let n=x,y=O;n<=y;n++){const m=z.default({item:t.data[n],index:n})[0];l.push(b(D,{key:B(m,n),_resizer:a._observeItem,_index:n,_offset:e._getItemOffset(n),_hide:e._isUnmeasuredItem(n),_children:m,_isHorizontal:i,_isSSR:u,_as:o},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR","_as"]))}return b(s,{ref:f,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:i?S+"px":"100%",height:i?"100%":S+"px",pointerEvents:v?"none":void 0}},k(l)?l:{default:()=>[l],_:2},8,["style"])}}});export{K as V};
