import{d as y,r as z,c as p,o as C,a as A,w as b,b as g,i as N,k as $,l as O,m as D,u as x,n as v,p as L,t as R}from"./iframe-DiZDhbao.js";import{c as k,j,U as B,b as U,d as H,i as W,k as P,f as G,L as M,A as q,_ as J}from"./_plugin-vue_export-helper-D8z-IdN9.js";import"./preload-helper-PPVm8Dsz.js";function K(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!N(t)}const F={data:{type:Array,required:!0},bufferSize:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,as:{type:String,default:"div"},item:{type:String,default:"div"},cache:Object},E=y({props:F,emits:["scroll","scrollEnd"],setup(t,{emit:a,slots:m,expose:f}){const n=t.horizontal,i=z(),e=k(t.data.length,t.itemSize,void 0,t.cache,!t.itemSize),_=P(e,n),c=j(e,n),s=z(e.$getStateVersion());e.$subscribe(B,()=>{s.value=e.$getStateVersion()}),e.$subscribe(U,()=>{a("scroll")}),e.$subscribe(H,()=>{a("scrollEnd")});const I=p(o=>{s.value;const l=e.$getRange(t.bufferSize);return o&&W(o,l)?o:l}),V=p(()=>s.value&&e.$isScrolling()),T=p(()=>s.value&&e.$getTotalSize());return C(()=>{const o=i.value;o&&(_.$observeRoot(o),c.$observe(o))}),A(()=>{e.$dispose(),_.$dispose(),c.$dispose()}),b(()=>t.data.length,o=>{e.$update(q,[o,t.shift])}),b([s],()=>{c.$fixScrollJump()},{flush:"post"}),f({get cache(){return e.$getCacheSnapshot()},get scrollOffset(){return e.$getScrollOffset()},get viewportSize(){return e.$getViewportSize()},findItemIndex:e.$findItemIndex,getItemOffset:e.$getItemOffset,getItemSize:e.$getItemSize,scrollToIndex:c.$scrollToIndex}),()=>{const o=t.as,l=t.item,S=T.value,d=[];for(let[r,w]=I.value;r<=w;r++){const h=m.default({item:t.data[r],index:r})[0];d.push(g(M,{key:G(h,r),_stateVersion:s,_store:e,_resizer:_.$observeItem,_index:r,_children:h,_isHorizontal:n,_as:l},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_as"]))}return g(o,{ref:i,style:{contain:"size style",overflowAnchor:"none",flex:"none",position:"relative",width:n?S+"px":"100%",height:n?"100%":S+"px",pointerEvents:V.value?"none":void 0}},K(d)?d:{default:()=>[d],_:2},8,["style"])}}}),Q={style:{padding:"200px 100px"}},X={style:{border:"solid 1px gray"}},Y=y({__name:"WindowVirtualizer",setup(t){const a=[20,40,180,77],m=Array.from({length:1e3}).map((f,n)=>a[n%4]);return(f,n)=>(v(),$("div",Q,[O("div",X,[g(x(E),{data:x(m)},{default:D(({item:i,index:e})=>[(v(),$("div",{key:e,style:L({height:i+"px",background:"white",borderBottom:"solid 1px #ccc"})},R(e),5))]),_:1},8,["data"])])]))}}),Z=J(Y,[["__scopeId","data-v-16b9c0e0"]]),ne={component:E},u={render:()=>({components:{Component:Z},template:"<Component />"})};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...u.parameters?.docs?.source}}};const se=["Default"];export{u as Default,se as __namedExportsOrder,ne as default};
