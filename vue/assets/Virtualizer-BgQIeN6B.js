import{d as V,b as I,m,q as C,s as L,v as S,e as z,i as M}from"./vue.esm-bundler-CLFsV--v.js";import{c as P,U as H,a as U,b as j,m as k,g as w,s as B,d as D,e as F,f as G,L as q,i as J,A as K,h as Q}from"./_plugin-vue_export-helper-B_J1VqkJ.js";function W(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!M(e)}const X={data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},p=V({props:X,emits:["scroll","scrollEnd"],setup(e,{emit:_,expose:T,slots:v}){let g=!!e.ssrCount;const u=e.horizontal,b=I(),t=P(e.data.length,e.itemSize,e.overscan,e.ssrCount,void 0,!e.itemSize),d=D(t,u),l=F(t,u),a=I(t.$getStateVersion()),x=t.$subscribe(H,()=>{a.value=t.$getStateVersion()}),y=t.$subscribe(U,()=>{_("scroll",t.$getScrollOffset())}),O=t.$subscribe(j,()=>{_("scrollEnd")}),R=m(n=>{a.value;const o=t.$getRange();return n&&J(n,o)?n:o}),A=m(()=>a.value&&t.$isScrolling()),N=m(()=>a.value&&t.$getTotalSize());return C(()=>{g=!1,k(()=>{const n=o=>{d.$observeRoot(o),l.$observe(o)};e.scrollRef?n(e.scrollRef):n(b.value.parentElement)})}),L(()=>{x(),y(),O(),d.$dispose(),l.$dispose()}),S(()=>e.data.length,n=>{t.$update(K,[n,e.shift])}),S(()=>e.startMargin,n=>{t.$update(Q,n)},{immediate:!0}),S([a],()=>{l.$fixScrollJump()},{flush:"post"}),T({get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return w(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:l.$scrollToIndex,scrollTo:l.$scrollTo,scrollBy:l.$scrollBy}),()=>{const n=e.as,o=e.item,[$,E]=R.value,h=N.value,c=[];function f(s){var i;const r=v.default({item:e.data[s],index:s})[0];return z(q,{key:G(r,s),_stateVersion:a,_store:t,_resizer:d.$observeItem,_index:s,_children:r,_isHorizontal:u,_isSSR:g,_as:o,_itemProps:(i=e.itemProps)==null?void 0:i.call(e,{item:e.data[s],index:s})},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_isSSR","_as","_itemProps"])}for(let s=$,r=E;s<=r;s++)c.push(f(s));if(e.keepMounted){const s=[],r=[];B(e.keepMounted).forEach(i=>{i<$&&s.push(f(i)),i>E&&r.push(f(i))}),c.unshift(...s),c.push(...r)}return z(n,{ref:b,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:u?h+"px":"100%",height:u?"100%":h+"px",pointerEvents:A.value?"none":void 0}},W(c)?c:{default:()=>[c],_:2},8,["style"])}}});export{p as V};
