import{d as V,r as h,k as m,l as C,m as L,q as S,c as z,i as M}from"./iframe-DJD2ythY.js";import{c as P,a as k,U as w,b as H,d as U,m as j,e as p,g as B,s as D,f as F,L as G,i as q,A as J,h as K}from"./_plugin-vue_export-helper-Cx_Fv2B5.js";function Q(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!M(e)}const W={data:{type:Array,required:!0},overscan:Number,itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"},itemProps:Function,keepMounted:Array},Z=V({props:W,emits:["scroll","scrollEnd"],setup(e,{emit:_,expose:T,slots:v}){let g=!!e.ssrCount;const c=e.horizontal,$=h(),t=P(e.data.length,e.itemSize,e.overscan,e.ssrCount,void 0,!e.itemSize),d=p(t,c),i=k(t,c),l=h(t.$getStateVersion()),x=t.$subscribe(w,()=>{l.value=t.$getStateVersion()}),O=t.$subscribe(H,()=>{_("scroll",t.$getScrollOffset())}),R=t.$subscribe(U,()=>{_("scrollEnd")}),y=m(n=>{l.value;const o=t.$getRange();return n&&q(n,o)?n:o}),A=m(()=>l.value&&t.$isScrolling()),N=m(()=>l.value&&t.$getTotalSize());return C(()=>{g=!1,j(()=>{const n=o=>{d.$observeRoot(o),i.$observe(o)};e.scrollRef?n(e.scrollRef):n($.value.parentElement)})}),L(()=>{x(),O(),R(),d.$dispose(),i.$dispose()}),S(()=>e.data.length,n=>{t.$update(J,[n,e.shift])}),S(()=>e.startMargin,n=>{t.$update(K,n)},{immediate:!0}),S([l],()=>{i.$fixScrollJump()},{flush:"post"}),T({get scrollOffset(){return t.$getScrollOffset()},get scrollSize(){return B(t)},get viewportSize(){return t.$getViewportSize()},findStartIndex:t.$findStartIndex,findEndIndex:t.$findEndIndex,getItemOffset:t.$getItemOffset,getItemSize:t.$getItemSize,scrollToIndex:i.$scrollToIndex,scrollTo:i.$scrollTo,scrollBy:i.$scrollBy}),()=>{const n=e.as,o=e.item,[b,E]=y.value,I=N.value,a=[];function f(s){const r=v.default({item:e.data[s],index:s})[0];return z(G,{key:F(r,s),_stateVersion:l,_store:t,_resizer:d.$observeItem,_index:s,_children:r,_isHorizontal:c,_isSSR:g,_as:o,_itemProps:e.itemProps?.({item:e.data[s],index:s})},null,8,["_stateVersion","_store","_resizer","_index","_children","_isHorizontal","_isSSR","_as","_itemProps"])}for(let s=b,r=E;s<=r;s++)a.push(f(s));if(e.keepMounted){const s=[],r=[];D(e.keepMounted).forEach(u=>{u<b&&s.push(f(u)),u>E&&r.push(f(u))}),a.unshift(...s),a.push(...r)}return z(n,{ref:$,style:{contain:"strict",overflowAnchor:"none",overflow:"clip",flex:"none",position:"relative",width:c?I+"px":"100%",height:c?"100%":I+"px",pointerEvents:A.value?"none":void 0}},Q(a)?a:{default:()=>[a],_:2},8,["style"])}}});export{Z as V};
